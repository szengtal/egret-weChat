/*!
 * uniLib - compressed JS
 * @licence uniLib - v0.1.0 (2018-01-19)
 *  qq:93749937 | Licence: helojo
 */

!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:void 0!==global?global:"undefined"!=typeof self?self:this).pako=e()}}(function(){return function e(t,n,i){function o(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(r)return r(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){var n=t[a][1][e];return o(n||e)},u,u.exports,e,t,n,i)}return n[a].exports}for(var r="function"==typeof require&&require,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(e,t,n){"use strict";function i(e){if(!(this instanceof i))return new i(e);this.options=a.assign({level:d,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==h)throw new Error(l[n]);if(t.header&&r.deflateSetHeader(this.strm,t.header),t.dictionary){var o;if(o="string"==typeof t.dictionary?s.string2buf(t.dictionary):"[object ArrayBuffer]"===u.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=r.deflateSetDictionary(this.strm,o))!==h)throw new Error(l[n]);this._dict_set=!0}}function o(e,t){var n=new i(t);if(n.push(e,!0),n.err)throw n.msg||l[n.err];return n.result}var r=e("./zlib/deflate"),a=e("./utils/common"),s=e("./utils/strings"),l=e("./zlib/messages"),c=e("./zlib/zstream"),u=Object.prototype.toString,h=0,d=-1,g=0,p=8;i.prototype.push=function(e,t){var n,i,o=this.strm,l=this.options.chunkSize;if(this.ended)return!1;i=t===~~t?t:!0===t?4:0,"string"==typeof e?o.input=s.string2buf(e):"[object ArrayBuffer]"===u.call(e)?o.input=new Uint8Array(e):o.input=e,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new a.Buf8(l),o.next_out=0,o.avail_out=l),1!==(n=r.deflate(o,i))&&n!==h)return this.onEnd(n),this.ended=!0,!1;0!==o.avail_out&&(0!==o.avail_in||4!==i&&2!==i)||("string"===this.options.to?this.onData(s.buf2binstring(a.shrinkBuf(o.output,o.next_out))):this.onData(a.shrinkBuf(o.output,o.next_out)))}while((o.avail_in>0||0===o.avail_out)&&1!==n);return 4===i?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===h):2!==i||(this.onEnd(h),o.avail_out=0,!0)},i.prototype.onData=function(e){this.chunks.push(e)},i.prototype.onEnd=function(e){e===h&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Deflate=i,n.deflate=o,n.deflateRaw=function(e,t){return t=t||{},t.raw=!0,o(e,t)},n.gzip=function(e,t){return t=t||{},t.gzip=!0,o(e,t)}},{"./utils/common":3,"./utils/strings":4,"./zlib/deflate":8,"./zlib/messages":13,"./zlib/zstream":15}],2:[function(e,t,n){"use strict";function i(e){if(!(this instanceof i))return new i(e);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,t.windowBits);if(n!==l.Z_OK)throw new Error(c[n]);this.header=new h,r.inflateGetHeader(this.strm,this.header)}function o(e,t){var n=new i(t);if(n.push(e,!0),n.err)throw n.msg||c[n.err];return n.result}var r=e("./zlib/inflate"),a=e("./utils/common"),s=e("./utils/strings"),l=e("./zlib/constants"),c=e("./zlib/messages"),u=e("./zlib/zstream"),h=e("./zlib/gzheader"),d=Object.prototype.toString;i.prototype.push=function(e,t){var n,i,o,c,u,h,g=this.strm,p=this.options.chunkSize,f=this.options.dictionary,m=!1;if(this.ended)return!1;i=t===~~t?t:!0===t?l.Z_FINISH:l.Z_NO_FLUSH,"string"==typeof e?g.input=s.binstring2buf(e):"[object ArrayBuffer]"===d.call(e)?g.input=new Uint8Array(e):g.input=e,g.next_in=0,g.avail_in=g.input.length;do{if(0===g.avail_out&&(g.output=new a.Buf8(p),g.next_out=0,g.avail_out=p),(n=r.inflate(g,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&f&&(h="string"==typeof f?s.string2buf(f):"[object ArrayBuffer]"===d.call(f)?new Uint8Array(f):f,n=r.inflateSetDictionary(this.strm,h)),n===l.Z_BUF_ERROR&&!0===m&&(n=l.Z_OK,m=!1),n!==l.Z_STREAM_END&&n!==l.Z_OK)return this.onEnd(n),this.ended=!0,!1;g.next_out&&(0!==g.avail_out&&n!==l.Z_STREAM_END&&(0!==g.avail_in||i!==l.Z_FINISH&&i!==l.Z_SYNC_FLUSH)||("string"===this.options.to?(o=s.utf8border(g.output,g.next_out),c=g.next_out-o,u=s.buf2string(g.output,o),g.next_out=c,g.avail_out=p-c,c&&a.arraySet(g.output,g.output,o,c,0),this.onData(u)):this.onData(a.shrinkBuf(g.output,g.next_out)))),0===g.avail_in&&0===g.avail_out&&(m=!0)}while((g.avail_in>0||0===g.avail_out)&&n!==l.Z_STREAM_END);return n===l.Z_STREAM_END&&(i=l.Z_FINISH),i===l.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===l.Z_OK):i!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),g.avail_out=0,!0)},i.prototype.onData=function(e){this.chunks.push(e)},i.prototype.onEnd=function(e){e===l.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Inflate=i,n.inflate=o,n.inflateRaw=function(e,t){return t=t||{},t.raw=!0,o(e,t)},n.ungzip=o},{"./utils/common":3,"./utils/strings":4,"./zlib/constants":6,"./zlib/gzheader":9,"./zlib/inflate":11,"./zlib/messages":13,"./zlib/zstream":15}],3:[function(e,t,n){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i])}}return e},n.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var o={arraySet:function(e,t,n,i,o){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+i),o);else for(var r=0;r<i;r++)e[o+r]=t[n+r]},flattenChunks:function(e){var t,n,i,o,r,a;for(i=0,t=0,n=e.length;t<n;t++)i+=e[t].length;for(a=new Uint8Array(i),o=0,t=0,n=e.length;t<n;t++)r=e[t],a.set(r,o),o+=r.length;return a}},r={arraySet:function(e,t,n,i,o){for(var r=0;r<i;r++)e[o+r]=t[n+r]},flattenChunks:function(e){return[].concat.apply([],e)}};n.setTyped=function(e){e?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,o)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,r))},n.setTyped(i)},{}],4:[function(e,t,n){"use strict";function i(e,t){if(t<65537&&(e.subarray&&a||!e.subarray&&r))return String.fromCharCode.apply(null,o.shrinkBuf(e,t));for(var n="",i=0;i<t;i++)n+=String.fromCharCode(e[i]);return n}var o=e("./common"),r=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(e){r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){a=!1}for(var s=new o.Buf8(256),l=0;l<256;l++)s[l]=l>=252?6:l>=248?5:l>=240?4:l>=224?3:l>=192?2:1;s[254]=s[254]=1,n.string2buf=function(e){var t,n,i,r,a,s=e.length,l=0;for(r=0;r<s;r++)55296==(64512&(n=e.charCodeAt(r)))&&r+1<s&&56320==(64512&(i=e.charCodeAt(r+1)))&&(n=65536+(n-55296<<10)+(i-56320),r++),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=new o.Buf8(l),a=0,r=0;a<l;r++)55296==(64512&(n=e.charCodeAt(r)))&&r+1<s&&56320==(64512&(i=e.charCodeAt(r+1)))&&(n=65536+(n-55296<<10)+(i-56320),r++),n<128?t[a++]=n:n<2048?(t[a++]=192|n>>>6,t[a++]=128|63&n):n<65536?(t[a++]=224|n>>>12,t[a++]=128|n>>>6&63,t[a++]=128|63&n):(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63,t[a++]=128|n>>>6&63,t[a++]=128|63&n);return t},n.buf2binstring=function(e){return i(e,e.length)},n.binstring2buf=function(e){for(var t=new o.Buf8(e.length),n=0,i=t.length;n<i;n++)t[n]=e.charCodeAt(n);return t},n.buf2string=function(e,t){var n,o,r,a,l=t||e.length,c=new Array(2*l);for(o=0,n=0;n<l;)if((r=e[n++])<128)c[o++]=r;else if((a=s[r])>4)c[o++]=65533,n+=a-1;else{for(r&=2===a?31:3===a?15:7;a>1&&n<l;)r=r<<6|63&e[n++],a--;a>1?c[o++]=65533:r<65536?c[o++]=r:(r-=65536,c[o++]=55296|r>>10&1023,c[o++]=56320|1023&r)}return i(c,o)},n.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;n>=0&&128==(192&e[n]);)n--;return n<0?t:0===n?t:n+s[e[n]]>t?n:t}},{"./common":3}],5:[function(e,t,n){"use strict";t.exports=function(e,t,n,i){for(var o=65535&e|0,r=e>>>16&65535|0,a=0;0!==n;){n-=a=n>2e3?2e3:n;do{o=o+t[i++]|0,r=r+o|0}while(--a);o%=65521,r%=65521}return o|r<<16|0}},{}],6:[function(e,t,n){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],7:[function(e,t,n){"use strict";var i=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t,n,o){var r=i,a=o+n;e^=-1;for(var s=o;s<a;s++)e=e>>>8^r[255&(e^t[s])];return-1^e}},{}],8:[function(e,t,n){"use strict";function i(e,t){return e.msg=U[t],t}function o(e){return(e<<1)-(e>4?9:0)}function r(e){for(var t=e.length;--t>=0;)e[t]=0}function a(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(E.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function s(e,t){P._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,a(e.strm)}function l(e,t){e.pending_buf[e.pending++]=t}function c(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function u(e,t,n,i){var o=e.avail_in;return o>i&&(o=i),0===o?0:(e.avail_in-=o,E.arraySet(t,e.input,e.next_in,o,n),1===e.state.wrap?e.adler=w(e.adler,t,o,n):2===e.state.wrap&&(e.adler=L(e.adler,t,o,n)),e.next_in+=o,e.total_in+=o,o)}function h(e,t){var n,i,o=e.max_chain_length,r=e.strstart,a=e.prev_length,s=e.nice_match,l=e.strstart>e.w_size-ie?e.strstart-(e.w_size-ie):0,c=e.window,u=e.w_mask,h=e.prev,d=e.strstart+ne,g=c[r+a-1],p=c[r+a];e.prev_length>=e.good_match&&(o>>=2),s>e.lookahead&&(s=e.lookahead);do{if(n=t,c[n+a]===p&&c[n+a-1]===g&&c[n]===c[r]&&c[++n]===c[r+1]){r+=2,n++;do{}while(c[++r]===c[++n]&&c[++r]===c[++n]&&c[++r]===c[++n]&&c[++r]===c[++n]&&c[++r]===c[++n]&&c[++r]===c[++n]&&c[++r]===c[++n]&&c[++r]===c[++n]&&r<d);if(i=ne-(d-r),r=d-ne,i>a){if(e.match_start=t,a=i,i>=s)break;g=c[r+a-1],p=c[r+a]}}}while((t=h[t&u])>l&&0!=--o);return a<=e.lookahead?a:e.lookahead}function d(e){var t,n,i,o,r,a=e.w_size;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=a+(a-ie)){E.arraySet(e.window,e.window,a,a,0),e.match_start-=a,e.strstart-=a,e.block_start-=a,t=n=e.hash_size;do{i=e.head[--t],e.head[t]=i>=a?i-a:0}while(--n);t=n=a;do{i=e.prev[--t],e.prev[t]=i>=a?i-a:0}while(--n);o+=a}if(0===e.strm.avail_in)break;if(n=u(e.strm,e.window,e.strstart+e.lookahead,o),e.lookahead+=n,e.lookahead+e.insert>=te)for(r=e.strstart-e.insert,e.ins_h=e.window[r],e.ins_h=(e.ins_h<<e.hash_shift^e.window[r+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[r+te-1])&e.hash_mask,e.prev[r&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=r,r++,e.insert--,!(e.lookahead+e.insert<te)););}while(e.lookahead<ie&&0!==e.strm.avail_in)}function g(e,t){for(var n,i;;){if(e.lookahead<ie){if(d(e),e.lookahead<ie&&t===I)return de;if(0===e.lookahead)break}if(n=0,e.lookahead>=te&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+te-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-ie&&(e.match_length=h(e,n)),e.match_length>=te)if(i=P._tr_tally(e,e.strstart-e.match_start,e.match_length-te),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=te){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+te-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else i=P._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(s(e,!1),0===e.strm.avail_out))return de}return e.insert=e.strstart<te-1?e.strstart:te-1,t===k?(s(e,!0),0===e.strm.avail_out?pe:fe):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?de:ge}function p(e,t){for(var n,i,o;;){if(e.lookahead<ie){if(d(e),e.lookahead<ie&&t===I)return de;if(0===e.lookahead)break}if(n=0,e.lookahead>=te&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+te-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=te-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-ie&&(e.match_length=h(e,n),e.match_length<=5&&(e.strategy===H||e.match_length===te&&e.strstart-e.match_start>4096)&&(e.match_length=te-1)),e.prev_length>=te&&e.match_length<=e.prev_length){o=e.strstart+e.lookahead-te,i=P._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-te),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=o&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+te-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=te-1,e.strstart++,i&&(s(e,!1),0===e.strm.avail_out))return de}else if(e.match_available){if((i=P._tr_tally(e,0,e.window[e.strstart-1]))&&s(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return de}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=P._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<te-1?e.strstart:te-1,t===k?(s(e,!0),0===e.strm.avail_out?pe:fe):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?de:ge}function f(e,t){for(var n,i,o,r,a=e.window;;){if(e.lookahead<=ne){if(d(e),e.lookahead<=ne&&t===I)return de;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=te&&e.strstart>0&&(o=e.strstart-1,(i=a[o])===a[++o]&&i===a[++o]&&i===a[++o])){r=e.strstart+ne;do{}while(i===a[++o]&&i===a[++o]&&i===a[++o]&&i===a[++o]&&i===a[++o]&&i===a[++o]&&i===a[++o]&&i===a[++o]&&o<r);e.match_length=ne-(r-o),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=te?(n=P._tr_tally(e,1,e.match_length-te),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=P._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(s(e,!1),0===e.strm.avail_out))return de}return e.insert=0,t===k?(s(e,!0),0===e.strm.avail_out?pe:fe):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?de:ge}function m(e,t){for(var n;;){if(0===e.lookahead&&(d(e),0===e.lookahead)){if(t===I)return de;break}if(e.match_length=0,n=P._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(s(e,!1),0===e.strm.avail_out))return de}return e.insert=0,t===k?(s(e,!0),0===e.strm.avail_out?pe:fe):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?de:ge}function _(e,t,n,i,o){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=i,this.func=o}function b(e){e.window_size=2*e.w_size,r(e.head),e.max_lazy_match=T[e.level].max_lazy,e.good_match=T[e.level].good_length,e.nice_match=T[e.level].nice_length,e.max_chain_length=T[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=te-1,e.match_available=0,e.ins_h=0}function y(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=q,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new E.Buf16(2*$),this.dyn_dtree=new E.Buf16(2*(2*Y+1)),this.bl_tree=new E.Buf16(2*(2*Q+1)),r(this.dyn_ltree),r(this.dyn_dtree),r(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new E.Buf16(ee+1),this.heap=new E.Buf16(2*K+1),r(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new E.Buf16(2*K+1),r(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function v(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=W,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?re:ue,e.adler=2===t.wrap?0:1,t.last_flush=I,P._tr_init(t),N):i(e,x)}function S(e){var t=v(e);return t===N&&b(e.state),t}function C(e,t,n,o,r,a){if(!e)return x;var s=1;if(t===B&&(t=6),o<0?(s=0,o=-o):o>15&&(s=2,o-=16),r<1||r>V||n!==q||o<8||o>15||t<0||t>9||a<0||a>Z)return i(e,x);8===o&&(o=9);var l=new y;return e.state=l,l.strm=e,l.wrap=s,l.gzhead=null,l.w_bits=o,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=r+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+te-1)/te),l.window=new E.Buf8(2*l.w_size),l.head=new E.Buf16(l.hash_size),l.prev=new E.Buf16(l.w_size),l.lit_bufsize=1<<r+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new E.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=a,l.method=n,S(e)}var T,E=e("../utils/common"),P=e("./trees"),w=e("./adler32"),L=e("./crc32"),U=e("./messages"),I=0,G=1,R=3,k=4,O=5,N=0,D=1,x=-2,M=-3,A=-5,B=-1,H=1,F=2,j=3,Z=4,z=0,W=2,q=8,V=9,J=15,X=8,K=286,Y=30,Q=19,$=2*K+1,ee=15,te=3,ne=258,ie=ne+te+1,oe=32,re=42,ae=69,se=73,le=91,ce=103,ue=113,he=666,de=1,ge=2,pe=3,fe=4,me=3;T=[new _(0,0,0,0,function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(d(e),0===e.lookahead&&t===I)return de;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var i=e.block_start+n;if((0===e.strstart||e.strstart>=i)&&(e.lookahead=e.strstart-i,e.strstart=i,s(e,!1),0===e.strm.avail_out))return de;if(e.strstart-e.block_start>=e.w_size-ie&&(s(e,!1),0===e.strm.avail_out))return de}return e.insert=0,t===k?(s(e,!0),0===e.strm.avail_out?pe:fe):(e.strstart>e.block_start&&(s(e,!1),e.strm.avail_out),de)}),new _(4,4,8,4,g),new _(4,5,16,8,g),new _(4,6,32,32,g),new _(4,4,16,16,p),new _(8,16,32,32,p),new _(8,16,128,128,p),new _(8,32,128,256,p),new _(32,128,258,1024,p),new _(32,258,258,4096,p)],n.deflateInit=function(e,t){return C(e,t,q,J,X,z)},n.deflateInit2=C,n.deflateReset=S,n.deflateResetKeep=v,n.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?x:(e.state.gzhead=t,N):x},n.deflate=function(e,t){var n,s,u,h;if(!e||!e.state||t>O||t<0)return e?i(e,x):x;if(s=e.state,!e.output||!e.input&&0!==e.avail_in||s.status===he&&t!==k)return i(e,0===e.avail_out?A:x);if(s.strm=e,n=s.last_flush,s.last_flush=t,s.status===re)if(2===s.wrap)e.adler=0,l(s,31),l(s,139),l(s,8),s.gzhead?(l(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),l(s,255&s.gzhead.time),l(s,s.gzhead.time>>8&255),l(s,s.gzhead.time>>16&255),l(s,s.gzhead.time>>24&255),l(s,9===s.level?2:s.strategy>=F||s.level<2?4:0),l(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(l(s,255&s.gzhead.extra.length),l(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(e.adler=L(e.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=ae):(l(s,0),l(s,0),l(s,0),l(s,0),l(s,0),l(s,9===s.level?2:s.strategy>=F||s.level<2?4:0),l(s,me),s.status=ue);else{var d=q+(s.w_bits-8<<4)<<8;d|=(s.strategy>=F||s.level<2?0:s.level<6?1:6===s.level?2:3)<<6,0!==s.strstart&&(d|=oe),d+=31-d%31,s.status=ue,c(s,d),0!==s.strstart&&(c(s,e.adler>>>16),c(s,65535&e.adler)),e.adler=1}if(s.status===ae)if(s.gzhead.extra){for(u=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>u&&(e.adler=L(e.adler,s.pending_buf,s.pending-u,u)),a(e),u=s.pending,s.pending!==s.pending_buf_size));)l(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++;s.gzhead.hcrc&&s.pending>u&&(e.adler=L(e.adler,s.pending_buf,s.pending-u,u)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=se)}else s.status=se;if(s.status===se)if(s.gzhead.name){u=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>u&&(e.adler=L(e.adler,s.pending_buf,s.pending-u,u)),a(e),u=s.pending,s.pending===s.pending_buf_size)){h=1;break}h=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,l(s,h)}while(0!==h);s.gzhead.hcrc&&s.pending>u&&(e.adler=L(e.adler,s.pending_buf,s.pending-u,u)),0===h&&(s.gzindex=0,s.status=le)}else s.status=le;if(s.status===le)if(s.gzhead.comment){u=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>u&&(e.adler=L(e.adler,s.pending_buf,s.pending-u,u)),a(e),u=s.pending,s.pending===s.pending_buf_size)){h=1;break}h=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,l(s,h)}while(0!==h);s.gzhead.hcrc&&s.pending>u&&(e.adler=L(e.adler,s.pending_buf,s.pending-u,u)),0===h&&(s.status=ce)}else s.status=ce;if(s.status===ce&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&a(e),s.pending+2<=s.pending_buf_size&&(l(s,255&e.adler),l(s,e.adler>>8&255),e.adler=0,s.status=ue)):s.status=ue),0!==s.pending){if(a(e),0===e.avail_out)return s.last_flush=-1,N}else if(0===e.avail_in&&o(t)<=o(n)&&t!==k)return i(e,A);if(s.status===he&&0!==e.avail_in)return i(e,A);if(0!==e.avail_in||0!==s.lookahead||t!==I&&s.status!==he){var g=s.strategy===F?m(s,t):s.strategy===j?f(s,t):T[s.level].func(s,t);if(g!==pe&&g!==fe||(s.status=he),g===de||g===pe)return 0===e.avail_out&&(s.last_flush=-1),N;if(g===ge&&(t===G?P._tr_align(s):t!==O&&(P._tr_stored_block(s,0,0,!1),t===R&&(r(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),a(e),0===e.avail_out))return s.last_flush=-1,N}return t!==k?N:s.wrap<=0?D:(2===s.wrap?(l(s,255&e.adler),l(s,e.adler>>8&255),l(s,e.adler>>16&255),l(s,e.adler>>24&255),l(s,255&e.total_in),l(s,e.total_in>>8&255),l(s,e.total_in>>16&255),l(s,e.total_in>>24&255)):(c(s,e.adler>>>16),c(s,65535&e.adler)),a(e),s.wrap>0&&(s.wrap=-s.wrap),0!==s.pending?N:D)},n.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==re&&t!==ae&&t!==se&&t!==le&&t!==ce&&t!==ue&&t!==he?i(e,x):(e.state=null,t===ue?i(e,M):N):x},n.deflateSetDictionary=function(e,t){var n,i,o,a,s,l,c,u,h=t.length;if(!e||!e.state)return x;if(n=e.state,2===(a=n.wrap)||1===a&&n.status!==re||n.lookahead)return x;for(1===a&&(e.adler=w(e.adler,t,h,0)),n.wrap=0,h>=n.w_size&&(0===a&&(r(n.head),n.strstart=0,n.block_start=0,n.insert=0),u=new E.Buf8(n.w_size),E.arraySet(u,t,h-n.w_size,n.w_size,0),t=u,h=n.w_size),s=e.avail_in,l=e.next_in,c=e.input,e.avail_in=h,e.next_in=0,e.input=t,d(n);n.lookahead>=te;){i=n.strstart,o=n.lookahead-(te-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[i+te-1])&n.hash_mask,n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++}while(--o);n.strstart=i,n.lookahead=te-1,d(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=te-1,n.match_available=0,e.next_in=l,e.input=c,e.avail_in=s,n.wrap=a,N},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./messages":13,"./trees":14}],9:[function(e,t,n){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],10:[function(e,t,n){"use strict";t.exports=function(e,t){var n,i,o,r,a,s,l,c,u,h,d,g,p,f,m,_,b,y,v,S,C,T,E,P,w;n=e.state,i=e.next_in,P=e.input,o=i+(e.avail_in-5),r=e.next_out,w=e.output,a=r-(t-e.avail_out),s=r+(e.avail_out-257),l=n.dmax,c=n.wsize,u=n.whave,h=n.wnext,d=n.window,g=n.hold,p=n.bits,f=n.lencode,m=n.distcode,_=(1<<n.lenbits)-1,b=(1<<n.distbits)-1;e:do{p<15&&(g+=P[i++]<<p,p+=8,g+=P[i++]<<p,p+=8),y=f[g&_];t:for(;;){if(v=y>>>24,g>>>=v,p-=v,0===(v=y>>>16&255))w[r++]=65535&y;else{if(!(16&v)){if(0==(64&v)){y=f[(65535&y)+(g&(1<<v)-1)];continue t}if(32&v){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}S=65535&y,(v&=15)&&(p<v&&(g+=P[i++]<<p,p+=8),S+=g&(1<<v)-1,g>>>=v,p-=v),p<15&&(g+=P[i++]<<p,p+=8,g+=P[i++]<<p,p+=8),y=m[g&b];n:for(;;){if(v=y>>>24,g>>>=v,p-=v,!(16&(v=y>>>16&255))){if(0==(64&v)){y=m[(65535&y)+(g&(1<<v)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(C=65535&y,v&=15,p<v&&(g+=P[i++]<<p,(p+=8)<v&&(g+=P[i++]<<p,p+=8)),(C+=g&(1<<v)-1)>l){e.msg="invalid distance too far back",n.mode=30;break e}if(g>>>=v,p-=v,v=r-a,C>v){if((v=C-v)>u&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(T=0,E=d,0===h){if(T+=c-v,v<S){S-=v;do{w[r++]=d[T++]}while(--v);T=r-C,E=w}}else if(h<v){if(T+=c+h-v,(v-=h)<S){S-=v;do{w[r++]=d[T++]}while(--v);if(T=0,h<S){S-=v=h;do{w[r++]=d[T++]}while(--v);T=r-C,E=w}}}else if(T+=h-v,v<S){S-=v;do{w[r++]=d[T++]}while(--v);T=r-C,E=w}for(;S>2;)w[r++]=E[T++],w[r++]=E[T++],w[r++]=E[T++],S-=3;S&&(w[r++]=E[T++],S>1&&(w[r++]=E[T++]))}else{T=r-C;do{w[r++]=w[T++],w[r++]=w[T++],w[r++]=w[T++],S-=3}while(S>2);S&&(w[r++]=w[T++],S>1&&(w[r++]=w[T++]))}break}}break}}while(i<o&&r<s);i-=S=p>>3,g&=(1<<(p-=S<<3))-1,e.next_in=i,e.next_out=r,e.avail_in=i<o?o-i+5:5-(i-o),e.avail_out=r<s?s-r+257:257-(r-s),n.hold=g,n.bits=p}},{}],11:[function(e,t,n){"use strict";function i(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function o(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new g.Buf16(320),this.work=new g.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function r(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=k,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new g.Buf32(ue),t.distcode=t.distdyn=new g.Buf32(he),t.sane=1,t.back=-1,E):L}function a(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,r(e)):L}function s(e,t){var n,i;return e&&e.state?(i=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?L:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=n,i.wbits=t,a(e))):L}function l(e,t){var n,i;return e?(i=new o,e.state=i,i.window=null,(n=s(e,t))!==E&&(e.state=null),n):L}function c(e){if(ge){var t;for(h=new g.Buf32(512),d=new g.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(_(y,e.lens,0,288,h,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;_(v,e.lens,0,32,d,0,e.work,{bits:5}),ge=!1}e.lencode=h,e.lenbits=9,e.distcode=d,e.distbits=5}function u(e,t,n,i){var o,r=e.state;return null===r.window&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new g.Buf8(r.wsize)),i>=r.wsize?(g.arraySet(r.window,t,n-r.wsize,r.wsize,0),r.wnext=0,r.whave=r.wsize):((o=r.wsize-r.wnext)>i&&(o=i),g.arraySet(r.window,t,n-i,o,r.wnext),(i-=o)?(g.arraySet(r.window,t,n-i,i,0),r.wnext=i,r.whave=r.wsize):(r.wnext+=o,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=o))),0}var h,d,g=e("../utils/common"),p=e("./adler32"),f=e("./crc32"),m=e("./inffast"),_=e("./inftrees"),b=0,y=1,v=2,S=4,C=5,T=6,E=0,P=1,w=2,L=-2,U=-3,I=-4,G=-5,R=8,k=1,O=2,N=3,D=4,x=5,M=6,A=7,B=8,H=9,F=10,j=11,Z=12,z=13,W=14,q=15,V=16,J=17,X=18,K=19,Y=20,Q=21,$=22,ee=23,te=24,ne=25,ie=26,oe=27,re=28,ae=29,se=30,le=31,ce=32,ue=852,he=592,de=15,ge=!0;n.inflateReset=a,n.inflateReset2=s,n.inflateResetKeep=r,n.inflateInit=function(e){return l(e,de)},n.inflateInit2=l,n.inflate=function(e,t){var n,o,r,a,s,l,h,d,ue,he,de,ge,pe,fe,me,_e,be,ye,ve,Se,Ce,Te,Ee,Pe,we=0,Le=new g.Buf8(4),Ue=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return L;(n=e.state).mode===Z&&(n.mode=z),s=e.next_out,r=e.output,h=e.avail_out,a=e.next_in,o=e.input,l=e.avail_in,d=n.hold,ue=n.bits,he=l,de=h,Te=E;e:for(;;)switch(n.mode){case k:if(0===n.wrap){n.mode=z;break}for(;ue<16;){if(0===l)break e;l--,d+=o[a++]<<ue,ue+=8}if(2&n.wrap&&35615===d){n.check=0,Le[0]=255&d,Le[1]=d>>>8&255,n.check=f(n.check,Le,2,0),d=0,ue=0,n.mode=O;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&d)<<8)+(d>>8))%31){e.msg="incorrect header check",n.mode=se;break}if((15&d)!==R){e.msg="unknown compression method",n.mode=se;break}if(d>>>=4,ue-=4,Ce=8+(15&d),0===n.wbits)n.wbits=Ce;else if(Ce>n.wbits){e.msg="invalid window size",n.mode=se;break}n.dmax=1<<Ce,e.adler=n.check=1,n.mode=512&d?F:Z,d=0,ue=0;break;case O:for(;ue<16;){if(0===l)break e;l--,d+=o[a++]<<ue,ue+=8}if(n.flags=d,(255&n.flags)!==R){e.msg="unknown compression method",n.mode=se;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=se;break}n.head&&(n.head.text=d>>8&1),512&n.flags&&(Le[0]=255&d,Le[1]=d>>>8&255,n.check=f(n.check,Le,2,0)),d=0,ue=0,n.mode=N;case N:for(;ue<32;){if(0===l)break e;l--,d+=o[a++]<<ue,ue+=8}n.head&&(n.head.time=d),512&n.flags&&(Le[0]=255&d,Le[1]=d>>>8&255,Le[2]=d>>>16&255,Le[3]=d>>>24&255,n.check=f(n.check,Le,4,0)),d=0,ue=0,n.mode=D;case D:for(;ue<16;){if(0===l)break e;l--,d+=o[a++]<<ue,ue+=8}n.head&&(n.head.xflags=255&d,n.head.os=d>>8),512&n.flags&&(Le[0]=255&d,Le[1]=d>>>8&255,n.check=f(n.check,Le,2,0)),d=0,ue=0,n.mode=x;case x:if(1024&n.flags){for(;ue<16;){if(0===l)break e;l--,d+=o[a++]<<ue,ue+=8}n.length=d,n.head&&(n.head.extra_len=d),512&n.flags&&(Le[0]=255&d,Le[1]=d>>>8&255,n.check=f(n.check,Le,2,0)),d=0,ue=0}else n.head&&(n.head.extra=null);n.mode=M;case M:if(1024&n.flags&&((ge=n.length)>l&&(ge=l),ge&&(n.head&&(Ce=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),g.arraySet(n.head.extra,o,a,ge,Ce)),512&n.flags&&(n.check=f(n.check,o,ge,a)),l-=ge,a+=ge,n.length-=ge),n.length))break e;n.length=0,n.mode=A;case A:if(2048&n.flags){if(0===l)break e;ge=0;do{Ce=o[a+ge++],n.head&&Ce&&n.length<65536&&(n.head.name+=String.fromCharCode(Ce))}while(Ce&&ge<l);if(512&n.flags&&(n.check=f(n.check,o,ge,a)),l-=ge,a+=ge,Ce)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=B;case B:if(4096&n.flags){if(0===l)break e;ge=0;do{Ce=o[a+ge++],n.head&&Ce&&n.length<65536&&(n.head.comment+=String.fromCharCode(Ce))}while(Ce&&ge<l);if(512&n.flags&&(n.check=f(n.check,o,ge,a)),l-=ge,a+=ge,Ce)break e}else n.head&&(n.head.comment=null);n.mode=H;case H:if(512&n.flags){for(;ue<16;){if(0===l)break e;l--,d+=o[a++]<<ue,ue+=8}if(d!==(65535&n.check)){e.msg="header crc mismatch",n.mode=se;break}d=0,ue=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=Z;break;case F:for(;ue<32;){if(0===l)break e;l--,d+=o[a++]<<ue,ue+=8}e.adler=n.check=i(d),d=0,ue=0,n.mode=j;case j:if(0===n.havedict)return e.next_out=s,e.avail_out=h,e.next_in=a,e.avail_in=l,n.hold=d,n.bits=ue,w;e.adler=n.check=1,n.mode=Z;case Z:if(t===C||t===T)break e;case z:if(n.last){d>>>=7&ue,ue-=7&ue,n.mode=oe;break}for(;ue<3;){if(0===l)break e;l--,d+=o[a++]<<ue,ue+=8}switch(n.last=1&d,d>>>=1,ue-=1,3&d){case 0:n.mode=W;break;case 1:if(c(n),n.mode=Y,t===T){d>>>=2,ue-=2;break e}break;case 2:n.mode=J;break;case 3:e.msg="invalid block type",n.mode=se}d>>>=2,ue-=2;break;case W:for(d>>>=7&ue,ue-=7&ue;ue<32;){if(0===l)break e;l--,d+=o[a++]<<ue,ue+=8}if((65535&d)!=(d>>>16^65535)){e.msg="invalid stored block lengths",n.mode=se;break}if(n.length=65535&d,d=0,ue=0,n.mode=q,t===T)break e;case q:n.mode=V;case V:if(ge=n.length){if(ge>l&&(ge=l),ge>h&&(ge=h),0===ge)break e;g.arraySet(r,o,a,ge,s),l-=ge,a+=ge,h-=ge,s+=ge,n.length-=ge;break}n.mode=Z;break;case J:for(;ue<14;){if(0===l)break e;l--,d+=o[a++]<<ue,ue+=8}if(n.nlen=257+(31&d),d>>>=5,ue-=5,n.ndist=1+(31&d),d>>>=5,ue-=5,n.ncode=4+(15&d),d>>>=4,ue-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=se;break}n.have=0,n.mode=X;case X:for(;n.have<n.ncode;){for(;ue<3;){if(0===l)break e;l--,d+=o[a++]<<ue,ue+=8}n.lens[Ue[n.have++]]=7&d,d>>>=3,ue-=3}for(;n.have<19;)n.lens[Ue[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,Ee={bits:n.lenbits},Te=_(b,n.lens,0,19,n.lencode,0,n.work,Ee),n.lenbits=Ee.bits,Te){e.msg="invalid code lengths set",n.mode=se;break}n.have=0,n.mode=K;case K:for(;n.have<n.nlen+n.ndist;){for(;we=n.lencode[d&(1<<n.lenbits)-1],me=we>>>24,_e=we>>>16&255,be=65535&we,!(me<=ue);){if(0===l)break e;l--,d+=o[a++]<<ue,ue+=8}if(be<16)d>>>=me,ue-=me,n.lens[n.have++]=be;else{if(16===be){for(Pe=me+2;ue<Pe;){if(0===l)break e;l--,d+=o[a++]<<ue,ue+=8}if(d>>>=me,ue-=me,0===n.have){e.msg="invalid bit length repeat",n.mode=se;break}Ce=n.lens[n.have-1],ge=3+(3&d),d>>>=2,ue-=2}else if(17===be){for(Pe=me+3;ue<Pe;){if(0===l)break e;l--,d+=o[a++]<<ue,ue+=8}ue-=me,Ce=0,ge=3+(7&(d>>>=me)),d>>>=3,ue-=3}else{for(Pe=me+7;ue<Pe;){if(0===l)break e;l--,d+=o[a++]<<ue,ue+=8}ue-=me,Ce=0,ge=11+(127&(d>>>=me)),d>>>=7,ue-=7}if(n.have+ge>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=se;break}for(;ge--;)n.lens[n.have++]=Ce}}if(n.mode===se)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=se;break}if(n.lenbits=9,Ee={bits:n.lenbits},Te=_(y,n.lens,0,n.nlen,n.lencode,0,n.work,Ee),n.lenbits=Ee.bits,Te){e.msg="invalid literal/lengths set",n.mode=se;break}if(n.distbits=6,n.distcode=n.distdyn,Ee={bits:n.distbits},Te=_(v,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,Ee),n.distbits=Ee.bits,Te){e.msg="invalid distances set",n.mode=se;break}if(n.mode=Y,t===T)break e;case Y:n.mode=Q;case Q:if(l>=6&&h>=258){e.next_out=s,e.avail_out=h,e.next_in=a,e.avail_in=l,n.hold=d,n.bits=ue,m(e,de),s=e.next_out,r=e.output,h=e.avail_out,a=e.next_in,o=e.input,l=e.avail_in,d=n.hold,ue=n.bits,n.mode===Z&&(n.back=-1);break}for(n.back=0;we=n.lencode[d&(1<<n.lenbits)-1],me=we>>>24,_e=we>>>16&255,be=65535&we,!(me<=ue);){if(0===l)break e;l--,d+=o[a++]<<ue,ue+=8}if(_e&&0==(240&_e)){for(ye=me,ve=_e,Se=be;we=n.lencode[Se+((d&(1<<ye+ve)-1)>>ye)],me=we>>>24,_e=we>>>16&255,be=65535&we,!(ye+me<=ue);){if(0===l)break e;l--,d+=o[a++]<<ue,ue+=8}d>>>=ye,ue-=ye,n.back+=ye}if(d>>>=me,ue-=me,n.back+=me,n.length=be,0===_e){n.mode=ie;break}if(32&_e){n.back=-1,n.mode=Z;break}if(64&_e){e.msg="invalid literal/length code",n.mode=se;break}n.extra=15&_e,n.mode=$;case $:if(n.extra){for(Pe=n.extra;ue<Pe;){if(0===l)break e;l--,d+=o[a++]<<ue,ue+=8}n.length+=d&(1<<n.extra)-1,d>>>=n.extra,ue-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=ee;case ee:for(;we=n.distcode[d&(1<<n.distbits)-1],me=we>>>24,_e=we>>>16&255,be=65535&we,!(me<=ue);){if(0===l)break e;l--,d+=o[a++]<<ue,ue+=8}if(0==(240&_e)){for(ye=me,ve=_e,Se=be;we=n.distcode[Se+((d&(1<<ye+ve)-1)>>ye)],me=we>>>24,_e=we>>>16&255,be=65535&we,!(ye+me<=ue);){if(0===l)break e;l--,d+=o[a++]<<ue,ue+=8}d>>>=ye,ue-=ye,n.back+=ye}if(d>>>=me,ue-=me,n.back+=me,64&_e){e.msg="invalid distance code",n.mode=se;break}n.offset=be,n.extra=15&_e,n.mode=te;case te:if(n.extra){for(Pe=n.extra;ue<Pe;){if(0===l)break e;l--,d+=o[a++]<<ue,ue+=8}n.offset+=d&(1<<n.extra)-1,d>>>=n.extra,ue-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=se;break}n.mode=ne;case ne:if(0===h)break e;if(ge=de-h,n.offset>ge){if((ge=n.offset-ge)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=se;break}ge>n.wnext?(ge-=n.wnext,pe=n.wsize-ge):pe=n.wnext-ge,ge>n.length&&(ge=n.length),fe=n.window}else fe=r,pe=s-n.offset,ge=n.length;ge>h&&(ge=h),h-=ge,n.length-=ge;do{r[s++]=fe[pe++]}while(--ge);0===n.length&&(n.mode=Q);break;case ie:if(0===h)break e;r[s++]=n.length,h--,n.mode=Q;break;case oe:if(n.wrap){for(;ue<32;){if(0===l)break e;l--,d|=o[a++]<<ue,ue+=8}if(de-=h,e.total_out+=de,n.total+=de,de&&(e.adler=n.check=n.flags?f(n.check,r,de,s-de):p(n.check,r,de,s-de)),de=h,(n.flags?d:i(d))!==n.check){e.msg="incorrect data check",n.mode=se;break}d=0,ue=0}n.mode=re;case re:if(n.wrap&&n.flags){for(;ue<32;){if(0===l)break e;l--,d+=o[a++]<<ue,ue+=8}if(d!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=se;break}d=0,ue=0}n.mode=ae;case ae:Te=P;break e;case se:Te=U;break e;case le:return I;case ce:default:return L}return e.next_out=s,e.avail_out=h,e.next_in=a,e.avail_in=l,n.hold=d,n.bits=ue,(n.wsize||de!==e.avail_out&&n.mode<se&&(n.mode<oe||t!==S))&&u(e,e.output,e.next_out,de-e.avail_out)?(n.mode=le,I):(he-=e.avail_in,de-=e.avail_out,e.total_in+=he,e.total_out+=de,n.total+=de,n.wrap&&de&&(e.adler=n.check=n.flags?f(n.check,r,de,e.next_out-de):p(n.check,r,de,e.next_out-de)),e.data_type=n.bits+(n.last?64:0)+(n.mode===Z?128:0)+(n.mode===Y||n.mode===q?256:0),(0===he&&0===de||t===S)&&Te===E&&(Te=G),Te)},n.inflateEnd=function(e){if(!e||!e.state)return L;var t=e.state;return t.window&&(t.window=null),e.state=null,E},n.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?L:(n.head=t,t.done=!1,E):L},n.inflateSetDictionary=function(e,t){var n,i,o=t.length;return e&&e.state?0!==(n=e.state).wrap&&n.mode!==j?L:n.mode===j&&(i=1,(i=p(i,t,o,0))!==n.check)?U:u(e,t,o,o)?(n.mode=le,I):(n.havedict=1,E):L},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":3,"./adler32":5,"./crc32":7,"./inffast":10,"./inftrees":12}],12:[function(e,t,n){"use strict";var i=e("../utils/common"),o=15,r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],l=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,n,c,u,h,d,g){var p,f,m,_,b,y,v,S,C,T=g.bits,E=0,P=0,w=0,L=0,U=0,I=0,G=0,R=0,k=0,O=0,N=null,D=0,x=new i.Buf16(16),M=new i.Buf16(16),A=null,B=0;for(E=0;E<=o;E++)x[E]=0;for(P=0;P<c;P++)x[t[n+P]]++;for(U=T,L=o;L>=1&&0===x[L];L--);if(U>L&&(U=L),0===L)return u[h++]=20971520,u[h++]=20971520,g.bits=1,0;for(w=1;w<L&&0===x[w];w++);for(U<w&&(U=w),R=1,E=1;E<=o;E++)if(R<<=1,(R-=x[E])<0)return-1;if(R>0&&(0===e||1!==L))return-1;for(M[1]=0,E=1;E<o;E++)M[E+1]=M[E]+x[E];for(P=0;P<c;P++)0!==t[n+P]&&(d[M[t[n+P]]++]=P);if(0===e?(N=A=d,y=19):1===e?(N=r,D-=257,A=a,B-=257,y=256):(N=s,A=l,y=-1),O=0,P=0,E=w,b=h,I=U,G=0,m=-1,k=1<<U,_=k-1,1===e&&k>852||2===e&&k>592)return 1;for(;;){v=E-G,d[P]<y?(S=0,C=d[P]):d[P]>y?(S=A[B+d[P]],C=N[D+d[P]]):(S=96,C=0),p=1<<E-G,w=f=1<<I;do{f-=p,u[b+(O>>G)+f]=v<<24|S<<16|C|0}while(0!==f);for(p=1<<E-1;O&p;)p>>=1;if(0!==p?(O&=p-1,O+=p):O=0,P++,0==--x[E]){if(E===L)break;E=t[n+d[P]]}if(E>U&&(O&_)!==m){for(0===G&&(G=U),b+=w,R=1<<(I=E-G);I+G<L&&!((R-=x[I+G])<=0);)I++,R<<=1;if(k+=1<<I,1===e&&k>852||2===e&&k>592)return 1;u[m=O&_]=U<<24|I<<16|b-h|0}}return 0!==O&&(u[b+O]=E-G<<24|64<<16|0),g.bits=U,0}},{"../utils/common":3}],13:[function(e,t,n){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],14:[function(e,t,n){"use strict";function i(e){for(var t=e.length;--t>=0;)e[t]=0}function o(e,t,n,i,o){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=i,this.max_length=o,this.has_stree=e&&e.length}function r(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function a(e){return e<256?te[e]:te[256+(e>>>7)]}function s(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function l(e,t,n){e.bi_valid>Z-n?(e.bi_buf|=t<<e.bi_valid&65535,s(e,e.bi_buf),e.bi_buf=t>>Z-e.bi_valid,e.bi_valid+=n-Z):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function c(e,t,n){l(e,n[2*t],n[2*t+1])}function u(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}function h(e){16===e.bi_valid?(s(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function d(e,t){var n,i,o,r,a,s,l=t.dyn_tree,c=t.max_code,u=t.stat_desc.static_tree,h=t.stat_desc.has_stree,d=t.stat_desc.extra_bits,g=t.stat_desc.extra_base,p=t.stat_desc.max_length,f=0;for(r=0;r<=j;r++)e.bl_count[r]=0;for(l[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<F;n++)i=e.heap[n],(r=l[2*l[2*i+1]+1]+1)>p&&(r=p,f++),l[2*i+1]=r,i>c||(e.bl_count[r]++,a=0,i>=g&&(a=d[i-g]),s=l[2*i],e.opt_len+=s*(r+a),h&&(e.static_len+=s*(u[2*i+1]+a)));if(0!==f){do{for(r=p-1;0===e.bl_count[r];)r--;e.bl_count[r]--,e.bl_count[r+1]+=2,e.bl_count[p]--,f-=2}while(f>0);for(r=p;0!==r;r--)for(i=e.bl_count[r];0!==i;)(o=e.heap[--n])>c||(l[2*o+1]!==r&&(e.opt_len+=(r-l[2*o+1])*l[2*o],l[2*o+1]=r),i--)}}function g(e,t,n){var i,o,r=new Array(j+1),a=0;for(i=1;i<=j;i++)r[i]=a=a+n[i-1]<<1;for(o=0;o<=t;o++){var s=e[2*o+1];0!==s&&(e[2*o]=u(r[s]++,s))}}function p(){var e,t,n,i,r,a=new Array(j+1);for(n=0,i=0;i<x-1;i++)for(ie[i]=n,e=0;e<1<<X[i];e++)ne[n++]=i;for(ne[n-1]=i,r=0,i=0;i<16;i++)for(oe[i]=r,e=0;e<1<<K[i];e++)te[r++]=i;for(r>>=7;i<B;i++)for(oe[i]=r<<7,e=0;e<1<<K[i]-7;e++)te[256+r++]=i;for(t=0;t<=j;t++)a[t]=0;for(e=0;e<=143;)$[2*e+1]=8,e++,a[8]++;for(;e<=255;)$[2*e+1]=9,e++,a[9]++;for(;e<=279;)$[2*e+1]=7,e++,a[7]++;for(;e<=287;)$[2*e+1]=8,e++,a[8]++;for(g($,A+1,a),e=0;e<B;e++)ee[2*e+1]=5,ee[2*e]=u(e,5);re=new o($,X,M+1,A,j),ae=new o(ee,K,0,B,j),se=new o(new Array(0),Y,0,H,z)}function f(e){var t;for(t=0;t<A;t++)e.dyn_ltree[2*t]=0;for(t=0;t<B;t++)e.dyn_dtree[2*t]=0;for(t=0;t<H;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*W]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function m(e){e.bi_valid>8?s(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function _(e,t,n,i){m(e),i&&(s(e,n),s(e,~n)),U.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}function b(e,t,n,i){var o=2*t,r=2*n;return e[o]<e[r]||e[o]===e[r]&&i[t]<=i[n]}function y(e,t,n){for(var i=e.heap[n],o=n<<1;o<=e.heap_len&&(o<e.heap_len&&b(t,e.heap[o+1],e.heap[o],e.depth)&&o++,!b(t,i,e.heap[o],e.depth));)e.heap[n]=e.heap[o],n=o,o<<=1;e.heap[n]=i}function v(e,t,n){var i,o,r,s,u=0;if(0!==e.last_lit)do{i=e.pending_buf[e.d_buf+2*u]<<8|e.pending_buf[e.d_buf+2*u+1],o=e.pending_buf[e.l_buf+u],u++,0===i?c(e,o,t):(r=ne[o],c(e,r+M+1,t),0!==(s=X[r])&&(o-=ie[r],l(e,o,s)),i--,r=a(i),c(e,r,n),0!==(s=K[r])&&(i-=oe[r],l(e,i,s)))}while(u<e.last_lit);c(e,W,t)}function S(e,t){var n,i,o,r=t.dyn_tree,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,l=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=F,n=0;n<l;n++)0!==r[2*n]?(e.heap[++e.heap_len]=c=n,e.depth[n]=0):r[2*n+1]=0;for(;e.heap_len<2;)o=e.heap[++e.heap_len]=c<2?++c:0,r[2*o]=1,e.depth[o]=0,e.opt_len--,s&&(e.static_len-=a[2*o+1]);for(t.max_code=c,n=e.heap_len>>1;n>=1;n--)y(e,r,n);o=l;do{n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],y(e,r,1),i=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=i,r[2*o]=r[2*n]+r[2*i],e.depth[o]=(e.depth[n]>=e.depth[i]?e.depth[n]:e.depth[i])+1,r[2*n+1]=r[2*i+1]=o,e.heap[1]=o++,y(e,r,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],d(e,t),g(r,c,e.bl_count)}function C(e,t,n){var i,o,r=-1,a=t[1],s=0,l=7,c=4;for(0===a&&(l=138,c=3),t[2*(n+1)+1]=65535,i=0;i<=n;i++)o=a,a=t[2*(i+1)+1],++s<l&&o===a||(s<c?e.bl_tree[2*o]+=s:0!==o?(o!==r&&e.bl_tree[2*o]++,e.bl_tree[2*q]++):s<=10?e.bl_tree[2*V]++:e.bl_tree[2*J]++,s=0,r=o,0===a?(l=138,c=3):o===a?(l=6,c=3):(l=7,c=4))}function T(e,t,n){var i,o,r=-1,a=t[1],s=0,u=7,h=4;for(0===a&&(u=138,h=3),i=0;i<=n;i++)if(o=a,a=t[2*(i+1)+1],!(++s<u&&o===a)){if(s<h)do{c(e,o,e.bl_tree)}while(0!=--s);else 0!==o?(o!==r&&(c(e,o,e.bl_tree),s--),c(e,q,e.bl_tree),l(e,s-3,2)):s<=10?(c(e,V,e.bl_tree),l(e,s-3,3)):(c(e,J,e.bl_tree),l(e,s-11,7));s=0,r=o,0===a?(u=138,h=3):o===a?(u=6,h=3):(u=7,h=4)}}function E(e){var t;for(C(e,e.dyn_ltree,e.l_desc.max_code),C(e,e.dyn_dtree,e.d_desc.max_code),S(e,e.bl_desc),t=H-1;t>=3&&0===e.bl_tree[2*Q[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}function P(e,t,n,i){var o;for(l(e,t-257,5),l(e,n-1,5),l(e,i-4,4),o=0;o<i;o++)l(e,e.bl_tree[2*Q[o]+1],3);T(e,e.dyn_ltree,t-1),T(e,e.dyn_dtree,n-1)}function w(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return G;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return R;for(t=32;t<M;t++)if(0!==e.dyn_ltree[2*t])return R;return G}function L(e,t,n,i){l(e,(O<<1)+(i?1:0),3),_(e,t,n,!0)}var U=e("../utils/common"),I=4,G=0,R=1,k=2,O=0,N=1,D=2,x=29,M=256,A=M+1+x,B=30,H=19,F=2*A+1,j=15,Z=16,z=7,W=256,q=16,V=17,J=18,X=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],K=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Y=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],$=new Array(2*(A+2));i($);var ee=new Array(2*B);i(ee);var te=new Array(512);i(te);var ne=new Array(256);i(ne);var ie=new Array(x);i(ie);var oe=new Array(B);i(oe);var re,ae,se,le=!1;n._tr_init=function(e){le||(p(),le=!0),e.l_desc=new r(e.dyn_ltree,re),e.d_desc=new r(e.dyn_dtree,ae),e.bl_desc=new r(e.bl_tree,se),e.bi_buf=0,e.bi_valid=0,f(e)},n._tr_stored_block=L,n._tr_flush_block=function(e,t,n,i){var o,r,a=0;e.level>0?(e.strm.data_type===k&&(e.strm.data_type=w(e)),S(e,e.l_desc),S(e,e.d_desc),a=E(e),o=e.opt_len+3+7>>>3,(r=e.static_len+3+7>>>3)<=o&&(o=r)):o=r=n+5,n+4<=o&&-1!==t?L(e,t,n,i):e.strategy===I||r===o?(l(e,(N<<1)+(i?1:0),3),v(e,$,ee)):(l(e,(D<<1)+(i?1:0),3),P(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),v(e,e.dyn_ltree,e.dyn_dtree)),f(e),i&&m(e)},n._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(ne[n]+M+1)]++,e.dyn_dtree[2*a(t)]++),e.last_lit===e.lit_bufsize-1},n._tr_align=function(e){l(e,N<<1,3),c(e,W,$),h(e)}},{"../utils/common":3}],15:[function(e,t,n){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],"/":[function(e,t,n){"use strict";var i={};(0,e("./lib/utils/common").assign)(i,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=i},{"./lib/deflate":1,"./lib/inflate":2,"./lib/utils/common":3,"./lib/zlib/constants":6}]},{},[])("/")});var md5=function(){function e(){this.hexcase=0,this.b64pad=""}return e.prototype.hex_md5=function(e){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(e)))},e.prototype.b64_md5=function(e){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(e)))},e.prototype.any_md5=function(e,t){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(e)),t)},e.prototype.hex_hmac_md5=function(e,t){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t)))},e.prototype.b64_hmac_md5=function(e,t){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t)))},e.prototype.any_hmac_md5=function(e,t,n){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t)),n)},e.prototype.md5_vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"==this.hex_md5("abc").toLowerCase()},e.prototype.rstr_md5=function(e){return this.binl2rstr(this.binl_md5(this.rstr2binl(e),8*e.length))},e.prototype.rstr_hmac_md5=function(e,t){var n=this.rstr2binl(e);n.length>16&&(n=this.binl_md5(n,8*e.length));for(var i=Array(16),o=Array(16),r=0;r<16;r++)i[r]=909522486^n[r],o[r]=1549556828^n[r];var a=this.binl_md5(i.concat(this.rstr2binl(t)),512+8*t.length);return this.binl2rstr(this.binl_md5(o.concat(a),640))},e.prototype.rstr2hex=function(e){try{this.hexcase}catch(e){this.hexcase=0}for(var t,n=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",i="",o=0;o<e.length;o++)t=e.charCodeAt(o),i+=n.charAt(t>>>4&15)+n.charAt(15&t);return i},e.prototype.rstr2b64=function(e){try{this.b64pad}catch(e){this.b64pad=""}for(var t="",n=e.length,i=0;i<n;i+=3)for(var o=e.charCodeAt(i)<<16|(i+1<n?e.charCodeAt(i+1)<<8:0)|(i+2<n?e.charCodeAt(i+2):0),r=0;r<4;r++)8*i+6*r>8*e.length?t+=this.b64pad:t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(o>>>6*(3-r)&63);return t},e.prototype.rstr2any=function(e,t){var n,i,o,r,a,s=t.length,l=Array(Math.ceil(e.length/2));for(n=0;n<l.length;n++)l[n]=e.charCodeAt(2*n)<<8|e.charCodeAt(2*n+1);var c=Math.ceil(8*e.length/(Math.log(t.length)/Math.log(2))),u=Array(c);for(i=0;i<c;i++){for(a=Array(),r=0,n=0;n<l.length;n++)r=(r<<16)+l[n],r-=(o=Math.floor(r/s))*s,(a.length>0||o>0)&&(a[a.length]=o);u[i]=r,l=a}var h="";for(n=u.length-1;n>=0;n--)h+=t.charAt(u[n]);return h},e.prototype.str2rstr_utf8=function(e){for(var t,n,i="",o=-1;++o<e.length;)t=e.charCodeAt(o),n=o+1<e.length?e.charCodeAt(o+1):0,55296<=t&&t<=56319&&56320<=n&&n<=57343&&(t=65536+((1023&t)<<10)+(1023&n),o++),t<=127?i+=String.fromCharCode(t):t<=2047?i+=String.fromCharCode(192|t>>>6&31,128|63&t):t<=65535?i+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):t<=2097151&&(i+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return i},e.prototype.str2rstr_utf16le=function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(255&e.charCodeAt(n),e.charCodeAt(n)>>>8&255);return t},e.prototype.str2rstr_utf16be=function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e.charCodeAt(n)>>>8&255,255&e.charCodeAt(n));return t},e.prototype.rstr2binl=function(e){for(var t=Array(e.length>>2),n=0;n<t.length;n++)t[n]=0;for(n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<n%32;return t},e.prototype.binl2rstr=function(e){for(var t="",n=0;n<32*e.length;n+=8)t+=String.fromCharCode(e[n>>5]>>>n%32&255);return t},e.prototype.binl_md5=function(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var n=1732584193,i=-271733879,o=-1732584194,r=271733878,a=0;a<e.length;a+=16){var s=n,l=i,c=o,u=r;n=this.md5_ff(n,i,o,r,e[a+0],7,-680876936),r=this.md5_ff(r,n,i,o,e[a+1],12,-389564586),o=this.md5_ff(o,r,n,i,e[a+2],17,606105819),i=this.md5_ff(i,o,r,n,e[a+3],22,-1044525330),n=this.md5_ff(n,i,o,r,e[a+4],7,-176418897),r=this.md5_ff(r,n,i,o,e[a+5],12,1200080426),o=this.md5_ff(o,r,n,i,e[a+6],17,-1473231341),i=this.md5_ff(i,o,r,n,e[a+7],22,-45705983),n=this.md5_ff(n,i,o,r,e[a+8],7,1770035416),r=this.md5_ff(r,n,i,o,e[a+9],12,-1958414417),o=this.md5_ff(o,r,n,i,e[a+10],17,-42063),i=this.md5_ff(i,o,r,n,e[a+11],22,-1990404162),n=this.md5_ff(n,i,o,r,e[a+12],7,1804603682),r=this.md5_ff(r,n,i,o,e[a+13],12,-40341101),o=this.md5_ff(o,r,n,i,e[a+14],17,-1502002290),i=this.md5_ff(i,o,r,n,e[a+15],22,1236535329),n=this.md5_gg(n,i,o,r,e[a+1],5,-165796510),r=this.md5_gg(r,n,i,o,e[a+6],9,-1069501632),o=this.md5_gg(o,r,n,i,e[a+11],14,643717713),i=this.md5_gg(i,o,r,n,e[a+0],20,-373897302),n=this.md5_gg(n,i,o,r,e[a+5],5,-701558691),r=this.md5_gg(r,n,i,o,e[a+10],9,38016083),o=this.md5_gg(o,r,n,i,e[a+15],14,-660478335),i=this.md5_gg(i,o,r,n,e[a+4],20,-405537848),n=this.md5_gg(n,i,o,r,e[a+9],5,568446438),r=this.md5_gg(r,n,i,o,e[a+14],9,-1019803690),o=this.md5_gg(o,r,n,i,e[a+3],14,-187363961),i=this.md5_gg(i,o,r,n,e[a+8],20,1163531501),n=this.md5_gg(n,i,o,r,e[a+13],5,-1444681467),r=this.md5_gg(r,n,i,o,e[a+2],9,-51403784),o=this.md5_gg(o,r,n,i,e[a+7],14,1735328473),i=this.md5_gg(i,o,r,n,e[a+12],20,-1926607734),n=this.md5_hh(n,i,o,r,e[a+5],4,-378558),r=this.md5_hh(r,n,i,o,e[a+8],11,-2022574463),o=this.md5_hh(o,r,n,i,e[a+11],16,1839030562),i=this.md5_hh(i,o,r,n,e[a+14],23,-35309556),n=this.md5_hh(n,i,o,r,e[a+1],4,-1530992060),r=this.md5_hh(r,n,i,o,e[a+4],11,1272893353),o=this.md5_hh(o,r,n,i,e[a+7],16,-155497632),i=this.md5_hh(i,o,r,n,e[a+10],23,-1094730640),n=this.md5_hh(n,i,o,r,e[a+13],4,681279174),r=this.md5_hh(r,n,i,o,e[a+0],11,-358537222),o=this.md5_hh(o,r,n,i,e[a+3],16,-722521979),i=this.md5_hh(i,o,r,n,e[a+6],23,76029189),n=this.md5_hh(n,i,o,r,e[a+9],4,-640364487),r=this.md5_hh(r,n,i,o,e[a+12],11,-421815835),o=this.md5_hh(o,r,n,i,e[a+15],16,530742520),i=this.md5_hh(i,o,r,n,e[a+2],23,-995338651),n=this.md5_ii(n,i,o,r,e[a+0],6,-198630844),r=this.md5_ii(r,n,i,o,e[a+7],10,1126891415),o=this.md5_ii(o,r,n,i,e[a+14],15,-1416354905),i=this.md5_ii(i,o,r,n,e[a+5],21,-57434055),n=this.md5_ii(n,i,o,r,e[a+12],6,1700485571),r=this.md5_ii(r,n,i,o,e[a+3],10,-1894986606),o=this.md5_ii(o,r,n,i,e[a+10],15,-1051523),i=this.md5_ii(i,o,r,n,e[a+1],21,-2054922799),n=this.md5_ii(n,i,o,r,e[a+8],6,1873313359),r=this.md5_ii(r,n,i,o,e[a+15],10,-30611744),o=this.md5_ii(o,r,n,i,e[a+6],15,-1560198380),i=this.md5_ii(i,o,r,n,e[a+13],21,1309151649),n=this.md5_ii(n,i,o,r,e[a+4],6,-145523070),r=this.md5_ii(r,n,i,o,e[a+11],10,-1120210379),o=this.md5_ii(o,r,n,i,e[a+2],15,718787259),i=this.md5_ii(i,o,r,n,e[a+9],21,-343485551),n=this.safe_add(n,s),i=this.safe_add(i,l),o=this.safe_add(o,c),r=this.safe_add(r,u)}return[n,i,o,r]},e.prototype.md5_cmn=function(e,t,n,i,o,r){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(t,e),this.safe_add(i,r)),o),n)},e.prototype.md5_ff=function(e,t,n,i,o,r,a){return this.md5_cmn(t&n|~t&i,e,t,o,r,a)},e.prototype.md5_gg=function(e,t,n,i,o,r,a){return this.md5_cmn(t&i|n&~i,e,t,o,r,a)},e.prototype.md5_hh=function(e,t,n,i,o,r,a){return this.md5_cmn(t^n^i,e,t,o,r,a)},e.prototype.md5_ii=function(e,t,n,i,o,r,a){return this.md5_cmn(n^(t|~i),e,t,o,r,a)},e.prototype.safe_add=function(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n},e.prototype.bit_rol=function(e,t){return e<<t|e>>>32-t},e}(),Pmd;!function(e){!function(e){e[e.ChatType_Map=2]="ChatType_Map"}(e.ChatType||(e.ChatType={}));var t=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.Chat"},e}();e.Chat=t,function(e){!function(e){e[e.CommonChatUserPmd_CS=1]="CommonChatUserPmd_CS",e[e.GMCommandChatUserPmd_C=2]="GMCommandChatUserPmd_C",e[e.GMCommandListChatUserPmd_S=4]="GMCommandListChatUserPmd_S",e[e.PrivateChatUserPmd_CS=5]="PrivateChatUserPmd_CS"}(e.Param||(e.Param={}))}(t=e.Chat||(e.Chat={}));var n=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.CommonChatUserPmd_CS"},e}();e.CommonChatUserPmd_CS=n,function(e){!function(e){e[e.ChatType_None=0]="ChatType_None",e[e.ChatType_Lobby=1]="ChatType_Lobby",e[e.ChatType_Room=2]="ChatType_Room",e[e.ChatType_Robot=4]="ChatType_Robot"}(e.ChatType||(e.ChatType={}))}(n=e.CommonChatUserPmd_CS||(e.CommonChatUserPmd_CS={})),function(e){!function(e){e[e.ChatPos_None=0]="ChatPos_None",e[e.ChatPos_Normal=1]="ChatPos_Normal",e[e.ChatPos_Sys=2]="ChatPos_Sys",e[e.ChatPos_Tips=4]="ChatPos_Tips",e[e.ChatPos_Pop=8]="ChatPos_Pop",e[e.ChatPos_Private=16]="ChatPos_Private",e[e.ChatPos_Important=32]="ChatPos_Important",e[e.ChatPos_Honor=64]="ChatPos_Honor",e[e.ChatPos_Gm=128]="ChatPos_Gm",e[e.ChatPos_GmVip=144]="ChatPos_GmVip",e[e.ChatPos_ImportantDown=160]="ChatPos_ImportantDown"}(e.ChatPos||(e.ChatPos={}))}(n=e.CommonChatUserPmd_CS||(e.CommonChatUserPmd_CS={}));var i=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.GMCommandChatUserPmd_C"},e}();e.GMCommandChatUserPmd_C=i;var o=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.GMHelpInfo"},e}();e.GMHelpInfo=o;var r=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.GMCommandListChatUserPmd_S"},e}();e.GMCommandListChatUserPmd_S=r;var a=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.PrivateChatUserPmd_CS"},e}();e.PrivateChatUserPmd_CS=a}(Pmd||(Pmd={}));var Pmd;!function(e){var t=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.Forward"},e}();e.Forward=t,function(e){!function(e){e[e.UserJsMessageForwardUserPmd_CS=1]="UserJsMessageForwardUserPmd_CS",e[e.WebSocketForwardUserPmd_C=4]="WebSocketForwardUserPmd_C",e[e.WebSocketForwardUserPmd_S=5]="WebSocketForwardUserPmd_S"}(e.Param||(e.Param={}))}(t=e.Forward||(e.Forward={}));var n=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.UserJsMessageForwardUserPmd_CS"},e}();e.UserJsMessageForwardUserPmd_CS=n;var i=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.WebSocketForwardUserPmd_C"},e}();e.WebSocketForwardUserPmd_C=i;var o=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.WebSocketForwardUserPmd_S"},e}();e.WebSocketForwardUserPmd_S=o}(Pmd||(Pmd={}));var Pmd;!function(e){!function(e){e[e.Shutdown=0]="Shutdown",e[e.Normal=1]="Normal",e[e.Fullly=2]="Fullly",e[e.Starting=3]="Starting"}(e.ZoneState||(e.ZoneState={}));var t=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.ServerShutDownLoginUserPmd_S"},e}();e.ServerShutDownLoginUserPmd_S=t;var n=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.OnlineStateLoginUserPmd_CS"},e}();e.OnlineStateLoginUserPmd_CS=n;!function(e){e[e.Password=1]="Password",e[e.ServerShutdown=2]="ServerShutdown",e[e.VersionTooLow=3]="VersionTooLow",e[e.UserTokenFind=4]="UserTokenFind",e[e.UserTokenTempId=5]="UserTokenTempId",e[e.UserTokenTimeOut=6]="UserTokenTimeOut",e[e.LoginDulicate=7]="LoginDulicate",e[e.NoGatewaytDown=8]="NoGatewaytDown",e[e.AccountUsing=9]="AccountUsing",e[e.GatewayUserMax=10]="GatewayUserMax",e[e.WaiGuaPunish=11]="WaiGuaPunish",e[e.ServerStartTime=12]="ServerStartTime"}(e.LoginReturnFailReason||(e.LoginReturnFailReason={}));!function(e){e[e.ZoneInfoBitMask_None=0]="ZoneInfoBitMask_None",e[e.ZoneInfoBitMask_Normal=1]="ZoneInfoBitMask_Normal",e[e.ZoneInfoBitMask_SandBox=2]="ZoneInfoBitMask_SandBox",e[e.ZoneInfoBitMask_NoOpen=4]="ZoneInfoBitMask_NoOpen"}(e.ZoneInfoBitMask||(e.ZoneInfoBitMask={}));!function(e){e[e.PlatType_Normal=0]="PlatType_Normal",e[e.PlatType_UC=4]="PlatType_UC",e[e.PlatType_LeZhuan=67]="PlatType_LeZhuan",e[e.PlatType_WeChat=68]="PlatType_WeChat",e[e.PlatType_Play68=69]="PlatType_Play68",e[e.PlatType_AiBei=70]="PlatType_AiBei",e[e.PlatType_Facebook=71]="PlatType_Facebook",e[e.PlatType_GooglePlay=72]="PlatType_GooglePlay",e[e.PlatType_XingZhiZhu=73]="PlatType_XingZhiZhu",e[e.PlatType_HuoWu=74]="PlatType_HuoWu",e[e.PlatType_CaiGuo=77]="PlatType_CaiGuo",e[e.PlatType_1758=79]="PlatType_1758",e[e.PlatType_DAPAI=80]="PlatType_DAPAI",e[e.PlatType_HILE=82]="PlatType_HILE",e[e.PlatType_AAY=86]="PlatType_AAY",e[e.PlatType_WEIYOU=90]="PlatType_WEIYOU",e[e.PlatType_9g=99]="PlatType_9g",e[e.PlatType_MOBILE=129]="PlatType_MOBILE",e[e.PlatType_XueChi=133]="PlatType_XueChi",e[e.PlatType_Egret=134]="PlatType_Egret",e[e.PlatType_AoXin=140]="PlatType_AoXin",e[e.PlatType_HUOSU=145]="PlatType_HUOSU",e[e.PlatType_RONGQIANG=151]="PlatType_RONGQIANG",e[e.PlatType_WXApp=152]="PlatType_WXApp",e[e.PlatType_RongQiangApp=153]="PlatType_RongQiangApp"}(e.PlatType||(e.PlatType={}));!function(e){e[e.OnlineState_Offline=0]="OnlineState_Offline",e[e.OnlineState_Online=1]="OnlineState_Online",e[e.OnlineState_Slow=2]="OnlineState_Slow",e[e.OnlineState_Leave=3]="OnlineState_Leave",e[e.OnlineState_Calling=4]="OnlineState_Calling"}(e.OnlineState||(e.OnlineState={}));var i=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.ZoneInfo"},e}();e.ZoneInfo=i;var o=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.ZoneInfoListLoginUserPmd_S"},e}();e.ZoneInfoListLoginUserPmd_S=o;var r=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.RequestZoneInfoListLoginUserPmd_C"},e}();e.RequestZoneInfoListLoginUserPmd_C=r;var a=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.RequestUserZoneInfoLoginUserPmd_C"},e}();e.RequestUserZoneInfoLoginUserPmd_C=a;var s=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.UserZoneInfo"},e}();e.UserZoneInfo=s;var l=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.RequestUserZoneInfoLoginUserPmd_S"},e}();e.RequestUserZoneInfoLoginUserPmd_S=l;var c=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.MobileRegistRequestRandCodeLoginUserPmd_C"},e}();e.MobileRegistRequestRandCodeLoginUserPmd_C=c;var u=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.MobileRegistReturnRandCodeLoginUserPmd_S"},e}();e.MobileRegistReturnRandCodeLoginUserPmd_S=u;var h=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.MobileRegistRequestCreateAccountLoginUserPmd_C"},e}();e.MobileRegistRequestCreateAccountLoginUserPmd_C=h;var d=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.MobileRegistReturnCreateAccountFailLoginUserPmd_S"},e}();e.MobileRegistReturnCreateAccountFailLoginUserPmd_S=d;var g=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.EmailRegistRequestCreateAccountLoginUserPmd_C"},e}();e.EmailRegistRequestCreateAccountLoginUserPmd_C=g;var p=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.EmailRegistReturnCreateAccountLoginUserPmd_S"},e}();e.EmailRegistReturnCreateAccountLoginUserPmd_S=p;var f=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.UserRequestPlatTokenByPasswordLoginUserPmd_C"},e}();e.UserRequestPlatTokenByPasswordLoginUserPmd_C=f;var m=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.UserRequestPlatTokenByThirdLoginUserPmd_C"},e}();e.UserRequestPlatTokenByThirdLoginUserPmd_C=m;var _=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.UserRequestPlatTokenLoginOkLoginUserPmd_S"},e}();e.UserRequestPlatTokenLoginOkLoginUserPmd_S=_;var b=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.UserRequestPlatTokenLoginFailLoginUserPmd_S"},e}();e.UserRequestPlatTokenLoginFailLoginUserPmd_S=b;var y=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.UserLoginRequestLoginUserPmd_C"},e}();e.UserLoginRequestLoginUserPmd_C=y;var v=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.UserLoginReturnFailLoginUserPmd_S"},e}();e.UserLoginReturnFailLoginUserPmd_S=v;var S=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.UserLoginReturnOkLoginUserPmd_S"},e}();e.UserLoginReturnOkLoginUserPmd_S=S;var C=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.UserLoginTokenLoginUserPmd_C"},e}();e.UserLoginTokenLoginUserPmd_C=C;var T=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.UserLoginReconnectLoginUserPmd_C"},e}();e.UserLoginReconnectLoginUserPmd_C=T;var E=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.ClientLogUrlLoginUserPmd_S"},e}();e.ClientLogUrlLoginUserPmd_S=E;var P=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.MessageBoxLoginUserPmd_S"},e}();e.MessageBoxLoginUserPmd_S=P;var w=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.RequestAccountRegisterLoginUserPmd_C"},e}();e.RequestAccountRegisterLoginUserPmd_C=w;var L=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.ReturnAccountRegisterLoginUserPmd_S"},e}();e.ReturnAccountRegisterLoginUserPmd_S=L;var U=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.UserLogoutTokenLoginUserPmd_C"},e}();e.UserLogoutTokenLoginUserPmd_C=U;var I=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.ReconnectKickoutLoginUserPmd_S"},e}();e.ReconnectKickoutLoginUserPmd_S=I;var G=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.ReconnectErrorLoginUserPmd_S"},e}();e.ReconnectErrorLoginUserPmd_S=G;var R=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.ServerKickoutLoginUserPmd_S"},e}();e.ServerKickoutLoginUserPmd_S=R;var k=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.PlatInfo"},e}();e.PlatInfo=k;var O=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.ThirdPlatLoginUserPmd_C"},e}();e.ThirdPlatLoginUserPmd_C=O;var N=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.RequestClientIPLoginUserPmd_C"},e}();e.RequestClientIPLoginUserPmd_C=N;var D=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.ReturnClientIPLoginUserPmd_S"},e}();e.ReturnClientIPLoginUserPmd_S=D;var x=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.CheckVersionLoginUserPmd_C"},e}();e.CheckVersionLoginUserPmd_C=x;var M=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.ClientConfigUpdateLoginUserPmd_S"},e}();e.ClientConfigUpdateLoginUserPmd_S=M}(Pmd||(Pmd={}));var Pmd;!function(e){var t=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.JsonCompressKey"},e}();e.JsonCompressKey=t;var n=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.TickRequestNullUserPmd_CS"},e}();e.TickRequestNullUserPmd_CS=n;var i=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.TickReturnNullUserPmd_CS"},e}();e.TickReturnNullUserPmd_CS=i;var o=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.SetPingTimeNullUserPmd_CS"},e}();e.SetPingTimeNullUserPmd_CS=o;var r=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.SetTickTimeoutNullUserPmd_CS"},e}();e.SetTickTimeoutNullUserPmd_CS=r;var a=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.JsonCompressNullUserPmd_CS"},e}();e.JsonCompressNullUserPmd_CS=a}(Pmd||(Pmd={}));var Pmd;!function(e){!function(e){e[e.HttpReturnCode_Null=0]="HttpReturnCode_Null",e[e.HttpReturnCode_DbError=2]="HttpReturnCode_DbError",e[e.HttpReturnCode_LuaScriptError=4]="HttpReturnCode_LuaScriptError",e[e.HttpReturnCode_GameZoneListError=5]="HttpReturnCode_GameZoneListError",e[e.HttpReturnCode_SignError=11]="HttpReturnCode_SignError",e[e.HttpReturnCode_ServerShutDown=12]="HttpReturnCode_ServerShutDown",e[e.HttpReturnCode_JsonSyntaxError=13]="HttpReturnCode_JsonSyntaxError",e[e.HttpReturnCode_JsonMessageError=14]="HttpReturnCode_JsonMessageError",e[e.HttpReturnCode_TokenValueError=15]="HttpReturnCode_TokenValueError",e[e.HttpReturnCode_WaiGuaUidError=16]="HttpReturnCode_WaiGuaUidError",e[e.HttpReturnCode_NoGatewaytDown=17]="HttpReturnCode_NoGatewaytDown",e[e.HttpReturnCode_NoGatewayDown=17]="HttpReturnCode_NoGatewayDown",e[e.HttpReturnCode_NoSdkServer=18]="HttpReturnCode_NoSdkServer",e[e.HttpReturnCode_SdkCheckSignErr=19]="HttpReturnCode_SdkCheckSignErr",e[e.HttpReturnCode_Sdk3PartyServerErr=20]="HttpReturnCode_Sdk3PartyServerErr",e[e.HttpReturnCode_ProtobufErr=21]="HttpReturnCode_ProtobufErr",e[e.HttpReturnCode_GatewayErr=22]="HttpReturnCode_GatewayErr",e[e.HttpReturnCode_Timeout=23]="HttpReturnCode_Timeout",e[e.HttpReturnCode_AccountUsing=24]="HttpReturnCode_AccountUsing",e[e.HttpReturnCode_OnlinePlatidErr=25]="HttpReturnCode_OnlinePlatidErr"}(e.HttpReturnCode||(e.HttpReturnCode={}));var t=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.GameZoneInfo"},e}();e.GameZoneInfo=t}(Pmd||(Pmd={}));var Pmd;!function(e){var t=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.NotifyRechargeRequestSdkPmd_S"},e}();e.NotifyRechargeRequestSdkPmd_S=t;var n=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.NotifyRechargeReturnSdkPmd_C"},e}();e.NotifyRechargeReturnSdkPmd_C=n;var i=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.PlatBaseData"},e}();e.PlatBaseData=i;var o=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.CreatePlatOrderRequestSdkPmd_C"},e}();e.CreatePlatOrderRequestSdkPmd_C=o;var r=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.CreatePlatOrderReturnSdkPmd_S"},e}();e.CreatePlatOrderReturnSdkPmd_S=r;var a=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.RechargeQueryRequestIOSSdkPmd_C"},e}();e.RechargeQueryRequestIOSSdkPmd_C=a}(Pmd||(Pmd={}));var Pmd;!function(e){var t=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.HttpPackage"},e}();e.HttpPackage=t;var n=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.HttpPackageReturn"},e}();e.HttpPackageReturn=n;var i=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.RequestZoneList"},e}();e.RequestZoneList=i;var o=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.RequestSelectZone"},e}();e.RequestSelectZone=o;var r=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.RequestSelectZoneReturn"},e}();e.RequestSelectZoneReturn=r;var a=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.PlatTokenLogin"},e}();e.PlatTokenLogin=a;var s=function(){function e(){}return e.prototype.GetType=function(){return"Pmd.PlatTokenLoginReturn"},e}();e.PlatTokenLoginReturn=s}(Pmd||(Pmd={}));var uniLib;!function(e){var t=function(){function e(e){this.parse(e)}return e.prototype.parse=function(e){for(var t in e)this[t]=e[t]},e}();e.Reflect=t}(uniLib||(uniLib={}));var uniLib;if(function(e){function t(e){if("object"==typeof e)for(var n in e)(void 0)[n]="object"==typeof e[n]?t(e[n]):e[n]}var n=function(){return function(){this.compressType=0,this.logLevel=7,this.lobbyMode=!1,this.scaleMode="fixedWidth"}}();e.initOptions=n,e.init=function(t,n,o,r,a){if(void 0===r&&(r="fixedWidth"),void 0===a&&(a=!1),t instanceof Object||"function"==typeof n){if(e.Console.init(t.debug,t.logLevel),i.initOpt=t,t.designWidth&&(i.designWidth=t.designWidth),t.designHeight&&(i.designHeight=t.designHeight),t.reloadDefine&&(i.reloadDefine=t.reloadDefine),e.ScreenUtils&&e.ScreenUtils.init(t.scaleMode),e.PayMgr.Instance.isOpen=t.openPay,t.shareData&&(i.shareData=t.shareData),i.lobbyMode=t.lobbyMode,t.nativeStorage&&(i.nativeStorage=t.nativeStorage),t.msgTimeOutSec&&(i.msgTimeOutSec=t.msgTimeOutSec),t.reLoginUrl&&(i.reLoginUrl=t.reLoginUrl),t.CdnDomains){i.CdnDomains=t.CdnDomains;for(var s=0;s<i.CdnDomains.length;s++)i.CdnDomains[s]=e.StringUtils.validNetUrl(i.CdnDomains[s])}if(t.platId&&(i.platId=t.platId),t.gameRemotePaths&&(e.GameModuleUtils.gameLoadRemote=!0,e.GameModuleUtils.gameRemotePaths=t.gameRemotePaths),t.appId)i.appId=t.appId,1==e.Global.isH5&&(i.reLoginUrl="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+i.appId+"&redirect_uri=http%3a%2f%2fwx.zqgame.com%2faddons%2fzqgame%2fgamelogin.php&response_type=code&scope=snsapi_userinfo&state="+i.appId+"#wechat_redirect");else if(1==e.Global.isH5){var l=e.BrowersUtils.GetRequest("appid");e.StringUtils.stringIsNullOrEmpty(l)||(i.appId=e.BrowersUtils.GetRequest("appid")),i.reLoginUrl="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+i.appId+"&redirect_uri=http%3a%2f%2fwx.zqgame.com%2faddons%2fzqgame%2fgamelogin.php&response_type=code&scope=snsapi_userinfo&state="+i.appId+"#wechat_redirect"}t.compressType?e.CompressUtil.init(t.compressType,n,o):n&&n.call(o)}else e.Console.init(t),e.ScreenUtils&&e.ScreenUtils.init(r),e.PayMgr.Instance.isOpen=n,o&&(i.shareData=o),i.lobbyMode=a;e.ResUtils&&e.ResUtils.init(),e.ZQGameSdk&&(e.ZQGameSdk.getCallStatus(i.PhoneCallStatus,i),e.ZQGameSdk.hideVk())},e.cloneObj=t;var i=function(){function t(){}return t.PhoneCallStatus=function(t){"callDisconnected"==t.data.callState&&egret.Capabilities.supportVersion<"3.2.6"&&setTimeout(function(){e.ZQGameSdk&&e.ZQGameSdk.speakerActive()},4e3)},t.Event=function(t,n,i,o){return void 0===n&&(n=null),void 0===i&&(i=!1),void 0===o&&(o=!1),new e.ZqEvent(t,n)},t.dispatchEvent=function(t,n,i,o){void 0===n&&(n=null),void 0===i&&(i=!1),void 0===o&&(o=!1);var r=new e.ZqEvent(t,n,i,o);e.ZqListener.getInstance().dispatchEvent(r)},t.hasEventListener=function(t){return e.ZqListener.getInstance().hasEventListener(t)},t.addEventListener=function(t,n,i,o,r){void 0===o&&(o=!1),void 0===r&&(r=0),e.ZqListener.getInstance().addEventListener(t,n,i,o,r)},t.removeEventListener=function(t,n,i,o){void 0===o&&(o=!1),e.ZqListener.getInstance().removeEventListener(t,n,i,o)},t.Compress=function(e){if(!t.jsonCompress){for(var n=0;n<t.jsonCompress.msglist.length;n++)t.jsonCompress.msglist[n]==e.do&&(e.do=n+1);return e}return e},t.DeCompress=function(e){for(var n=0;n<t.jsonCompress.msglist.length;n++)if(n+1==e.do){e.do=t.jsonCompress.msglist[n];break}return e},t.DeCompressDefult=function(e){for(var n=0;n<t.jsonCompressDefault.msglist.length;n++)if(n+1==e.do){e.do=t.jsonCompressDefault.msglist[n];break}return e},Object.defineProperty(t,"lobbyMode",{get:function(){return this._lobbyMode},set:function(e){this._lobbyMode=e},enumerable:!0,configurable:!0}),t.getZoneInfo=function(t){if(null!=this.zoneList){for(var n=this.zoneList.length,i=0;i<n;i++)if(this.zoneList[i].gameid==t)return this.zoneList[i];return e.Console.error("找不到游戏区信息 gameId:"+t),null}},t.isTestServer=function(){return!e.Global.gameConfig||!e.Global.gameConfig.login_url||(e.Global.gameConfig.login_url.indexOf("14.17.104")>=0||e.Global.gameConfig.login_url.indexOf("server.login.bwgame")>=0)},Object.defineProperty(t,"resVersion",{get:function(){var t="";if(e.Global.isH5){var n=document.querySelector('meta[name="res-version"]');null!=n&&(t=n.getAttribute("content")),null!=t&&""!=t&&(t="_"+t)}return t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"thmVersion",{get:function(){var t="";if(e.Global.isH5){var n=document.querySelector('meta[name="thm-version"]');null!=n&&(t=n.getAttribute("content")),null!=t&&""!=t&&(t="_"+t)}return t},enumerable:!0,configurable:!0}),t.initPlatInfo=function(n,i,o){return null==t.platInfo&&(t.platInfo=new Pmd.PlatInfo,n&&null!=n?t.platInfo=n:t.isH5&&e.Utils.getLocalStorage("platStr",function(n){var i,o=n;i=e.StringUtils.stringIsNullOrEmpty(o)?e.BrowersUtils.GetRequests():e.BrowersUtils.GetRequests(o);for(var r in i)"debug"!=r&&(t.platInfo[r]="extData"==r?decodeURIComponent(i[r]):i[r]),"code"==r&&(t.platInfo.sign=i[r]),"appid"==r&&(t.platInfo.platappid=i[r]);var a=Number(t.platInfo.platid);a&&0!=a?t.platInfo.platid=a:t.platInfo.platappid&&!e.StringUtils.stringIsNullOrEmpty(t.platInfo.platappid)?t.platInfo.platid=68:t.platInfo.platid=a})),e.Global.isH5?t.defaultConfig&&e.PayMgr.Instance.initPayPlatById(Number(t.defaultConfig.pay_platid),i,o):null!=i&&(o?i.call(o,t.platInfo.platid):i(t.platInfo.platid)),t.platInfo},t.isWxGame=function(){if(egret.hasDefinition("wx")&&wx.env&&wx.env.USER_DATA_PATH){var e=wx.env.USER_DATA_PATH;if(e&&(e.indexOf("wxfile://")>=0||e.indexOf("http://")>=0))return!0}return!1},t.setPlatInfo=function(t,n,i){e.Utils.setLocalStorage(i+"|"+n+"|platToken",t)},t.setPlatToken=function(n,i,o){t.platId=i,t.gameId=o,n&&n.platinfo?n.platinfo.account?e.NetMgr.PlatUID=n.platinfo.account:e.NetMgr.PlatUID=n.platinfo.uid:e.NetMgr.PlatUID=e.NetMgr.UID+"",console.log("cache_platinfo:"+JSON.stringify(n)),e.Utils.setLocalStorage(o+"|"+i+"|platToken",encodeURIComponent(JSON.stringify(n)))},t.getPlatToken=function(n,i){return e.Utils.getLocalStorage(t.gameId+"|"+t.getPlatId()+"|platToken",function(o){var r;if(console.log("get_platinfo:"+o),o&&1==t.isCacheToken){try{o=decodeURIComponent(o)}catch(e){console.error("decode_error")}r=JSON.parse(o),e.NetMgr.UID=Number(r.uid),r.platinfo?r.platinfo.account?e.NetMgr.PlatUID=r.platinfo.account:e.NetMgr.PlatUID=r.platinfo.uid:e.NetMgr.PlatUID=r.uid,e.BrowersUtils.extData.inviter=e.NetMgr.UID.toString(),e.NetMgr.SID=r.sid,e.NetMgr.PlatToken=r.unigame_plat_login,e.NetMgr.PlatKey=r.unigame_plat_key,e.NetMgr.platTokenTimeOut=r.unigame_plat_login_life,null!=r.platinfo&&null!=t.platInfo&&(t.platInfo.platid=r.platinfo.platid,r.platinfo&&(r.platinfo.account?e.NetMgr.PlatUID=r.platinfo.account:e.NetMgr.PlatUID=r.platinfo.uid),e.NetMgr.PlatSession=r.platinfo.sign),r.GatewayUrl&&e.NetMgr.http&&(e.NetMgr.http.GatewayUrl=r.GatewayUrl)}n&&n.call(i,r)})},t.openAgent=function(t,n,i,o,r){var a=t+"?code="+n+"&platid="+i+"&gameid="+o;e.ZQGameSdk&&e.ZQGameSdk.openWeb(a,r)},t.getPlatId=function(){var n=0;return 0!=this.platId?this.platId:(t.isH5?null==t.platInfo?e.Utils.getLocalStorage("platStr",function(t){var i=t;n=e.StringUtils.stringIsNullOrEmpty(i)?e.BrowersUtils.GetRequest("platid")?parseInt(e.BrowersUtils.GetRequest("platid")):Pmd.PlatType.PlatType_Normal:Number(e.BrowersUtils.GetRequest("platid",i))}):t.platInfo.platid&&(n=t.platInfo.platid):n=t.platInfo?t.platInfo.platid:Pmd.PlatType.PlatType_Normal,n)},t.isActive=!0,t.debugLevel=0,t.version=161128235600,t.compressType=0,t.compressMin=0,t.msgTimeOutSec=0,t.designWidth=1280,t.designHeight=720,t.isRestarting=!1,t.PLAT_TOKEN_KEY="plat_token_key",t.gameId=0,t.lobbyGameId=0,t.is_sandbox=0,t.appId="wx0e52b1eba8f9fb14",t.thirdPlatDir="thirdPlatDir/",t.TextColors={white:16777215,milkWhite:16511407,grayWhite:13547170,yellow:16776960,lightYellow:16765813,orangeYellow:16750848,red:15799040,green:58624,blue:1742039,grayBlue:3101047,purple:15284466,pink:16724016,black:3026221,golden:16766720},t._lobbyMode=!1,t.isInGame=!1,t.reLoginUrl="",t.CdnDomains=["http://h5.publish.gamelaoyou.com/","http://h5.publish.bwgame.com.cn/"],t.payPlatId=0,t.bundleId="",t.zipmd5="",t.configmd5="",t.isCacheToken=!0,t.logUrl="http://server.login.bwgame.com.cn:8020/logger/clientlog",t.ipUrl="http://123.207.17.91:5999/http/remoteip/json",t.gmlevel=0,t.token="",t.platId=0,t.zoneId=0,t}();e.Global=i}(uniLib||(uniLib={})),void 0===global)var global=window;if(void 0===__global)var __global=global;var testh5=function(){return egret.Capabilities.runtimeType!=egret.RuntimeType.NATIVE};uniLib.Global.isH5=testh5();var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),uniLib;!function(e){var t=function(e){function t(t,n,i){void 0===i&&(i=!0);var o=e.call(this)||this;return o._target=t,o._time=n,i&&o.start(),o}return __extends(t,e),t.prototype.start=function(){this._currTime=egret.getTimer(),this._target.addEventListener(egret.Event.ENTER_FRAME,this.runDown,this)},t.prototype.runDown=function(e){this._target.alpha-=.045,this.checkOver()||this._target.alpha<=.6&&(this._target.removeEventListener(egret.Event.ENTER_FRAME,this.runDown,this),this._target.addEventListener(egret.Event.ENTER_FRAME,this.runUp,this))},t.prototype.runUp=function(e){this._target.alpha+=.045,this.checkOver()||this._target.alpha>=1&&(this._target.removeEventListener(egret.Event.ENTER_FRAME,this.runUp,this),this._target.addEventListener(egret.Event.ENTER_FRAME,this.runDown,this))},t.prototype.checkOver=function(){return egret.getTimer()-this._currTime>=this._time&&(this.destroy(),!0)},t.prototype.destroy=function(){this._target.alpha=1,this._target.removeEventListener(egret.Event.ENTER_FRAME,this.runDown,this),this._target.removeEventListener(egret.Event.ENTER_FRAME,this.runUp,this),this.dispatchEventWith(egret.Event.COMPLETE,!1,this._target),this._target=null},t}(egret.EventDispatcher);e.BitmapBlink=t}(uniLib||(uniLib={}));var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),uniLib;uniLib||(uniLib={}),function(e){function t(t,n,i,o,r,a,s){void 0===i&&(i=null),void 0===o&&(o=""),void 0===r&&(r=30),void 0===a&&(a=1),void 0===s&&(s="assets");var l=e.call(this)||this;return l.assets=RES.getRes("assets"),l.isPlayCartoon=!1,l.cartoonType=1,l.param={context:null,data:null},l.param.context=t,l.init(n,i,o,r,a,s),l}__extends(t,e),t.prototype.init=function(e,t,n,i,o,r){void 0===t&&(t=null),void 0===n&&(n=""),void 0===i&&(i=30),void 0===o&&(o=1),void 0===r&&(r="assets"),this.cartoonType=o,this.backFun=t,this.btnImg=new egret.Bitmap,"assets"!=r&&(this.assets=RES.getRes(r)),this.btnImg.texture=this.assets.getTexture(e),this.addChild(this.btnImg),""!=n&&(this.textField=new egret.TextField,this.addChild(this.textField),this.textField.size=i,this.textField.textAlign="center",this.textField.stroke=1,this.textField.strokeColor=0,this.textField.text=n,this.textField.width=this.btnImg.width,this.textField.x=this.btnImg.width/2-this.textField.width/2,this.textField.y=this.btnImg.height/2-this.textField.height/2),this.touchEnabled=!0,this.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onbuttonTouchTap,this)},t.prototype.onbuttonTouchTap=function(e){if(!this.isPlayCartoon){this.isPlayCartoon=!0;var t=function(){this.isPlayCartoon=!1};egret.Tween.get(this).to({scaleX:.5,scaleY:.5,x:this.x+this.btnImg.width/4,y:this.y+this.btnImg.height/4},100,egret.Ease.sineIn).call(function(){1==this.cartoonType?egret.Tween.get(this).to({scaleX:1,scaleY:1,x:this.x-this.btnImg.width/4,y:this.y-this.btnImg.height/4},500,egret.Ease.elasticOut).call(t,this):2==this.cartoonType?egret.Tween.get(this).to({scaleX:1,scaleY:1,x:this.x-this.btnImg.width/4,y:this.y-this.btnImg.height/4},500,egret.Ease.backOut).call(t,this):3==this.cartoonType&&egret.Tween.get(this).to({scaleX:1,scaleY:1,x:this.x-this.btnImg.width/4,y:this.y-this.btnImg.height/4},100).call(t,this)},this),egret.setTimeout(function(){null!=this.backFun&&this.backFun.apply(this.param.context,[this.param.data])},this,300)}},t.prototype.setBindData=function(e){this.param.data=e},t.prototype.getBindData=function(){return this.param.data},t.prototype.getBitmap=function(){return this.btnImg}}(egret.DisplayObjectContainer);var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),uniLib;!function(e){var t=function(t){function n(e,n,i,o,r,a,s,l,c,u,h){void 0===s&&(s=30),void 0===l&&(l=0),void 0===c&&(c=null),void 0===u&&(u=null),void 0===h&&(h=null);var d=t.call(this)||this;return d.isSelected=!1,d.liveSelected=!1,d.touchEnabled=!0,d.touchChildren=!1,d.init(e,n,i,o,r,a,s,l,c,u,h),d}return __extends(n,t),n.prototype.init=function(t,n,i,o,r,a,s,l,c,u,h){void 0===s&&(s=30),void 0===l&&(l=0),void 0===c&&(c=null),void 0===u&&(u=null),void 0===h&&(h=null),this._nomal_bg="string"==typeof t?e.DisplayUtils.createBitmapByName(t):t,c&&(this._nomal_bg.scale9Grid=c),o&&(this._nomal_bg.width=o),r&&(this._nomal_bg.height=r),this.addChild(this._nomal_bg),n&&(this._selected_bg=e.DisplayUtils.createBitmapByName(n),u&&(this._selected_bg.scale9Grid=u),o&&(this._selected_bg.width=o),r&&(this._selected_bg.height=r),this.addChild(this._selected_bg),this._selected_bg.visible=!1),i&&(this._disable_bg=e.DisplayUtils.createBitmapByName(i),h&&(this._disable_bg.scale9Grid=h),o&&(this._disable_bg.width=o),r&&(this._disable_bg.height=r),this.addChild(this._disable_bg),this._disable_bg.visible=!1),a&&(this._lableNomalColor=l,this._lable=e.DisplayUtils.createTextLabel(l,"center",a,s),this._lable.x=this.width-this._lable.width>>1,this._lable.y=this.height-this._lable.height>>1,this.addChild(this._lable)),this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onbuttonBegin,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.onbuttonEnd,this),this.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onbuttonEnd,this)},Object.defineProperty(n.prototype,"fontFamily",{set:function(e){this._lable.fontFamily=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"fontSelectedColor",{set:function(e){this._lableSelectedColor=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"select",{get:function(){return this.isSelected},set:function(e){1==e?this.selected():this.unselected()},enumerable:!0,configurable:!0}),n.prototype.selected=function(){this.isSelected=!0,this._selected_bg&&(this._selected_bg.visible=!0,this._nomal_bg.visible=!1),this._lableSelectedColor&&(this._lable.textColor=this._lableSelectedColor)},Object.defineProperty(n.prototype,"text",{set:function(t){null==this._lable&&(this._lableNomalColor=0,this._lable=e.DisplayUtils.createTextLabel(this._lableNomalColor,"center",t,30),this._lable.x=this.width-this._lable.width>>1,this._lable.y=this.height-this._lable.height>>1,this.addChild(this._lable)),this._lable.text=t},enumerable:!0,configurable:!0}),n.prototype.unselected=function(){this.isSelected=!1,this.liveSelected=!1,this._selected_bg&&(this._selected_bg.visible=!1,this._nomal_bg.visible=!0),this._lableSelectedColor&&(this._lable.textColor=this._lableNomalColor)},n.prototype.onbuttonBegin=function(e){0==this.isSelected&&this.selected()},n.prototype.onbuttonEnd=function(e){0==this.liveSelected&&this.unselected()},Object.defineProperty(n.prototype,"disable",{get:function(){return this._disable},set:function(e){this._disable=e,this._disable_bg&&(this._disable_bg.visible=e,1==this._disable?(this.touchEnabled=!1,this._nomal_bg.visible=!1,this._selected_bg.visible=!1):(this.touchEnabled=!0,this._nomal_bg.visible=!0))},enumerable:!0,configurable:!0}),n.prototype.setBottomLabel=function(e,t,n,i,o,r){var a=new egret.TextField;-1!=o&&(a.width=o),a.fontFamily="微软雅黑",a.textColor=t,a.textAlign=egret.HorizontalAlign.CENTER,a.text=e,a.size=n,a.x=i,a.y=this._nomal_bg.y+this._nomal_bg.height+r,this.addChild(a)},Object.defineProperty(n.prototype,"toggle",{set:function(e){e?(this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onbuttonBegin,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.onbuttonEnd,this),this.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onbuttonEnd,this)):(this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onbuttonBegin,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.onbuttonEnd,this),this.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onbuttonEnd,this))},enumerable:!0,configurable:!0}),n.prototype.destroy=function(){this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onbuttonBegin,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.onbuttonEnd,this),this.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onbuttonEnd,this)},n}(egret.DisplayObjectContainer);e.CommonButton=t}(uniLib||(uniLib={}));var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),uniLib;!function(e){var t=function(t){function n(n){var i=t.call(this)||this;i._isShow=!0,i.isInStage=!1,i._rect=n,i.ChatHeight=0,i.message=[],i.downPoint=new egret.Point,i.isFriend=i.isMove=!1,i.ChatHeight=i._rect.height,i._touchBg=new egret.Sprite,i._touchBg.graphics.clear(),i._touchBg.graphics.beginFill(0,.7),i._touchBg.graphics.drawRect(0,0,i._rect.width,i._rect.height),i._touchBg.graphics.endFill(),i._touchBg.width=i._rect.width,i._touchBg.height=i._rect.height,i._touchBg.touchEnabled=!1,i.addChild(i._touchBg);var o=(e.Global.screenWidth-10)/3,r=e.DisplayUtils.createShape(1,o,30,16777215);r.cacheAsBitmap=!0,i.close_btn=new e.CommonButton(r),i.close_btn.text="关闭",i.close_btn.y=e.Global.screenHeight-30,i.addChild(i.close_btn);var a=e.DisplayUtils.createShape(1,o,30,16777215);a.cacheAsBitmap=!0,i.clear_btn=new e.CommonButton(a),i.clear_btn.x=e.Global.screenWidth/3,i.clear_btn.text="清空",i.clear_btn.y=e.Global.screenHeight-30,i.addChild(i.clear_btn);var s=e.DisplayUtils.createShape(1,o,30,16777215);return s.cacheAsBitmap=!0,i.ignore_btn=new e.CommonButton(s),i.ignore_btn.x=e.Global.screenWidth/3*2,i.ignore_btn.text="不再提示",i.ignore_btn.y=e.Global.screenHeight-30,i.addChild(i.ignore_btn),i.add(),i}return __extends(n,t),Object.defineProperty(n,"Instance",{get:function(){return null==this._self&&(this._self=new n(new egret.Rectangle(0,0,e.Global.screenWidth,e.Global.screenHeight))),this._self},enumerable:!0,configurable:!0}),n.prototype.resize=function(){this._rect=new egret.Rectangle(0,0,e.Global.screenWidth,e.Global.screenHeight),this.ChatHeight=this._rect.height,this._touchBg.graphics.clear(),this._touchBg.graphics.beginFill(0,.7),this._touchBg.graphics.drawRect(0,0,this._rect.width,this._rect.height),this._touchBg.graphics.endFill(),this._touchBg.width=this._rect.width,this._touchBg.height=this._rect.height,this._touchBg.touchEnabled=!1;e.Global.screenWidth;this.close_btn.text="关闭",this.close_btn.y=e.Global.screenHeight-30,this.addChild(this.close_btn),this.clear_btn.x=e.Global.screenWidth/3,this.clear_btn.text="清空",this.clear_btn.y=e.Global.screenHeight-30,this.addChild(this.clear_btn),this.ignore_btn.x=e.Global.screenWidth/3*2,this.ignore_btn.text="不再提示",this.ignore_btn.y=e.Global.screenHeight-30,this.addChild(this.ignore_btn)},n.prototype.add=function(){this.close_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchClose,this),this.ignore_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHideNever,this),this.clear_btn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchClear,this),this.x=this._rect.x,this.y=this._rect.y,this.messageSprite=new egret.Sprite,this.messageSprite.touchChildren=!1,this.messageSprite.touchEnabled=!1,this.addChild(this.messageSprite),this.messageSprite.mask=this._rect},n.prototype.onTouchClose=function(e){this.hide()},n.prototype.onTouchHideNever=function(e){this.hide(),this._isShow=!1},n.prototype.onTouchClear=function(e){this.clear(),this.add(),this.hide()},n.prototype.check=function(){1==this._isShow&&this.isInStage&&this.message&&this.message.length>0&&this.show()},n.prototype.clear=function(){this.message=[],this.removeChild(this.messageSprite),this.close_btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchClose,this),this.ignore_btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHideNever,this),this.clear_btn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchClear,this)},n.prototype.show=function(){this.message&&this.message.length>0&&(egret.MainContext.instance.stage.addChildAt(this,egret.MainContext.instance.stage.numChildren),this.isInStage=!0)},n.prototype.hide=function(){e.DisplayUtils.removeFromParent(this),this.isInStage=!1},n.prototype.addLog=function(t){if(0!=e.Global.debugLevel&&0!=this._isShow){var n=new egret.TextField;n.multiline=!0,n.width=e.Global.screenWidth,n.y=this.messageSprite.height,n.textColor=16711680,n.text=t,this.messageSprite.addChild(n),this.message.push(n),this.messageSprite.height>this.ChatHeight-20&&!this.isMove&&(this.messageSprite.y=-(this.messageSprite.height-this.ChatHeight)-40,this.messageSprite.mask.y=this.messageSprite.height-this.ChatHeight+45),this._isShow&&this.show()}},n.prototype.addTxt=function(e,t,n){e.addChild(t),t.x=5,t.y=(t.height+8)*n},n.prototype.onMessageSpriteDown=function(e){this.isMove=!0,this.downPoint=new egret.Point(e.stageX,e.stageY)},n.prototype.onTouchMove=function(e){var t=e.stageY-this.downPoint.y;(e.stageY>this.downPoint.y||e.stageY<this.downPoint.y)&&(this.messageSprite.y+=t,this.messageSprite.mask.y-=t),this.downPoint=new egret.Point(e.stageX,e.stageY)},n.prototype.onChatTouchUp=function(e){15<=this.messageSprite.y||this.messageSprite.height<this.ChatHeight?(egret.Tween.get(this.messageSprite).to({y:0},100),egret.Tween.get(this.messageSprite.mask).to({y:0},100)):(this.messageSprite.y<-(this.messageSprite.height-this.ChatHeight-20)&&(egret.Tween.get(this.messageSprite).to({y:-(this.messageSprite.height-this.ChatHeight)-40},100),egret.Tween.get(this.messageSprite.mask).to({y:this.messageSprite.height-this.ChatHeight+45},100)),this.isMove=!1)},n._self=null,n}(egret.Sprite);e.DebugView=t}(uniLib||(uniLib={}));var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),uniLib;!function(e){var t=function(t){function n(e,n){var i=t.call(this)||this;return i.guideHand=e,i.circle=n,i.addListener(),i}return __extends(n,t),n.prototype.initStatus=function(e){this.createBaseScene(),1==e?this.createBetScene():this.createSlipScene()},n.prototype.onShowSlipGuide=function(){this.disposeScene(),this.createSlipScene()},n.prototype.onShowBetGuide=function(){this.disposeScene(),this.createBetScene()},n.prototype.createBaseScene=function(){this.cirPanel||(this.cirPanel=new egret.Sprite,this.addChild(this.cirPanel)),this.handPanel||(this.handPanel=new egret.Sprite,this.addChild(this.handPanel))},n.prototype.createBetScene=function(){this.tips||(this.tips=this.createTextField("点击这里下注",35,108,58623,30),this.handPanel.addChild(this.tips)),this.betGuideEffect()},n.prototype.createSlipScene=function(){0!=e.UserInfo.slipStatus?1==e.UserInfo.slipStatus?this.leftSlipGuideEffect():2==e.UserInfo.slipStatus&&this.rightSlipGuideEffect():this.dispose()},n.prototype.addListener=function(){e.ZqListener.getInstance().addEventListener(e.ZqEvent.HIDE_SLIP_GAME_GUIDE,this.onHideSlipHandler,this)},n.prototype.removeListener=function(){e.ZqListener.getInstance().removeEventListener(e.ZqEvent.HIDE_SLIP_GAME_GUIDE,this.onHideSlipHandler,this)},n.prototype.onHideSlipHandler=function(){this.disposeScene(),this.createSlipScene()},n.prototype.createGuideHand=function(e,t,n,i){void 0===n&&(n=0),void 0===i&&(i=.8),this.guideHand&&(this.guideHand.scaleX=i,this.guideHand.scaleY=i,this.guideHand.x=e,this.guideHand.y=t,this.guideHand.rotation=n,this.handPanel.addChild(this.guideHand))},n.prototype.addCircleEffect=function(e,t){this.circle&&(this.circle.alpha=1,this.circle.scaleX=.2,this.circle.scaleY=.2,this.circle.x=e,this.circle.y=t,this.cirPanel.addChild(this.circle))},n.prototype.betGuideEffect=function(){this.createGuideHand(80,155),this.addCircleEffect(92,258),egret.Tween.get(this.guideHand,{loop:!0}).wait(200).to({y:125},400,egret.Ease.sineIn).wait(500).to({y:155},300,egret.Ease.sineIn),egret.Tween.get(this.circle,{loop:!0}).to({scaleX:1,scaleY:1,x:45,y:222,alpha:0},1400,egret.Ease.sineIn)},n.prototype.leftSlipGuideEffect=function(){this.tips||(this.tips=this.createTextField("向右滑动屏幕",35,880,58623,30),this.handPanel.addChild(this.tips)),this.createGuideHand(100,870,180,1),this.addCircleEffect(55,710),egret.Tween.get(this.guideHand,{loop:!0}).wait(200).to({x:270},1200,egret.Ease.sineIn).wait(300).to({x:100},100,egret.Ease.sineIn),egret.Tween.get(this.circle,{loop:!0}).wait(200).to({scaleX:1,scaleY:1,x:225,y:650,alpha:0},1400,egret.Ease.sineIn).wait(200)},n.prototype.rightSlipGuideEffect=function(){this.tips||(this.tips=this.createTextField("向左滑动屏幕",350,880,58623,30),this.handPanel.addChild(this.tips)),this.createGuideHand(550,870,180,1),this.addCircleEffect(500,710),egret.Tween.get(this.guideHand,{loop:!0}).wait(200).to({x:380},1200,egret.Ease.sineIn).wait(300).to({x:550},100,egret.Ease.sineIn),egret.Tween.get(this.circle,{loop:!0}).wait(200).to({scaleX:1,scaleY:1,x:240,y:650,alpha:0},1400,egret.Ease.sineIn).wait(200)},n.prototype.createTextField=function(e,t,n,i,o){var r=new egret.TextField;return r.x=t,r.y=n,r.fontFamily="微软雅黑",r.textColor=i,r.text=e,r.size=o,r.lineSpacing=2,r},n.prototype.disposeScene=function(){this.guideHand&&egret.Tween.removeTweens(this.guideHand),this.circle&&egret.Tween.removeTweens(this.circle),this.tips&&e.DisplayUtils.removeFromParent(this.tips),this.tips=null,this.handPanel&&e.DisplayUtils.removeAllChildren(this.handPanel),this.cirPanel&&e.DisplayUtils.removeAllChildren(this.cirPanel)},n.prototype.dispose=function(){this.removeListener(),this.disposeScene(),this.handPanel&&(e.DisplayUtils.removeAllChildren(this.handPanel),e.DisplayUtils.removeFromParent(this.handPanel)),this.handPanel=null,this.cirPanel&&(e.DisplayUtils.removeAllChildren(this.cirPanel),e.DisplayUtils.removeFromParent(this.cirPanel)),this.cirPanel=null,this.circle=null,this.guideHand=null},n}(egret.Sprite);e.GameGuide=t}(uniLib||(uniLib={}));var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),uniLib;!function(e){var t=function(t){function n(e,i,o,r,a,s,l,c){void 0===i&&(i="温馨提示"),void 0===o&&(o="确定");var u=t.call(this)||this;return u.skinName=n.exml,u.title=i,a?(s&&(u._cacelCall=s),u.cacelButton.visible=!0):(u.cacelButton.visible=!1,u.okButton.horizontalCenter=0),r&&(u._okCall=r),l&&(u._callObj=l),u.okButton.label=o,u.contentText.text=e,u.addEventListener(egret.TouchEvent.TOUCH_TAP,u.onTouch,u),u}return __extends(n,t),n.setDefaultSkin=function(e){n.exml=e},n.prototype.onTouch=function(t){switch(t.target){case this.okButton:e.PopUpMgr.removePopUp(this),this._okCall&&this._okCall.call(this._callObj);break;case this.cacelButton:e.PopUpMgr.removePopUp(this),this._cacelCall&&this._cacelCall.call(this._callObj)}},n.exml='<e:Skin class="Test" width="400" height="300" xmlns:e="http://ns.egret.com/eui">\n    <e:Rect left="0" right="0" top="0" bottom="0" fillColor="0xffffff" />\n    <e:Group id="moveArea" top="0" right="0" left="0" height="45">\n        <e:Image width="100%" height="100%"></e:Image>\n        <e:Label id="titleDisplay" textColor="0x000000" horizontalCenter="0" verticalCenter="0" size="20"></e:Label>\n    </e:Group>\n    <e:Button id="okButton" label="确定" bottom="9" horizontalCenter="0" width="106" height="49"></e:Button>\n    <e:Button id="cacelButton" label="取消" bottom="9" horizontalCenter="0" width="106" height="49"></e:Button>\n    <e:Label id="contentText" textColor="0x000000" text="标签" y="65" width="357" textAlign="center" height="165"\n             horizontalCenter="0" />\n</e:Skin>',n}(eui.Panel);e.MsgBox=t}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){function e(e,t,n){void 0===t&&(t=5),void 0===n&&(n=10),this._prexKey="",this._minCount=0,this._maxCount=0,this.m_FishFactory={},this._prexKey=e,this._minCount=t,this._maxCount=n}return e.prototype.free=function(e){var t=this.createArray(this.key(!1)),n=t.indexOf(e);if(-1!=n){t.splice(n,1);var i=this.createArray(this.key(!0));i.push(e);for(var o=i.length>this._maxCount?i.length-this._minCount:0,r=0;r<o;)i.shift(),null,r++}},e.prototype.setCount=function(e,t){void 0===t&&(t=0),this._minCount=e,this._maxCount=t},e.prototype.active=function(e){var t,n=this.createArray(this.key(!0));return t=0==n.length?new e:n.shift(),this.createArray(this.key(!1)).push(t),t},e.prototype.isNew=function(){return 0==this.createArray(this.key(!0)).length},e.prototype.empty=function(){null!=this.m_FishFactory[this.key(!0)]&&(this.m_FishFactory[this.key(!0)]=null,delete this.m_FishFactory[this.key(!0)])},e.prototype.createArray=function(e){var t=this.m_FishFactory[e];return null==t&&(t=new Array,this.m_FishFactory[e]=t),t},e.prototype.key=function(e){return this._prexKey+"&"+(e?"free":"atv")},e.prototype.getKey=function(){return this._prexKey},e}();e.ObjectFactory=t}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){function t(e,t,n){void 0===t&&(t=5),void 0===n&&(n=10),this._mainKey="",this._min=0,this._max=0,this.vector=new Array,this.subKey=new Array,this._clazz=e,this._mainKey=this._clazz,this._min=t,this._max=n}return t.prototype.free=function(e,t){this.getFactory(t).free(e)},t.prototype.active=function(e){return this.getFactory(e).active(this._clazz)},t.prototype.isNew=function(e){return this.getFactory(e).isNew()},t.prototype.setCount=function(e,t,n){void 0===n&&(n=0),this.getFactory(e).setCount(t,n)},t.prototype.empty=function(e){this.getFactory(e).empty()},t.prototype.setAllCount=function(e,t){void 0===t&&(t=0);for(var n=this.vector.length,i=0;i<n;i++)this.vector[i].setCount(e,t)},t.prototype.getFactory=function(t){for(var n,i=this.vector.length,o=0;o<i;o++)if((n=this.vector[o]).getKey()==this.key(t))return n;return n=new e.ObjectFactory(this.key(t),this._min,this._max),this.vector.push(n),n},t.prototype.key=function(e){return this._mainKey+"_"+e},t.prototype.createFactory=function(t,n,i){return void 0===i&&(i=0),new e.ObjectFactory(this.key(t),n,i)},t}();e.ObjectFactoryGroup=t}(uniLib||(uniLib={}));var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),uniLib;!function(e){var t=function(t){function n(n){var i=t.call(this)||this;return i.pages=[],i.selectIndex=-1,i.pageWidth=640,i.touchEnabled=!1,i.addEventListener(egret.TouchEvent.TOUCH_BEGIN,i.onTouchBegin,i),i.addEventListener(egret.TouchEvent.TOUCH_MOVE,i.onTouchMove,i),i.addEventListener(egret.TouchEvent.TOUCH_END,i.onTouchEnd,i),i.mask=n,i.mask&&(i.pageWidth=i.mask.width),i.btnGroup=new e.StatusBtnGroup,i.btnGroup.x=300,i.btnGroup.y=n.height-20,i.addChild(i.btnGroup),i}return __extends(n,t),n.prototype.addPage=function(e){this.pages.push(e),this.childNum=this.pages.length,this.btnGroup.setChildNum(this.childNum),this.btnGroup.x=this.pageWidth/2-this.btnGroup.width/2,this.childNum>1?this.touchEnabled=!0:this.touchEnabled=!1},n.prototype.reset=function(){for(var e=0;e<this.childNum;e++)this.removePage(this.pages[e]);this.removePage(this.currentPage),this.removePage(this.leftPage),this.removePage(this.rightPage),this.leftPage=null,this.rightPage=null,this.currentPage=null,this.pages.length=0,this.childNum=this.pages.length,this.btnGroup.setChildNum(0)},n.prototype.onTouchBegin=function(e){this.touchEnabled&&(this.startTouchX=e.stageX,this.currentPageX=this.currentPage.x)},n.prototype.onTouchMove=function(e){if(this.touchEnabled){var t=e.stageX-this.startTouchX;Math.abs(t)>10&&(this.touchChildren=!1,e.stopPropagation(),e.stopImmediatePropagation()),this.currentPage&&(this.currentPage.x=this.currentPageX+t,this.currentPage.x>0?(this.leftPage||this.selectIndex>0&&(this.leftPage=this.pages[this.selectIndex-1]),this.leftPage&&(this.leftPage.parent||this.addChild(this.leftPage),this.leftPage.x=this.currentPage.x-this.pageWidth)):this.currentPage.x<0&&(this.rightPage||this.selectIndex<this.childNum-1&&(this.rightPage=this.pages[this.selectIndex+1]),this.rightPage&&(this.rightPage.parent||this.addChild(this.rightPage),this.rightPage.x=this.currentPage.x+this.pageWidth)))}},n.prototype.onTouchEnd=function(e){if(this.touchEnabled){this.touchChildren=!0;var t=e.stageX-this.startTouchX;Math.abs(t)>20?(e.stopPropagation(),e.stopImmediatePropagation(),t>20?this.leftPage?(egret.Tween.get(this.currentPage).to({x:this.pageWidth},100),egret.Tween.get(this.leftPage).to({x:0},100).call(this.showLeftPageEnd,this)):(this.removePage(this.leftPage),this.removePage(this.rightPage),this.leftPage=null,this.rightPage=null,egret.Tween.get(this.currentPage).to({x:0},100)):this.rightPage?(egret.Tween.get(this.currentPage).to({x:-this.pageWidth},100),egret.Tween.get(this.rightPage).to({x:0},100).call(this.showRightPageEnd,this)):(this.removePage(this.leftPage),this.removePage(this.rightPage),this.leftPage=null,this.rightPage=null,egret.Tween.get(this.currentPage).to({x:0},100))):(this.leftPage&&egret.Tween.get(this.leftPage).to({x:-this.pageWidth},100),this.rightPage&&egret.Tween.get(this.rightPage).to({x:this.pageWidth},100),egret.Tween.get(this.currentPage).to({x:0},100).call(this.showCurrentPageEnd,this))}},n.prototype.showCurrentPageEnd=function(){this.leftPage=null,this.rightPage=null},n.prototype.showLeftPageEnd=function(){this.removePage(this.currentPage),this.removePage(this.rightPage),this.currentPage=this.leftPage,this.selectIndex=this.selectIndex-1,this.leftPage=null,this.rightPage=null,this.updateBtnGroupSelected()},n.prototype.showRightPageEnd=function(){this.removePage(this.currentPage),this.removePage(this.leftPage),this.currentPage=this.rightPage,this.selectIndex=this.selectIndex+1,this.leftPage=null,this.rightPage=null,this.updateBtnGroupSelected()},n.prototype.setSelectIndex=function(e){this.selectIndex=e,this.removePage(this.currentPage),this.removePage(this.leftPage),this.removePage(this.rightPage),this.leftPage=null,this.rightPage=null,this.currentPage=this.pages[this.selectIndex],this.currentPage.x=0,this.addChild(this.currentPage),this.updateBtnGroupSelected()},n.prototype.getSelectIndex=function(){return this.selectIndex},n.prototype.updateBtnGroupSelected=function(){this.btnGroup.setSelectIndex(this.selectIndex)},n.prototype.setChildNum=function(e){this.childNum!=e&&(this.childNum=e)},n.prototype.getChildNum=function(){return this.childNum},n.prototype.removePage=function(e){e&&this.contains(e)&&this.removeChild(e)},n}(egret.Sprite);e.PageGroup=t}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){function t(e,t,n,i){this.curDir="center",this.left=t,this.right=n,this.center=e,this.stage=i,this.addListener()}return t.prototype.addListener=function(){this.stage.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this)},t.prototype.removeListener=function(){this.stage.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this)},t.prototype.initStatus=function(){"center"!=this.curDir&&("left"==this.curDir?(this.disposeLeftBar(),this.onTrunCenter()):"right"==this.curDir&&(this.disposeRightBar(),this.onTrunCenter()))},t.prototype.showLeftBar=function(){"left"!=this.curDir&&this.onTrunRight()},t.prototype.onTouchBegin=function(e){this.center.touchEnabled&&(this.startTouchPoint=new egret.Point(e.stageX,e.stageY))},t.prototype.onTouchMove=function(e){var t=e.stageX-this.startTouchPoint.x,n=e.stageY-this.startTouchPoint.y;Math.abs(t)>=20&&Math.abs(t)>=Math.abs(n)&&(this.canShowBar=!0,this.center.touchChildren=!1)},t.prototype.onTouchEnd=function(e){if(this.canShowBar&&(this.canShowBar=!1,this.center.touchEnabled)){this.center.touchChildren=!0;var t=e.stageX-this.startTouchPoint.x;Math.abs(t)>20?t>20?"center"==this.curDir?this.onTrunRight():"right"==this.curDir&&(this.disposeRightBar(),this.onTrunCenter()):"center"==this.curDir?this.onTrunLeft():"left"==this.curDir&&(this.disposeLeftBar(),this.onTrunCenter()):(this.disposeLeftBar(),this.disposeRightBar(),this.onTrunCenter())}},t.prototype.onTrunRight=function(){egret.Tween.get(this.center).to({x:this.left.width},500).call(this.disposeTween,this,[this.center]),1==e.UserInfo.slipStatus&&(e.UserInfo.slipStatus=2),this.curDir="left",egret.Tween.get(this.left).to({x:0},500).call(this.disposeTween,this,[this.left]),e.ZqListener.getInstance().dispatchEvent(new e.ZqEvent(e.ZqEvent.HIDE_SLIP_GAME_GUIDE))},t.prototype.onTrunLeft=function(){egret.Tween.get(this.center).to({x:-this.right.width},500).call(this.disposeTween,this,[this.center]),e.UserInfo.slipStatus=0,this.curDir="right",egret.Tween.get(this.right).to({x:e.Global.screenWidth-this.right.width},500).call(this.disposeTween,this,[this.right]),e.ZqListener.getInstance().dispatchEvent(new e.ZqEvent(e.ZqEvent.HIDE_SLIP_GAME_GUIDE))},t.prototype.onTrunCenter=function(){this.curDir="center",egret.Tween.get(this.center).to({x:0},500).call(this.disposeTween,this,[this.center])},t.prototype.disposeLeftBar=function(){this.left&&egret.Tween.get(this.left).to({x:-this.left.width},500).call(this.disposeTween,this,[this.left])},t.prototype.disposeRightBar=function(){this.right&&egret.Tween.get(this.right).to({x:e.Global.screenWidth},500).call(this.disposeTween,this,[this.right])},t.prototype.disposeTween=function(e){e&&egret.Tween.removeTweens(e)},t.prototype.dispose=function(){this.removeListener()},t}();e.SlideBar=t}(uniLib||(uniLib={}));var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),uniLib;!function(e){var t=function(e){function t(t,n){var i=e.call(this)||this;return i.index=-1,i.normalTexture=t,i.selectedTexture=n,i.normalBitmap=new egret.Bitmap(i.normalTexture),i.selectedBitmap=new egret.Bitmap(i.selectedTexture),i.addChild(i.normalBitmap),i}return __extends(t,e),Object.defineProperty(t.prototype,"selected",{get:function(){return this._selected},set:function(e){this._selected!=e&&(this._selected=e,this._selected?(this.addChild(this.selectedBitmap),this.contains(this.normalBitmap)&&this.removeChild(this.normalBitmap)):(this.addChild(this.normalBitmap),this.contains(this.selectedBitmap)&&this.removeChild(this.selectedBitmap)))},enumerable:!0,configurable:!0}),t}(egret.Sprite);e.StatusBtn=t}(uniLib||(uniLib={}));var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),uniLib;!function(e){var t=function(t){function n(e,n,i){void 0===i&&(i=10);var o=t.call(this)||this;return o.selectIndex=0,o.btns=[],o.gap=10,o.normalTexture=e,o.selectedTexture=n,o.gap=i,o.init(),o}return __extends(n,t),n.prototype.setSelectIndex=function(e){this.selectIndex=e,this.selectIndex>=this.btns.length&&(this.selectIndex=this.btns.length-1),this.currentSelecedBtn&&(this.currentSelecedBtn.selected=!1),this.currentSelecedBtn=this.btns[this.selectIndex],this.currentSelecedBtn.selected=!0},n.prototype.getSelectIndex=function(){return this.selectIndex},n.prototype.setChildNum=function(e){if(this.childNum!=e){if(this.childNum=e,this.childNum<=this.btns.length)this.btns.length=this.childNum;else for(var t=this.btns.length;t<this.childNum;t++)this.btns.push(this.getNewBtn());this.resetChildren()}},n.prototype.getChildNum=function(){return this.childNum},n.prototype.resetChildren=function(){if(this.removeChildren(),!(this.btns.length<2)){for(var e,t=0;t<this.btns.length;t++)(e=this.btns[t]).selected=!1,e.x=t*(e.width+this.gap),this.addChild(e);this.setSelectIndex(this.selectIndex)}},n.prototype.getNewBtn=function(){return new e.StatusBtn(this.normalTexture,this.selectedTexture)},n.prototype.init=function(){var e,t;this.normalTexture||((e=new egret.Shape).graphics.beginFill(11119017),e.graphics.drawCircle(5,5,5),e.graphics.endFill(),(t=new egret.RenderTexture).drawToTexture(e),this.normalTexture=t),this.selectedTexture||((e=new egret.Shape).graphics.beginFill(7172728),e.graphics.drawCircle(5,5,5),e.graphics.endFill(),(t=new egret.RenderTexture).drawToTexture(e),this.selectedTexture=t)},n}(egret.Sprite);e.StatusBtnGroup=t}(uniLib||(uniLib={}));var CommonConsts=function(){function e(){}return e.LOBBY_LASTGAME="lobby_lastGame",e.UNI_LAST_PLAT_INFO="uni_last_plat_info",e}(),uniLib;!function(e){var t=function(){function e(){this._funcMap={}}return e.prototype.dispatch=function(e,t){void 0===t&&(t=null);var n=this._funcMap[e],i=0;if(null!=n){for(;i<n.length;)n[i]&&n[i][0].call(n[i][1],t),i++;return!0}},e.prototype.addListener=function(e,t,n){this._funcMap[e]?-1==this.getNoticeIndex(e,t,n)&&this._funcMap[e].push([t,n]):(this._funcMap[e]=[],this._funcMap[e].push([t,n]))},e.prototype.hasListener=function(e){return!!(this._funcMap[e]&&this._funcMap[e].length>0)},e.prototype.removeListener=function(e,t,n){if(this._funcMap[e]){var i=this.getNoticeIndex(e,t,n);-1!=i&&this._funcMap[e].splice(i,1)}},e.prototype.getNoticeIndex=function(e,t,n){var i=this._funcMap[e];for(var o in i)if(i[o][0]==t&&i[o][1]==n)return Number(o);return-1},e}();e.Dispatcher=t}(uniLib||(uniLib={}));var uniLib;!function(e){!function(e){e[e.CHIPS=0]="CHIPS",e[e.FREECHIPS=1]="FREECHIPS",e[e.PLAT_POINT=2]="PLAT_POINT",e[e.BANK_CHIPS=3]="BANK_CHIPS",e[e.NICKNAME=4]="NICKNAME",e[e.GIFTCOUPON=5]="GIFTCOUPON",e[e.HEADURL=6]="HEADURL",e[e.GOLDCHIPS=7]="GOLDCHIPS",e[e.FANGKA=8]="FANGKA",e[e.DIAMOND=9]="DIAMOND"}(e.UserInfoEnum||(e.UserInfoEnum={}))}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){function t(e,t,n,i){void 0===n&&(n=!1),void 0===i&&(i=!1),this.CLASS_NAME="ZqEvent",this.type=e,this._obj=t}return t.prototype.clone=function(e){return new t(this.type,e||this._obj)},t.prototype.toString=function(){e.Console.log(this.CLASS_NAME,"type","bubbles","cancelable")},Object.defineProperty(t.prototype,"param",{get:function(){return this._obj},enumerable:!0,configurable:!0}),t.CHAT_ROOM="chat_room",t.CHAT_PRIVATE="chat_private",t.CHAT_SYSTEM="chat_system",t.CHAT_IMPORTANT="chat_important",t.EVENT_L2G_NOTICE="event_l2g_notice",t.CHAT_GM="chat_gm",t.GM_BEFORE="gm_before",t.GM_END="gm_end",t.CHAT_HORN="chat_horn",t.USER_INFO="user_info",t.CHAT_HUNDRED="chat_hundred",t.CHAT_COMMONGAME="chat_commongame",t.CHAT_LOBBY="chat_lobby",t.UPDATE_USER_INFO="update_user_info",t.CHECK_VERSION_UPDATE="check_version_update",t.COMMON_MODEL="common_model",t.EVENT_L2G="event_l2g",t.EVENT_G2L="event_g2l",t.EVENT_ACTIVE_SOCKET_CACHE_OK="on_active_socket_cache_ok",t.EVENT_SERVER_SHUTDOWN="on_server_shutdown",t.EVENT_SERVER_DEBUG_LEVEL="on_server_debug_level",t.GM_INFO="gm_info",t.KICK_OUT="kick_out",t.ON_RECONNEC="on_reconnect",t.ON_SERVER_SHUTDOWN="on_server_shutdown",t.ON_GETZONEINFO="on_get_zoneinfo",t.ON_RESTART="on_restart",t.NET_ERRER="net_error",t.SHARE="share",t.TASK_EVENT="task_event",t.ONLINE_NUM="online_num",t.HIDE_SLIP_GAME_GUIDE="hide_slip_game_guide",t.NATIVE_TO_EGERET="native_to_egret",t}();e.ZqEvent=t}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){function t(){this.CLASS_NAME="ZqListener",this.isInit=!1,this.isInit,null==this._dispatcher&&(this._dispatcher=new e.Dispatcher,this.isInit=!0)}return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},t.prototype.addEventListener=function(e,t,n,i,o){void 0===i&&(i=!1),void 0===o&&(o=0),this._dispatcher.addListener(e,t,n)},t.prototype.hasEventListener=function(e){return this._dispatcher.hasListener(e)},t.prototype.removeEventListener=function(e,t,n,i){void 0===i&&(i=!1),this._dispatcher.removeListener(e,t,n)},t.prototype.dispatchEvent=function(e){return this._dispatcher.dispatch(e.type,e)},t.prototype.toString=function(){return this._dispatcher.toString()},t}();e.ZqListener=t}(uniLib||(uniLib={}));var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),uniLib;!function(e){var t=function(){return function(){}}();e.RoomInfo=t;var n=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.showBack=!0,t.defaultOrientation="auto",t.isLandscape=!0,t.preloadUIAutoHide=!0,t.candestroyGrps=[],t.hasTestChips=!1,t}return __extends(t,e),t}(e.Reflect);e.IGameConfig=n}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){return function(){}}();e.IUserInfo=t}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){function t(){this._models={}}return Object.defineProperty(t,"Instance",{get:function(){return null==this._self&&(this._self=new t),this._self},enumerable:!0,configurable:!0}),t.prototype.addEvents=function(){},t.prototype.registerCommonModel=function(t,n,i){null==this._models[t]?(this._models[t]=n,this._models["loadName_"+t]=i):e.Console.warn("registerCommonModel:公用模块只能注册一次")},t.prototype.openCommonModel=function(t,n,i,o,r){function a(){o?(s=new l._models[t](i),o.call(r,s)):0==n?(s=new l._models[t](i),e.PopUpMgr.addPopUp(s,null,!0,!0)):e.UIMgr.instance.showUI(l._models[t],i)}void 0===n&&(n=0);var s;if(this._models[t]){var l=this;return this._models["loadName_"+t]?e.ResLoadMgr.instance.load(this._models["loadName_"+t],a,function(){e.Console.error("加载资源组失败:loadName_"+t)},null,e.UIMgr.instance.tipsLoadUI,!0,!0):a(),s}},t.prototype.showCommonUI=function(t,n){if(this._models[t])return e.UIMgr.instance.showUI(this._models[t],n)},t.prototype.getCommonUI=function(e,t){if(this._models[e])return new this._models[e](t)},t._self=null,t}();e.CommonModelMgr=t}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){function t(){}return t.reQuestZoneList=function(t,n,i,o,r){if(this.http)this.http.requestZoneList(t,i,r);else{var a=new e.HttpClient;a.init(n,t),a.requestZoneList(t,i,r)}},t.init=function(t,n,i,o,r,a,s){if(this.LoginUrl=t,n&&(e.Global.gameId=n),n&&e.Global.zoneList)for(var l=e.Global.zoneList.length-1;l>=0;l--)n==e.Global.zoneList[l].gameid&&(i=e.Global.zoneList[l].zoneid);0==e.Global.lobbyGameId&&(e.Global.lobbyGameId=n),null==this.http||this.LoginUrl!=this.http.LoginUrl?(this.http=new e.HttpClient,this.http.init(t,n,i),s&&(this.http.GatewayUrl=s),o&&null!=o&&this.http.h5platLogin(null,o,r,a)):o&&o.call(a,e.Global.platInfo)},t.getPlatToken=function(n,i,o,r,a){e.Utils.getLocalStorage(r+"|"+o+"|platToken",function(o){var r;Pmd.PlatInfo,o&&(r=JSON.parse(o),t.UID=Number(r.uid),r.account&&(t.PlatUID=r.account?r.account:r.uid),e.BrowersUtils.extData.inviter=t.UID.toString(),t.SID=r.sid,r.GatewayUrl&&t.http&&(t.http.GatewayUrl=r.GatewayUrl),t.PlatToken=r.unigame_plat_login,t.PlatKey=r.unigame_plat_key,t.platTokenTimeOut=r.unigame_plat_login_life,null!=r.platinfo&&(e.Global.platInfo?e.Global.platInfo.platid=r.platinfo.platid:e.Global.platId=r.platinfo.platid,t.PlatUID=r.platinfo.account?r.platinfo.account:r.platinfo.uid,t.PlatSession=r.platinfo.sign)),n.call(i,r)})},t.h5platLogin=function(t,n,i,o){this.http?this.http.h5platLogin(t,n,i,o):e.Console.warn("请先使用NetMgr.init初始化网络模块!")},t.initSocket=function(n,i,o,r,a,s,l,c,u){void 0===l&&(l=!1),void 0===c&&(c=!1);var h=this;if(null==this.ws){if(o.loopback)return h.ws=new e.JsonSocket(null,h.http.GameID,0,!1),h.ws.login(n,null,o),void n.call(o);var d=function(r){if(null==r)return e.Console.warn("initSocket:网络请求失败,请检查网络"),i&&i.call(o),!0;e.Global.logintempid=r.logintempid,!e.Global.LobbyPlatInfo||u&&""!=u||(e.Global.LobbyPlatInfo.GatewayUrlWs=r.jsongatewayurl),h.ws=new e.JsonSocket(r.jsongatewayurl,h.http.GameID,h.http.ZoneID,l);var a;return a=new Pmd.UserLoginTokenLoginUserPmd_C,a.gameid=h.http.GameID,a.zoneid=h.http.ZoneID,a.accountid=r.accountid,a.logintempid=r.logintempid,e.Global.zipmd5&&(a.zipmd5=e.Global.zipmd5),e.Global.configmd5&&(a.configmd5=e.Global.configmd5),e.Global.bundleId&&(a.bundlename=e.Global.bundleId),a.timestamp=Math.floor(Date.now()/1e3),c&&(a.lastseq=4294967295),null==t.PlatKey&&(t.PlatKey=""),a.tokenmd5=""+e.StringUtils.MD5(String(a.accountid)+String(a.logintempid)+String(a.timestamp)+t.PlatKey),a.compress=e.CompressUtil.compressStr[e.Global.compressType],e.Global.compressMin>0&&(a.compressmin=e.Global.compressMin),a.version=20160805,a.url=r.jsongatewayurl,h.ws.loginData=a,h.ws.login(n,i,o),!0};if(e.Global.LobbyPlatInfo&&(e.Global.LobbyPlatInfo.GatewayUrlWs||u&&""!=u)){var g=new Pmd.WebSocketForwardUserPmd_S;g.accountid=Number(t.UID),g.logintempid=e.Global.logintempid?e.Global.logintempid:0,g.jsongatewayurl=u&&""!=u?u:e.Global.LobbyPlatInfo.GatewayUrlWs,d(g)}else{var p=new Pmd.WebSocketForwardUserPmd_C;p.accountid=Number(t.UID),this.httpSend(p,function(e){return d(e)})}}},t.getThirdPlatId=function(){return t.PlatUID},t.getIp=function(t,n,i){var o=new e.HttpRequest(t,null,n);i||(i=e.Global.ipUrl),o.open(i),o.send()},t.post=function(t,n,i){var o=new e.HttpRequest(n,null,i);o.open(t),o.send()},t.logout=function(){e.Utils.clearLocalStorage(e.Global.gameId+"|"+e.Global.getPlatId()+"|platToken"),this.UID=0,this.ZoneUID="",this.SID="",this.PlatUID="",this.PlatSession="",this.PlatToken="",this.PlatKey="",this.platTokenTimeOut=0,this.http=null,this.closeSocket(),t.UID=0,t.ZoneUID="",t.SID="",t.PlatUID="",t.PlatSession="",t.PlatToken="",t.PlatKey="",t.platTokenTimeOut=0,t.http=null,t.closeSocket(),e.Global.platInfo=null,e.Global.LobbyPlatInfo=null,e.SceneMgr&&e.Global.LoginScene&&e.SceneMgr.instance.changeScene(e.Global.LoginScene)},t.closeSocket=function(e){void 0===e&&(e=!1),this.ws&&(this.ws.close(e),this.ws=null)},t.httpSend=function(t,n,i){this.http?this.http.send(t,n,i):e.Console.warn("httpSend:网络不可用,请检查网络")},t.tcpSend=function(t){if(this.ws){var n=t.GetType?t.GetType():t.cmd_name||t.do;"Pmd.UserLoginTokenLoginUserPmd_C"!=n&&"Pmd.TickReturnNullUserPmd_CS"!=n&&"Pmd.PrivateChatUserPmd_CS"!=n&&"Pmd.GMCommandListChatUserPmd_S"!=n&&"Pmd.UserLoginReconnectLoginUserPmd_C"!=n&&"Pmd.SetTickTimeoutNullUserPmd_CS"!=n&&"Pmd.CommonChatUserPmd_CS"!=n&&"Pmd.GMCommandChatUserPmd_C"!=n?this.ws.send(t):this.ws.sendPlat(t)}else e.Utils.restart("网络不可用,点击确定重试","确定"),e.Console.warn("tcpSend:网络不可用,请检查网络:"+JSON.stringify(t))},t.sendEcho=function(e){void 0===e&&(e=8),this.ws&&this.ws.setMsgTimeout(e,"")&&this.ws.sendEcho()},t.setTickSec=function(e){void 0===e&&(e=30),this.ws&&this.ws.setTickSec(e)},t.sendChatVo=function(e,t){void 0===t&&(t=Pmd.CommonChatUserPmd_CS.ChatPos.ChatPos_Normal);var n;switch(t){case Pmd.CommonChatUserPmd_CS.ChatPos.ChatPos_Normal:case Pmd.CommonChatUserPmd_CS.ChatPos.ChatPos_None:(n=new Pmd.CommonChatUserPmd_CS).info=e.msg,n.chatpos=t,n.name=name;break;case Pmd.CommonChatUserPmd_CS.ChatPos.ChatPos_Private:(n=new Pmd.PrivateChatUserPmd_CS).info=e.msg,n.id=e.userId,n.name=e.userName;break;default:(n=new Pmd.CommonChatUserPmd_CS).info=e.msg,n.chatpos=t}this.tcpSend(n)},t.sendChat=function(n,i,o){void 0===o&&(o=Pmd.CommonChatUserPmd_CS.ChatPos.ChatPos_Normal);try{var r=0;if(n.match(/^[//]/)){var a=n.substring(2,n.length),s=(a.split(" "),new Pmd.GMCommandChatUserPmd_C);s.method=s.method=a.substring(0,a.indexOf(" ")>-1?a.indexOf(" "):a.length),s.params=e.StringUtils.sTrim(a.substring(a.indexOf(" "),a.length));var l;switch(s.method){case"peer":var c=e.StringUtils.getVariables(s.params);e.UserInfo&&(e.UserInfo.uid=Number(c.id))}if(l=e.getDefinitionByName("uniLib.GM_Before"))try{l(s,function(){t.tcpSend(s)})}catch(e){}else t.tcpSend(s)}else{n.match(/^\[.+\]:/)&&(r=Number(n.substring(0,n.indexOf(":")).slice(1,-1)),n=n.substring(n.indexOf(":")+1,n.length));var u;0!=r?((u=new Pmd.PrivateChatUserPmd_CS).info=n,u.id=r,u.name=i):((u=new Pmd.CommonChatUserPmd_CS).info=n,u.chatpos=o,u.name=i),this.tcpSend(u)}}catch(t){e.Console.warn("ws网络不可用,请检查网络")}},t.GetPhoneCode=function(e,t,n,i,o){var r=new Pmd.MobileRegistRequestRandCodeLoginUserPmd_C,a=r.GetType?r.GetType():r.cmd_name||r.do;r.mobilenum=e,r.gameid=this.http.GameID;var s=o||this.http.LoginUrl;this.http.sendTo(s,a,r,n)},t.CodeLogin=function(e,t,n,i,o,r,a,s,l){void 0===o&&(o=0);var c=this,u=new Pmd.MobileRegistRequestCreateAccountLoginUserPmd_C;u.mobilenum=e,u.randcode=t,u.password=n,u.optype=o,i&&(u.parent=i),this.http.initCallBack(r,a,s);var h=l||this.http.LoginUrl;this.http.sendTo(h,u.GetType(),u,function(e){return c.http.cachePhoneLoginInfo(e,Pmd.PlatType.PlatType_MOBILE),c.http.h5platLogin(),!0})},t.emailLogin=function(t,n,i,o,r,a,s,l){var c=this,u=new Pmd.EmailRegistRequestCreateAccountLoginUserPmd_C;u.email=t,u.parent=i,u.password=n,u.mobilenum=o,this.http.initCallBack(r,a,s),e.Utils.clearLocalStorage(this.http.GameID+"|128|platToken");var h=l||this.http.LoginUrl;this.http.sendTo(h,u.GetType(),u,function(e){return e?(c.http.cachePhoneLoginInfo(e,128),c.http.h5platLogin(),!0):a(e)})},t.LoginByTel=function(t,n,i,o,r,a){var s=this,l=new Pmd.UserRequestPlatTokenByPasswordLoginUserPmd_C;l.platid=129,l.gameid=this.http.GameID,l.account=t,l.password=n,this.http.initCallBack(i,o,r),e.Utils.clearLocalStorage(this.http.GameID+"|129|platToken");var c=a||this.http.LoginUrl;this.http.sendTo(c,l.GetType(),l,function(e){if(e)return s.http.cachePhoneLoginInfo(e,l.platid),s.http.h5platLogin(),!0})},t.LoginByEmail=function(t,n,i,o,r,a){var s=this,l=new Pmd.UserRequestPlatTokenByPasswordLoginUserPmd_C;l.platid=128,l.gameid=this.http.GameID,l.account=t,l.password=n,this.http.initCallBack(i,o,r),e.Utils.clearLocalStorage(this.http.GameID+"|128|platToken");var c=a||this.http.LoginUrl;this.http.sendTo(c,l.GetType(),l,function(e){return s.http.cachePhoneLoginInfo(e,l.platid),s.http.h5platLogin(),!0})},t.clearGateWay=function(){e.Global.LobbyPlatInfo.GatewayUrl&&delete e.Global.LobbyPlatInfo.GatewayUrl,e.Global.LobbyPlatInfo.GatewayUrlWs&&delete e.Global.LobbyPlatInfo.GatewayUrlWs;var t=e.Utils.getLocalStorage(e.Global.lobbyGameId+"|"+e.Global.getPlatId()+"|platToken");t&&(t.GatewayUrlWs&&delete t.GatewayUrlWs,t.GatewayUrl&&delete t.GatewayUrl,e.Global.setPlatToken(t,e.Global.getPlatId(),e.Global.lobbyGameId))},t.LoginByAccount=function(t,n,i,o,r,a){var s=this,l=new Pmd.UserRequestPlatTokenByPasswordLoginUserPmd_C;l.platid=Pmd.PlatType.PlatType_MOBILE,e.StringUtils.checkPhone(t)?l.platid=Pmd.PlatType.PlatType_MOBILE:l.platid=128,l.gameid=this.http.GameID,l.account=t,l.password=n,e.Utils.clearLocalStorage(this.http.GameID+"|128|platToken"),this.http.initCallBack(i,o,r);var c=a||this.http.LoginUrl;this.http.sendTo(c,l.GetType(),l,function(e){if(e)return s.http.cachePhoneLoginInfo(e,l.platid),s.http.h5platLogin(),!0;o&&o.call(r)})},t.bindAccount=function(e,t,n,i,o,r){var a=new Pmd.EmailRegistRequestCreateAccountLoginUserPmd_C;a.email=e,a.password=t,a.isbind=!0,a.uid=this.UID;var s=r||this.http.LoginUrl;this.http.sendTo(s,a.GetType(),a,function(e){return 0==e.retcode?n.call(o):i.call(o),!0})},t.accountLogin=function(t,n,i,o,r,a){var s=this,l=new Pmd.UserRequestPlatTokenByPasswordLoginUserPmd_C;l.platid=128,l.gameid=this.http.GameID,l.account=t,l.password=n,e.Utils.clearLocalStorage(this.http.GameID+"|128|platToken"),this.http.initCallBack(i,o,r);var c=a||this.http.LoginUrl;this.http.sendTo(c,l.GetType(),l,function(e){return s.http.cachePhoneLoginInfo(e,l.platid),s.http.h5platLogin(),!0})},t.checkMsgTimeout=function(e){return null==this.ws||(new Date).getTime()-this.ws.lastRecvTime>=e},t.setMsgTimeout=function(e,t){return null!=this.ws&&this.ws.setMsgTimeout(e,t)},t.getToken=function(t){var n,i=Number(e.Utils.getLocalStorage(CommonConsts.UNI_LAST_PLAT_INFO));if(!t&&e.Global.gameConfig&&(t=e.Global.gameConfig.gameid),i>=0){var o=e.Utils.getCachedPlatInfo(null,t,i);o&&(n=JSON.parse(o),e.Global.initPlatInfo(n.platinfo))}return n},t}();e.NetMgr=t;var n=function(){return function(){this.userId="",this.type=0,this.userName=""}}();e.ChatMsgItemVo=n}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){function t(){}return Object.defineProperty(t,"Instance",{get:function(){return null==this._self&&(this._self=new t),this._self},enumerable:!0,configurable:!0}),t.prototype.initPayPlatById=function(t,n,i){var o=this;if(0!=this.isOpen&&(t&&null!=t||(t=e.Global.platInfo.platid),e.Global.isH5))switch(t){case Pmd.PlatType.PlatType_AiBei:case Pmd.PlatType.PlatType_LeZhuan:e.BrowersUtils.LoadJS("aibei",e.BrowersUtils.getPlatLibDir()+"aibei_v1.1.0.js"),null!=n&&(i?n.call(i,t):n(t));break;case Pmd.PlatType.PlatType_Play68:e.BrowersUtils.LoadJS("play68",e.BrowersUtils.getPlatLibDir()+"play68_sdk.js",n,i);break;case Pmd.PlatType.PlatType_WeChat:e.BrowersUtils.LoadJS("weixin",e.BrowersUtils.getPlatLibDir()+"weixinapi.min.js",function(){o.initWechat(n,i)});break;case Pmd.PlatType.PlatType_WEIYOU:e.Global.appId="wxa569805aa50c7fa7",e.BrowersUtils.LoadJS("weixin",e.BrowersUtils.getPlatLibDir()+"weixinapi.min.js",function(){o.initWechat(n,i)});break;case Pmd.PlatType.PlatType_RONGQIANG:e.Global.appId="wx463fb53ff525bbaa",e.BrowersUtils.LoadJS("weixin",e.BrowersUtils.getPlatLibDir()+"weixinapi.min.js",function(){o.initWechat(n,i)});break;case Pmd.PlatType.PlatType_DAPAI:e.BrowersUtils.LoadJS("dapai",e.BrowersUtils.getPlatLibDir()+"dapaisdk.js",n,i);break;case Pmd.PlatType.PlatType_AoXin:e.BrowersUtils.LoadJS("aoxin","http://libs.baidu.com/jquery/1.10.2/jquery.min.js",function(){e.BrowersUtils.LoadJS("aoxin","http://res.wx.qq.com/open/js/jweixin-1.0.0.js",function(){e.BrowersUtils.LoadJS("aoxin",e.BrowersUtils.getPlatLibDir()+"aoxinShare.js",n,i)})});break;case Pmd.PlatType.PlatType_HUOSU:e.BrowersUtils.LoadJS("huosu","http://yun.huosu.com/src/api/js/huosuh5sdk.js",function(){i?n.call(i,t):n(t)},i);break;case Pmd.PlatType.PlatType_Egret:e.BrowersUtils.LoadJS("nest",e.BrowersUtils.getPlatLibDir()+"nest.min.js",function(){i?n.call(i,t):n(t)},i);break;case Pmd.PlatType.PlatType_9g:window.parent.postMessage({action:"share",data:{},imgurl:e.Global.shareData.imgUrl,title:e.Global.shareData.title,content:e.Global.shareData.desc},"*");break;default:null!=n&&(i?n.call(i,t):n(t))}},t.prototype.initWechat=function(t,n){if(null!=e.Global.shareData){var i="http://weixin.zqgame.com/GetJsSdkTicket?appid="+e.Global.appId+"&url="+encodeURIComponent(location.href.split("#")[0]),o=e.BrowersUtils.getXHR();o.open("GET",i,!0),o.setRequestHeader("Content-Type","multipart/form-data"),o.responseType="text",o.send();var r=this;o.onreadystatechange=function(){4==o.readyState&&(o.status>=400||0==o.status||o.responseText.length>0&&r.initWechatInfo(o.responseText,t,n))}}},t.prototype.initWechatInfo=function(t,n,i){try{this.signPackage=JSON.parse(t),this.getWeiXinConfig(),wx.ready(function(){e.BrowersUtils.setShareInfo()})}catch(e){console.error("获取微信权限失败")}n&&n.call(i)},t.prototype.getWeiXinConfig=function(){var e={};e.debug=!1,e.appId=this.signPackage.appid,e.timestamp=this.signPackage.timestamp,e.nonceStr=this.signPackage.nonceStr,e.signature=this.signPackage.signature,e.jsApiList=["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","chooseWXPay","startRecord","stopRecord","onVoiceRecordEnd","playVoice","pauseVoice","stopVoice","onVoicePlayEnd","uploadVoice","downloadVoice","chooseImage","previewImage","uploadImage","downloadImage","translateVoice","getNetworkType","openLocation","getLocation","hideOptionMenu","showOptionMenu","hideMenuItems","showMenuItems","hideAllNonBaseMenuItem","showAllNonBaseMenuItem","closeWindow","scanQRCode","chooseWXPay","openProductSpecificView","addCard","chooseCard","openCard"],wx.config(e)},t.prototype.pay=function(t,n,i){if(1==e.Global.isH5)switch(Number(t.payplatid)){case void 0:break;case Pmd.PlatType.PlatType_LeZhuan:case Pmd.PlatType.PlatType_AiBei:case Pmd.PlatType.PlatType_Normal:this.payAiBei(t.platOrder,e.BrowersUtils.getLocationUrl(),t.sign);break;case Pmd.PlatType.PlatType_Play68:Play68.onpaysucc=n,Play68.pay(t.gameOrder,t.goodName,t.price/100,t.count);break;case Pmd.PlatType.PlatType_HuoWu:case Pmd.PlatType.PlatType_XingZhiZhu:case Pmd.PlatType.PlatType_HuoWu:case Pmd.PlatType.PlatType_CaiGuo:case Pmd.PlatType.PlatType_XueChi:case Pmd.PlatType.PlatType_AoXin:e.BrowersUtils.redirectUrl(t.payUrl);break;case Pmd.PlatType.PlatType_9g:var o={action:"pay",orderid:t.gameOrder,money:t.price,product:t.goodName,spid:"aaayxzx",sign:t.sign,uid:e.Global.platInfo.uid,token:e.NetMgr.PlatSession};window&&window.parent&&window.parent.postMessage(o,"*");break;case Pmd.PlatType.PlatType_1758:e.BrowersUtils.parentRedirectUrl(e.BrowersUtils.getLocationUrl());break;case Pmd.PlatType.PlatType_WeChat:case Pmd.PlatType.PlatType_WEIYOU:case Pmd.PlatType.PlatType_RONGQIANG:var r=t.sign.split("|");this.payWechat(r[0],r[1],r[2],r[3]);break;case Pmd.PlatType.PlatType_DAPAI:yunyou.redirecturl=e.BrowersUtils.getLocationUrl(),yunyou.order_token=t.sign,yunyou.pay();break;case Pmd.PlatType.PlatType_HUOSU:var a={goodsId:t.goodId,goodsNum:t.count,out_orderno:t.gameOrder};HuoSuSdk.pay(a,n,"返回游戏")}else e.ZQGameSdk&&e.ZQGameSdk.pay(t,n,i)},t.prototype.payByPmd=function(n,i,o,r){var a=this,s=n;if(this._lastOrder_S=s,1==e.Global.isH5)switch(Number(s.payplatid)){case void 0:break;case Pmd.PlatType.PlatType_LeZhuan:case Pmd.PlatType.PlatType_AiBei:case Pmd.PlatType.PlatType_Normal:this.payAiBei(s.platorder,e.BrowersUtils.getLocationUrl(),s.sign);break;case Pmd.PlatType.PlatType_Play68:Play68.onpaysucc=i,Play68.pay(s.gameorder,s.gamemoney.toString(),s.ordermoney/100,s.goodnum);break;case Pmd.PlatType.PlatType_HuoWu:case Pmd.PlatType.PlatType_XingZhiZhu:case Pmd.PlatType.PlatType_HuoWu:case Pmd.PlatType.PlatType_CaiGuo:case Pmd.PlatType.PlatType_XueChi:case Pmd.PlatType.PlatType_AoXin:e.BrowersUtils.redirectUrl(s.redirecturl);break;case Pmd.PlatType.PlatType_9g:var l={action:"pay",orderid:s.gameorder,money:s.ordermoney,product:s.gamemoney,spid:"aaayxzx",sign:s.sign,uid:e.Global.platInfo.uid,token:r.PlatSession};window&&window.parent&&window.parent.postMessage(l,"*");break;case Pmd.PlatType.PlatType_1758:e.BrowersUtils.parentRedirectUrl(e.BrowersUtils.getLocationUrl());break;case Pmd.PlatType.PlatType_WeChat:case Pmd.PlatType.PlatType_WEIYOU:case Pmd.PlatType.PlatType_RONGQIANG:var c=s.sign.split("|");this.payWechat(c[0],c[1],c[2],c[3]);break;case Pmd.PlatType.PlatType_DAPAI:yunyou.redirecturl=e.BrowersUtils.getLocationUrl(),yunyou.order_token=s.sign,yunyou.pay();break;case Pmd.PlatType.PlatType_HUOSU:var u={goodsId:s.goodid,goodsNum:s.goodnum,out_orderno:s.gameorder};HuoSuSdk.pay(u,i,"返回游戏")}else s.roleid=r.getThirdPlatId(),s.goodname=t.Instance.lastRechargeInfo.goodname,s.gooddesc=t.Instance.lastRechargeInfo.gooddesc,e.ZQGameSdk&&e.ZQGameSdk.payByPmd(s,function(e){if(0==e.code){var t=new Pmd.RechargeQueryRequestIOSSdkPmd_C;t.gameorder=a._lastOrder_S.gameorder,t.originalmoney=a._lastOrder_S.ordermoney,t.roleid=r.UID,t.ordermoney=a._lastOrder_S.ordermoney,t.token=a._lastOrder_S.sign,e.data&&e.data.paytoken&&(t.token=e.data.paytoken),t.extdata=a._lastOrder_S.data.extdata,t.payplatid=a._lastOrder_S.payplatid,r.tcpSend(t)}i&&i(e,o)},o)},t.prototype.payCallBack=function(e){},t.prototype.weChatPay=function(t,n,i){if(1==e.Global.isH5)switch(Number(e.Global.platInfo.platid)){case void 0:break;case Pmd.PlatType.PlatType_LeZhuan:case Pmd.PlatType.PlatType_Normal:this.payAiBei(t.platorder,e.BrowersUtils.getLocationUrl(),t.sign);break;case Pmd.PlatType.PlatType_Play68:Play68.onpaysucc=n,Play68.pay(t.gameorder,"",t.ordermoney/100,t.goodnum);break;case Pmd.PlatType.PlatType_HuoWu:case Pmd.PlatType.PlatType_XingZhiZhu:case Pmd.PlatType.PlatType_HuoWu:case Pmd.PlatType.PlatType_CaiGuo:case Pmd.PlatType.PlatType_XueChi:case Pmd.PlatType.PlatType_AoXin:e.BrowersUtils.redirectUrl(t.redirecturl);break;case Pmd.PlatType.PlatType_9g:var o={action:"pay",orderid:t.gameorder,money:t.ordermoney,product:t.goodnum,spid:"aaayxzx",sign:t.sign,uid:e.Global.platInfo.uid,token:e.NetMgr.PlatSession};window&&window.parent&&window.parent.postMessage(o,"*");break;case Pmd.PlatType.PlatType_1758:e.BrowersUtils.parentRedirectUrl(e.BrowersUtils.getLocationUrl());break;case Pmd.PlatType.PlatType_WeChat:case Pmd.PlatType.PlatType_WEIYOU:case Pmd.PlatType.PlatType_RONGQIANG:var r=t.sign.split("|");this.payWechat(r[0],r[1],r[2],r[3]);break;case Pmd.PlatType.PlatType_DAPAI:yunyou.redirecturl=e.BrowersUtils.getLocationUrl(),yunyou.order_token=t.sign,yunyou.pay();break;case Pmd.PlatType.PlatType_HUOSU:var a={goodsId:t.goodid,goodsNum:t.goodnum,out_orderno:t.gameorder};HuoSuSdk.pay(a,n,"返回游戏")}},t.prototype.payAiBei=function(e,t,n,i,o){if(null==this.aibeiPay&&(this.aibeiPay=new AiBeiPay,window.aibeiBack=o),void 0!=e){var r={};r.transId=e,r.baseZIndex=100,r.closeTxt="返回游戏",r.redirecturl=t,r.sign=n,this.aibeiPay.clickAibei(r)}},t.prototype.payWechat=function(t,n,i,o){var r=function(){window.WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:e.Global.appId,timeStamp:o,nonceStr:n,package:"prepay_id="+i,signType:"MD5",paySign:t},function(e){e.err_msg})};void 0===window.WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",r,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",r),document.attachEvent("onWeixinJSBridgeReady",r)):r()},t._self=null,t}();e.PayMgr=t}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){function t(){}return t.init=function(t){t?this._container=t:e.SceneMgr.instance.currentScene.topLayer?this._container=e.SceneMgr.instance.currentScene.topLayer:this._container=e.SceneMgr.instance.currentScene},t.addPopUp=function(t,i,o,r,a,s,l,c,u){void 0===i&&(i=null),void 0===o&&(o=!1),void 0===a&&(a=0),void 0===s&&(s=0),void 0===l&&(l=0),void 0===c&&(c=0);var h,d=e.Global.screenWidth,g=e.Global.screenHeight;1==this.outSideHide?h=!0:"boolean"==typeof a&&(h=a);t.prototype&&(t=new t(u));var p=t.scaleX,f=t.scaleY,m=egret.getQualifiedClassName(t);null==this.popupDic[m]&&(this.popupDic[m]=[]),this.popupDic[m].push(t),null!=this._container&&null!=this._container.parent||(e.SceneMgr.instance.currentScene?e.SceneMgr.instance.currentScene.topLayer?this._container=e.SceneMgr.instance.currentScene.topLayer:this._container=e.SceneMgr.instance.currentScene:this._container=egret.MainContext.instance.stage),e.SceneMgr.instance.currentScene&&1!=e.SceneMgr.instance.currentScene.scaleX&&(d=e.Global.designHeight/e.SceneMgr.instance.currentScene.scaleX,g=e.Global.designWidth/e.SceneMgr.instance.currentScene.scaleY);var _=null==i?this._container:i;if(!_.contains(t)){var b;if(b="number"==typeof r?r:this.maskAlpha,r){var y=egret.getQualifiedClassName(t)+t.hashCode;this.darkSpriteDic[y]=e.DisplayUtils.createMask(b,d,g),_.contains(this.darkSpriteDic[y])||_.addChild(this.darkSpriteDic[y]),this.darkSpriteDic[y].touchEnabled=!0,1==h&&this.darkSpriteDic[y].once(egret.TouchEvent.TOUCH_TAP,function(n){n.stopPropagation(),n.stopImmediatePropagation();n.target;e.PopUpMgr.removePopUp(t)},this),egret.Tween.get(this.darkSpriteDic[y]).to({alpha:1},150),this.darkSpriteDic[y].visible=!0}"number"==typeof a?a>0?_.addChildAt(t,a):_.addChild(t):null==a&&_.addChild(t),this.curPanel=t,0!=l&&_?(t.x=d/2-l/2,t.y=g/2-c/2):0==t.anchorOffsetX&&(l=t.width,c=t.height);var v=d/2-l/2,S=g/2-c/2;switch(s){case n.NOMAL:o&&(t.x=v,t.y=S);break;case n.CENTER:o&&(t.x=v,t.y=S),t.alpha=0,t.scaleX=.5,t.scaleY=.5,t.x=t.x+l/4,t.y=t.y+c/4,egret.Tween.get(t).to({alpha:1,scaleX:p,scaleY:f,x:t.x-l/4,y:t.y-c/4},300,egret.Ease.backOut);break;case n.CENTER_S:t.alpha=0,t.scaleX=.5,t.scaleY=.5,t.x=t.x+l/4,t.y=t.y+c/4,egret.Tween.get(t).to({alpha:1,scaleX:p,scaleY:f,x:t.x-l/4,y:t.y-c/4},600,egret.Ease.elasticOut);break;case n.LEFT:o?(t.x=-l,egret.Tween.get(t).to({x:v},500,egret.Ease.cubicOut)):(t.x=-l,egret.Tween.get(t).to({x:0},500,egret.Ease.cubicOut));break;case n.RIGHT:o?(t.x=l,egret.Tween.get(t).to({x:v},500,egret.Ease.cubicOut)):(t.x=l,egret.Tween.get(t).to({x:0},500,egret.Ease.cubicOut));break;case n.TOP:o?(t.y=-c,egret.Tween.get(t).to({y:S},500,egret.Ease.cubicOut)):(t.y=-c,egret.Tween.get(t).to({y:0},500,egret.Ease.cubicOut));break;case n.BOTTOM:o?(t.y=_.stage.stageHeight,egret.Tween.get(t).to({y:S},500,egret.Ease.cubicOut)):(t.y=c,egret.Tween.get(t).to({y:0},500,egret.Ease.cubicOut))}return t}},t.removePopUp=function(e,t){void 0===t&&(t=0);var n=!0;n=!e.prototype;var i=egret.getQualifiedClassName(e);if(this.popupDic[i])if(n)for(o=0;o<this.popupDic[i].length;o++)this.popupDic[i][o]==e&&(this.removePanel(this.popupDic[i][o],t),this.popupDic[i].splice(o,1));else for(var o=0;o<this.popupDic[i].length;o++)this.removePanel(this.popupDic[i][o],t),this.popupDic[i].shift()},t.clearPopus=function(){if(this.popupDic)for(var e in this.popupDic)for(var t=0;t<this.popupDic[e].length;t++)this.removePanel(this.popupDic[e][t]),this.popupDic[e].shift()},t.removePanel=function(t,i){void 0===i&&(i=0);var o=egret.getQualifiedClassName(t)+t.hashCode;this.darkSpriteDic[o]&&egret.Tween.get(this.darkSpriteDic[o]).to({alpha:0},100).call(function(){this.darkSpriteDic[o]&&this.darkSpriteDic[o].parent&&this.darkSpriteDic[o].parent.removeChild(this.darkSpriteDic[o]),this.darkSpriteDic[o]=null,delete this.darkSpriteDic[o]},this);var r=600;switch(i){case n.NOMAL:r=0;break;case n.CENTER:egret.Tween.get(t).to({alpha:0,scaleX:0,scaleY:0,x:t.x+t.width/2,y:t.y+t.height/2},300);break;case n.CENTER_S:egret.Tween.get(t).to({alpha:0,scaleX:0,scaleY:0,x:t.x+t.width/2,y:t.y+t.height/2},600,egret.Ease.elasticOut);break;case n.LEFT:egret.Tween.get(t).to({x:-t.width},600,egret.Ease.cubicOut);break;case n.RIGHT:egret.Tween.get(t).to({x:t.width},600,egret.Ease.cubicOut);break;case n.TOP:egret.Tween.get(t).to({y:-t.height},600,egret.Ease.cubicOut);break;case n.BOTTOM:egret.Tween.get(t).to({y:t.height},600,egret.Ease.cubicOut)}egret.setTimeout(function(){t.destroy&&t.destroy(),e.DisplayUtils.removeFromParent(t)},this,r)},t.hasPopup=function(t){var n=egret.getQualifiedClassName(t);if(!("object"!=typeof t||!t.prototype)){if(!t.stage)return!1;for(i=0;i<this.popupDic[n].length;i++)if(this.popupDic[n][i]==t)return!0}else if(this.popupDic[n]&&this.popupDic[n].length>0)for(var i=0;i<this.popupDic[n].length;i++){if(this.popupDic[n][i].stage)return!0;e.DisplayUtils.removeFromParent(this.popupDic[n][i])}return!1},t.resize=function(){},t.darkSpriteDic={},t.popupDic=new Object,t.maskAlpha=.7,t.outSideHide=!1,t}();e.PopUpMgr=t;var n;!function(e){e[e.NOMAL=0]="NOMAL",e[e.CENTER=1]="CENTER",e[e.CENTER_S=2]="CENTER_S",e[e.LEFT=3]="LEFT",e[e.RIGHT=4]="RIGHT",e[e.TOP=5]="TOP",e[e.BOTTOM=6]="BOTTOM"}(n=e.PopUpEffect||(e.PopUpEffect={}))}(uniLib||(uniLib={}));var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),uniLib;!function(e){var t=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e._autoHide=!0,e._curLoadingId=0,e._isCacelLoading=!1,e.curLoadingGrp="",e._currentLoadIndex=0,e}return __extends(n,t),Object.defineProperty(n,"instance",{get:function(){return null==this._self&&(this._self=new n,this._self.initLoadingUI()),this._self},enumerable:!0,configurable:!0}),n.prototype.initLoadingUI=function(){this._loadingMap={},this._thisObj={},this._loadSucc={},this._loadError={}},n.prototype.loadGrps=function(t,i,o,r,a,s,l,c){if(void 0===s&&(s=!0),void 0===l&&(l=!0),""==this.curLoadingGrp){var u="merge_"+t.toString();return RES.createGroup(u,t,!0),n.instance.load(u,function(t){e.ResUtils.removeGroup(u),i&&i.call(r,t)},function(t){e.ResUtils.removeGroup(u),o&&o.call(r,t)},r,a,s,l,c),u}e.Console.warn("资源组 ["+this.curLoadingGrp+"] 正在加载,请等待后台加载完成")},n.prototype.loadReses=function(t,i,o,r,a,s,l,c){if(void 0===s&&(s=!0),void 0===l&&(l=!0),""==this.curLoadingGrp){var u="merge_"+t.toString();return RES.createGroup(u,t,!0),n.instance.load(u,function(t){e.ResUtils.removeGroup(u),i&&i.call(r,t)},o,r,a,s,l,c),u}e.Console.warn("资源组 ["+this.curLoadingGrp+"] 正在加载,请等待后台加载完成")},n.prototype.cacelLoad=function(e){e||(e=this.curLoadingGrp),this._isCacelLoading=!0},n.prototype.load=function(t,n,i,o,r,a,s,l){void 0===a&&(a=!0),void 0===s&&(s=!0),""==this.curLoadingGrp?(s&&null!=s||(s=!0),r?(this._loadingClass=r,this._loadingClass.prototype||(s?e.UIMgr.instance.showProcessBar(r):e.UIMgr.instance.showLoadingTimeout(r))):this._loadingClass=e.UIMgr.instance.commonLoadUI,l&&null!=l&&e.ResUtils.setMustRes(l),n&&(this._loadSucc[t]=n),i&&(this._loadError[t]=i),o&&(this._thisObj[t]=o),this._autoHide=null==a||a,this.curLoadingGrp=t,this._isCacelLoading=!1,RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onUniLibResLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onUniLibResLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onUniLibResProgress,this),RES.loadGroup(t)):e.Console.warn("资源组 ["+this.curLoadingGrp+"] 正在加载,请等待后台加载完成")},n.prototype.loadArr=function(e,t,n,i,o){this._currentLoadArr&&this._currentLoadArr.length>0?this._currentLoadArr.concat(e):(this._currentLoadArr=e,this._currentLoadIndex=0)},n.prototype.onUniLibResLoadComplete=function(t){this.curLoadingGrp="";var n=t.groupName;t.groupName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onUniLibResLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onUniLibResLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onUniLibResProgress,this)),this._loadingClass&&1==this._autoHide&&egret.is(this._loadingClass.prototype,"egret.DisplayObjectContainer")&&e.UIMgr.instance.hideLoading(this._loadingClass),this._loadingClass&&(this._loadingClass=null),this._loadSucc[n]&&0==this._isCacelLoading?this._loadSucc[n].call(this._thisObj[n],t):this._isCacelLoading=!1,this.removeLoadDic(n)},n.prototype.onUniLibResLoadError=function(t){this.curLoadingGrp="";var n=t.groupName;e.Console.warn("Group:"+t.groupName+" has failed to load"),t.groupName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onUniLibResLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onUniLibResLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onUniLibResProgress,this),this._loadError[n]&&0==this._isCacelLoading?this._loadError[n].call(this._thisObj[n],t):this._isCacelLoading=!1,this.removeLoadDic(n))},n.prototype.removeLoadDic=function(e){this._loadError[e]=null,delete this._loadError[e],this._thisObj[e]=null,delete this._thisObj[e],this._loadSucc[e]=null,delete this._loadSucc[e]},n.prototype.onUniLibResProgress=function(t){var n=t.groupName;this._loadingClass&&0==this._isCacelLoading&&(egret.is(this._loadingClass.prototype,"egret.DisplayObjectContainer")?e.UIMgr.instance.showProcessBar(this._loadingClass,t.itemsLoaded,t.itemsTotal,"",t.groupName):this._loadingClass.call(this._thisObj[n],t))},n.prototype.loadConfig=function(e,t,n,i){RES.destroyRes(e),RES.getResByUrl(e,function(o){o&&o.groups?(RES.hasOwnProperty("parseConfig")&&RES.parseConfig(o,t),RES.destroyRes(e),n.call(i)):console.error("游戏config加载失败:"+e)},this)},n.prototype.loadedCfg=function(e){},n.prototype.removeRefrence=function(){this._loadSucc&&(this._loadSucc=null),this._loadingClass&&(this._loadingClass=null),this._loadError&&(this._loadSucc=null),this._thisObj&&(this._thisObj=null)},n._self=null,n}(egret.EventDispatcher);e.ResLoadMgr=t}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){function t(){this._currentScene=null,this._lastScene=null}return Object.defineProperty(t,"instance",{get:function(){return null==this._self&&(this._self=new t,null==this._self.sceneLayer&&(this._self.sceneLayer=new egret.DisplayObjectContainer,egret.MainContext.instance.stage.addChild(this._self.sceneLayer))),this._self},enumerable:!0,configurable:!0}),t.prototype.init=function(e){null==this._currentScene&&(this._currentScene=e)},t.prototype.changeScene=function(t,n,i,o){var r=this;if(i&&e.Global.isInGame){var a=this._currentScene.currentGame;return null!=a&&(a.parent&&a.parent.removeChild(a),a.destroy()),a=new t(n),this._currentScene.currentGame=a,this._currentScene.gameLayer.addChild(a),e.PopUpMgr.init(),a}var s=new t(n);return null!=this._currentScene&&(this._lastScene=this._currentScene,e.DisplayUtils.removeFromParent(this._lastScene)),this._currentScene=s,this._currentScene.once(egret.Event.ADDED_TO_STAGE,function(t){r._lastScene&&r._lastScene!=r._currentScene&&(r._lastScene.destroy?r._lastScene.destroy():e.Console.warn("场景销毁方法不存在"),r._lastScene=null)},this),this.sceneLayer.addChild(this._currentScene),e.DebugView.Instance.check(),e.PopUpMgr.init(),this._currentScene},Object.defineProperty(t.prototype,"currentScene",{get:function(){return this._currentScene},enumerable:!0,configurable:!0}),t.prototype.lastSceneLeave=function(){null!=this._lastScene&&(this._lastScene.parent&&this._lastScene.parent.removeChild(this._lastScene),this._lastScene.destroy(),this._lastScene=null)},t._self=null,t}();e.SceneMgr=t}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){function e(){this.isStopped=!1,this.isMusic=!1,this.name="",this.position=0,this.egret_channel=null}return e.prototype.stop=function(){this.egret_channel&&(this.position=this.egret_channel.position,this.egret_channel.stop(),this.isStopped=!0,this.egret_channel=null)},e}(),n=function(){function n(){this._soundRes={},this._musicVolume=1,this._soundVolume=1,this._musicOpen=!0,this._soundOpen=!0,this._activeSound={},this._activeSoundLoop={},this._soundPause=!1,this.loadTimeDic={},this._currentMusicIndex=0,this._currentMusicChanel=null}return Object.defineProperty(n,"instance",{get:function(){var t=this;return null==this._instance&&(this._instance=new n,e.Utils.getLocalStorage(n.SOUND_TOGGLE,function(e){null!=e&&(t._instance.soundOpen=Boolean(e))}),e.Utils.getLocalStorage(n.MUSIC_TOGGLE,function(e){null!=e&&(t._instance.musicOpen=Boolean(e))}),egret.Capabilities.supportVersion<"3.2.6"&&setTimeout(function(){e.ZQGameSdk.speakerActive()},1e4)),this._instance},enumerable:!0,configurable:!0}),n.prototype.onActive=function(t){this._musicOpen&&egret.Capabilities.supportVersion<"3.2.6"&&setTimeout(function(){e.ZQGameSdk.speakerActive(),n.instance.resumeBgMusic()},2e3)},n.prototype.onDeActive=function(e){egret.Capabilities.supportVersion<"3.2.6"&&n.instance.pauseBgMusic()},Object.defineProperty(n.prototype,"soundPause",{get:function(){return this._soundPause},set:function(e){this._soundPause=e},enumerable:!0,configurable:!0}),n.prototype.playSound=function(e,t,n,i,o){if(void 0===t&&(t=1),this._soundOpen&&1!=this._soundPause){var r,a=this;if(!this._activeSound[e]||0!=this._activeSound[e].$loops){if(i){r=this.play(e,t,n,[function(e,t){t.stop(),a.stopSound(e),i&&i.call(o)}],!1)}else r=this.play(e,t,n,[],!1);return null!=r&&(this._activeSound[e]=r),r}}},n.prototype.stopSounds=function(){for(var t in this._activeSound)null!=this._activeSound[t]&&void 0!=this._activeSound[t]&&(this._activeSound[t].stop(),this._activeSound[t]=null,delete this._activeSound[t]);for(var t in this._soundRes)this._soundRes[t]=null,delete this._soundRes[t];e.ResUtils.resetSoundLoadTimes()},n.prototype.stopSound=function(e){null!=this._activeSound[e]&&void 0!=this._activeSound[e]&&(this._activeSound[e].stop(),this._activeSound[e].dispatchEventWith(egret.Event.SOUND_COMPLETE),this._activeSound[e]=null,delete this._activeSound[e])},n.prototype.play=function(t,n,i,o,r){void 0===n&&(n=1),void 0===r&&(r=!0);var a,s=this;o&&o.length>0&&(a=function(e){var n=e.currentTarget;null!=n&&void 0!=n&&(n.removeEventListener(egret.Event.SOUND_COMPLETE,a,s),null!=o&&void 0!=o&&(o.length>1?o[0].call(o[1],t,n):o[0](t,n)))});var l=function(e){if(s._soundRes[t]=e,1==r){var a=!0;if(s._currentMusicChanel&&null!=s.loadTimeDic[s._currentMusicChanel.name]&&null!=s.loadTimeDic[t]&&s.loadTimeDic[s._currentMusicChanel.name]>s.loadTimeDic[t]&&(a=!1),1==a){var l=s.play(t,n,i,o,r);s.resetCurrentMusic(l,t)}}else(new Date).getTime()-s.loadTimeDic[t]<=1e3&&(s.loadTimeDic[t]=0,s._activeSound[t]=s.play(t,n,i,o,r))},c=0;if(null!=this.loadTimeDic[t]&&(c=this.loadTimeDic[t]),this.loadTimeDic[t]=(new Date).getTime(),null==this._soundRes[t]||void 0==this._soundRes[t]){if(RES.hasRes(t)){var u=RES.getRes(t);null!=u||void 0!=u?l(u):(e.Console.log("sound声音资源没有预加载到本地,建议进行预加载:"+t),e.ResUtils.getRes(t,l,null,egret.URLLoaderDataFormat.SOUND))}else e.ResUtils.getRes(t,l,null,egret.URLLoaderDataFormat.SOUND);return null}if(this._soundRes[t]){if(0==r&&(new Date).getTime()-c<100)return this.loadTimeDic[t]=c,null;var h=this._soundRes[t].play(i,n);if(null!=h&&void 0!=h){a&&h.addEventListener(egret.Event.SOUND_COMPLETE,a,s);var d=1==r?this._musicVolume:this._soundVolume;return h.volume=d,h}return null}return null},n.prototype.randomSounds=function(e){e&&(this._bgMusics=e);var t=Math.floor(this._bgMusics.length*Math.random());this.play(this._bgMusics[t],0)},n.prototype.playBgMusic=function(e,t){var n=this;if(n._bgMusics=e,t&&(n._currentMusicIndex=t),n._musicOpen&&n._bgMusics.length>0&&(n._currentMusicIndex>=n._bgMusics.length&&(n._currentMusicIndex=0),null==n._currentMusicChanel||n._bgMusics[n._currentMusicIndex]!=n._currentMusicChanel.name)){var i=n.play(n._bgMusics[n._currentMusicIndex],1,t,[n.onMusicEnd,n]);n.resetCurrentMusic(i,n._bgMusics[n._currentMusicIndex])}},n.prototype.onMusicEnd=function(e){var t=this;if(t._currentMusicIndex++,t._currentMusicIndex==t._bgMusics.length&&(t._currentMusicIndex=0),t._musicOpen&&t._bgMusics.length>0){var n=t.play(t._bgMusics[t._currentMusicIndex],1,0,[t.onMusicEnd,t]);t.resetCurrentMusic(n,t._bgMusics[t._currentMusicIndex])}},n.prototype.resetCurrentMusic=function(e,n){if(null!=e&&void 0!=e){var i=new t;i.name=n,i.isMusic=!0,i.egret_channel=e,i.res=this._soundRes[n],null!=this._currentMusicChanel&&this._currentMusicChanel!=i&&this._currentMusicChanel.name!=i.name&&this.stopBgMusic(),this._currentMusicChanel=i,this._currentMusicChanel.isStopped=!1,this._currentMusicChanel.egret_channel.volume=this._musicVolume}},n.prototype.stopBgMusic=function(){this._currentMusicChanel&&(this._currentMusicChanel.stop(),this.loadTimeDic[this._currentMusicChanel.name]=0,this._currentMusicChanel=null)},n.prototype.pauseBgMusic=function(){this._currentMusicChanel&&this._currentMusicChanel.stop()},n.prototype.resumeBgMusic=function(){if(this._musicOpen&&(!this._currentMusicChanel||this._currentMusicChanel.isStopped)){var e=this,t=0;if(this._currentMusicChanel&&(t=this._currentMusicChanel.position),this._bgMusics&&this._bgMusics.length>0){var n=this.play(this._bgMusics[this._currentMusicIndex],1,t,[e.onMusicEnd,e]);this.resetCurrentMusic(n,this._bgMusics[this._currentMusicIndex])}}},n.prototype.isPlayingBgMusic=function(){return!(!this._currentMusicChanel||0!=this._currentMusicChanel.isStopped)},n.prototype.isSoundPlaying=function(e){return!(!this._activeSound[e]||!this._activeSound[e].position)},Object.defineProperty(n.prototype,"musicVolume",{get:function(){return this._musicVolume},set:function(e){this._musicVolume=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"soundVolume",{get:function(){return this._soundVolume},set:function(e){this._soundVolume=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"musicOpen",{get:function(){return this._musicOpen},set:function(t){this._musicOpen=t,t?this.resumeBgMusic():this.pauseBgMusic(),e.Utils.setLocalStorage(n.MUSIC_TOGGLE,this._musicOpen)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"soundOpen",{get:function(){return this._soundOpen},set:function(t){this._soundOpen=t,e.Utils.setLocalStorage(n.SOUND_TOGGLE,this._soundOpen)},enumerable:!0,configurable:!0}),n.isFirst=!0,n.SOUND_TOGGLE="sound_toggle",n.MUSIC_TOGGLE="music_toggle",n}();e.SoundMgr=n}(uniLib||(uniLib={}));var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),uniLib;!function(e){var t=function(t){function n(){return t.call(this)||this}return __extends(n,t),Object.defineProperty(n,"instance",{get:function(){return null==this._self&&(this._self=new n),this._self},enumerable:!0,configurable:!0}),n.prototype.init=function(){this.sendedKb=0,this.receiveKb=0,this.sendB=0,this.receiveB=0,this.secondTimer=new egret.Timer(1e3,0),this.secondTimer.addEventListener(egret.TimerEvent.TIMER,this.dispatchSecondEvent,this),this.secondTimer.start(),this.requestPing()},n.prototype.dispatchSecondEvent=function(t){e.Console.isDevMode||(this.dispatchEventWith(n.SENDANDRECEIVE,!1,{send:this.sendB,receive:this.receiveB}),this.sendB=this.receiveB=0)},n.prototype.requestPing=function(){var t=new Pmd.SetPingTimeNullUserPmd_CS;e.NetMgr.ws.sendPlat(t)},Object.defineProperty(n.prototype,"socketStatus",{set:function(e){this.dispatchEventWith(n.SOCKETSTATUS,!1,e)},enumerable:!0,configurable:!0}),n.prototype.messageCharStatistics=function(t,i,o){if(void 0===o&&(o="utf-8"),!e.Console.isDevMode){var r,a,s,l=0;if("utf-16"===(o=o?o.toLowerCase():"")||"utf16"===o)for(a=0,s=t.length;a<s;a++)l+=(r=t.charCodeAt(a))<=65535?2:4;else for(a=0,s=t.length;a<s;a++)l+=(r=t.charCodeAt(a))<=127?1:r<=2047?2:r<=65535?3:4;"send"==i?(this.sendB+=l,this.sendedKb+=l/1024):(this.receiveB+=l,this.receiveKb+=l/1024),this.dispatchEventWith(n.SENDEDANDRECEIVED,!1,{sended:this.sendedKb,received:this.receiveKb})}},n.prototype.destroy=function(){this.secondTimer&&(this.secondTimer.removeEventListener(egret.TimerEvent.TIMER,this.dispatchSecondEvent,this),this.secondTimer.stop())},n.PING="ping",n.SENDANDRECEIVE="sendAndReceive",n.SENDEDANDRECEIVED="sendedAndReceived",n.SOCKETSTATUS="socketStatus",n._self=null,n}(egret.EventDispatcher);e.StatistcsMgr=t}(uniLib||(uniLib={}));var Pmd;!function(e){e.OnSetPingTimeNullUserPmd_CS=function(e){uniLib.StatistcsMgr.instance.dispatchEventWith(uniLib.StatistcsMgr.PING,!1,e.pingmsec)}}(Pmd||(Pmd={}));var uniLib;!function(e){var t=function(){function t(){this._uis=new Object,this._loadings=new Object,this._effects={}}return Object.defineProperty(t,"instance",{get:function(){return null==this._self&&(this._self=new t),this._self},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"DefaultLoading",{set:function(e){this.defaultLoadingView=e},enumerable:!0,configurable:!0}),t.prototype.showUI=function(t,n,i,o,r,a,s){void 0===o&&(o=!1),void 0===r&&(r=!1);var l=this,c=egret.getQualifiedClassName(t),u=function(e){l._uis[c]&&l._uis[c].hasEventListener(egret.Event.REMOVED_FROM_STAGE,u,l)&&l._uis[c].removeEventListener(egret.Event.REMOVED_FROM_STAGE,u,l),l._uis[c].destroy&&l._uis[c].destroy(),0==o&&(l._uis[c]=null,delete l._uis[c])};if(null==this._uis[c]?(this._uis[c]=new t(n),a&&(this._uis[c].x=a),s&&(this._uis[c].y=s)):this._uis[c].updateUIData&&this._uis[c].updateUIData(n),this._uis[c])return 0==o&&(this._uis[c].hasEventListener(egret.Event.REMOVED_FROM_STAGE,u,this)||this._uis[c].addEventListener(egret.Event.REMOVED_FROM_STAGE,u,this)),null!=this._uis[c].stage&&null!=this._uis[c].parent||(i&&null!=i&&i instanceof egret.DisplayObjectContainer?i.addChild(this._uis[c]):e.SceneMgr.instance.currentScene&&e.SceneMgr.instance.currentScene.topLayer?e.SceneMgr.instance.currentScene.topLayer.addChild(this._uis[c]):egret.MainContext.instance.stage.addChild(this._uis[c])),this._uis[c]},Object.defineProperty(t.prototype,"commonLoadUI",{get:function(){return this._commonLoadUI},set:function(e){this._commonLoadUI=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tipsLoadUI",{get:function(){return this._tipsLoadUI},set:function(e){this._tipsLoadUI=e},enumerable:!0,configurable:!0}),t.prototype.showProcessBar=function(e,t,n,i,o,r,a){return void 0===r&&(r=!1),this.showLoading(e,t,n,i,o,r,"",a)},t.prototype.showLoadingParam=function(e,t,n){return this.showLoading(e,2,100,"","",!1,"",n,t)},t.prototype.showLoadingTimeout=function(e,t,n,i){void 0===t&&(t=""),void 0===n&&(n=2e4),void 0===i&&(i=""),this.showLoading(e||this._tipsLoadUI,null,null,i,null,!1,t);var o=this;n&&setTimeout(function(){o.hideLoading(e,t)},n)},t.prototype.showLoading=function(t,n,i,o,r,a,s,l,c){void 0===a&&(a=!1),void 0===s&&(s=""),""==s?t&&null!=t?s=egret.getQualifiedClassName(t):(s=egret.getQualifiedClassName(this._commonLoadUI),t=this._commonLoadUI):null==t&&(s=egret.getQualifiedClassName(this._tipsLoadUI),t=this._tipsLoadUI),e.StringUtils.stringIsNullOrEmpty(s)||null==t||(null==this._loadings[s]?this._loadings[s]=new t(c):this._loadings[s].update&&c&&this._loadings[s].update(c),null==this._loadings[s].stage&&(this._loadings[s].setProgress&&this._loadings[s].setProgress(2,100),l?l.addChild(this._loadings[s]):e.SceneMgr.instance.currentScene?e.SceneMgr.instance.currentScene.currentGame&&e.SceneMgr.instance.currentScene.currentGame.parent?e.SceneMgr.instance.currentScene.currentGame.addChild(this._loadings[s]):e.SceneMgr.instance.currentScene.tipsLayer?e.SceneMgr.instance.currentScene.tipsLayer.addChild(this._loadings[s]):egret.MainContext.instance.stage.addChild(this._loadings[s]):egret.MainContext.instance.stage.addChild(this._loadings[s])),this._loadings[s].setProgress&&this._loadings[s].setProgress(n,i,o,r,a))},t.prototype.showParticle=function(t,n,i,o){var r=function(n){this._effects[t].removeEventListener(egret.Event.COMPLETE,r,this),e.DisplayUtils.removeFromParent(n.target)};try{null==this._effects[t]&&(this._effects[t]=e.DisplayUtils.createParticle(t)),i&&(this._effects[t].emitterX=i),o&&(this._effects[t].emitterY=o),null==this._effects[t].stage&&(e.SceneMgr.instance.currentScene.effectLayer?e.SceneMgr.instance.currentScene.effectLayer.addChild(this._effects[t]):e.SceneMgr.instance.currentScene.addChild(this._effects[t]),this._effects[t].start(n),this._effects[t].addEventListener(egret.Event.COMPLETE,r,this))}catch(t){e.Console.error("找不到粒子效果")}return this._effects[t]||null},t.prototype.hideLoading=function(t,n,i,o){void 0===n&&(n=""),void 0===i&&(i=!0),void 0===o&&(o=!0),e.GameModuleUtils.lastGameInfo&&0==e.GameModuleUtils.lastGameInfo.preloadUIAutoHide&&e.GameModuleUtils.lastGameInfo.preloadUI&&(t=e.GameModuleUtils.lastGameInfo.preloadUI,o=!1),""==n&&(t&&null!=t?n=egret.getQualifiedClassName(t):(n=egret.getQualifiedClassName(this._commonLoadUI),t=this._commonLoadUI)),null!=this._loadings[n]&&(1==o?e.DisplayUtils.removeFromParent(this._loadings[n]):this._loadings[n].destroy?this._loadings[n].destroy():e.DisplayUtils.removeFromParent(this._loadings[n]),i&&(this._loadings[n]=null,delete this._loadings[n]))},t.prototype.hideUI=function(t,n){void 0===n&&(n=!0);var i=egret.getQualifiedClassName(t);e.DisplayUtils.removeFromParent(this._uis[i]),n&&(this._uis[i]=null,delete this._uis[i])},t.prototype.destroyUI=function(t){var n=egret.getQualifiedClassName(t);null!=this._uis[n]&&void 0!=this._uis[n]&&(e.DisplayUtils.removeFromParent(this._uis[n]),delete this._uis[n])},t.prototype.clearOldSceneUis=function(){if(this._uis)for(var e in this._uis)(t=this._uis[e])&&null==t.parent&&delete this._uis[e];if(this._loadings)for(var e in this._loadings){var t=this._loadings[e];t&&null==t.parent&&delete this._loadings[e]}},t._self=null,t}();e.UIMgr=t}(uniLib||(uniLib={}));var uniLib;!function(e){e.checkServerReturnCodeError=function(t,n){return null==t||!e.StringUtils.stringIsNullOrEmpty(t.errno)&&"0"!=t.errno},e.doServerReturnCodeError=function(t,n){if(null==t)return!0;switch(t.errno||(t.errno="0"),Number(t.errno)){case Pmd.HttpReturnCode.HttpReturnCode_SignError:e.Global.isH5?(e.HttpClient._reconnectTimes++,e.HttpClient._reconnectTimes>5?(e.Utils.clearLocalStorage(),e.Global.LobbyPlatInfo=null,e.Utils.restart("登录服务器失败,请重新登录!","确定")):n.reLogin()):(e.Utils.clearLocalStorage(),e.Global.LobbyPlatInfo=null,e.Utils.restart("欢迎回来，点击确定将登录游戏","确定"));break;case Pmd.HttpReturnCode.HttpReturnCode_ServerShutDown:e.Global.hasEventListener(e.ZqEvent.ON_SERVER_SHUTDOWN)?e.Global.dispatchEvent(e.ZqEvent.ON_SERVER_SHUTDOWN,{gameId:n.GameID,zoneId:n.ZoneID}):e.Utils.restart("连接服务器失败,请重新尝试!","确定");break;case Pmd.HttpReturnCode.HttpReturnCode_GameZoneListError:e.Utils.clearLocalStorage(),e.Global.LobbyPlatInfo=null,e.Utils.restart("找不到游戏区列个,请重新登录!","确定");break;case Pmd.HttpReturnCode.HttpReturnCode_JsonSyntaxError:case Pmd.HttpReturnCode.HttpReturnCode_JsonMessageError:e.Utils.clearLocalStorage(),e.Global.LobbyPlatInfo=null,e.Utils.restart("登陆协议语法错误,请重新尝试!","确定");break;case Pmd.HttpReturnCode.HttpReturnCode_TokenValueError:e.Utils.clearLocalStorage(),e.Global.LobbyPlatInfo=null,e.Utils.restart("认证信息为空 ,请重新尝试!","确定");break;case Pmd.HttpReturnCode.HttpReturnCode_LuaScriptError:e.Global.debugLevel>0&&e.Utils.restart("游戏服务器脚本出错,请重新尝试!","确定");break;case Pmd.HttpReturnCode.HttpReturnCode_SdkCheckSignErr:return e.Utils.clearLocalStorage(),e.Global.LobbyPlatInfo=null,e.Utils.restart("第三方认证错误 ,请重新尝试!","确定"),!1;case Pmd.HttpReturnCode.HttpReturnCode_NoSdkServer:case Pmd.HttpReturnCode.HttpReturnCode_Sdk3PartyServerErr:return e.Utils.clearLocalStorage(),e.Global.LobbyPlatInfo=null,e.Utils.restart("第三方认证服务器未开 ,请重新尝试!","确定"),!1;case Pmd.HttpReturnCode.HttpReturnCode_NoGatewaytDown:e.Utils.restart("没有可用网关,请重新尝试!","确定");break;case Pmd.HttpReturnCode.HttpReturnCode_ProtobufErr:e.Utils.clearLocalStorage(),e.Global.LobbyPlatInfo=null,e.Utils.restart("协议语法错误,请重新尝试!","确定");break;case Pmd.HttpReturnCode.HttpReturnCode_GatewayErr:e.Utils.clearLocalStorage(),e.Global.LobbyPlatInfo=null,e.Utils.restart("网关错误,请重新尝试!","确定");break;case Pmd.HttpReturnCode.HttpReturnCode_Timeout:return e.Utils.restart("登陆协议返回超时,请重新尝试!","确定"),!1;default:e.Utils.clearLocalStorage(),e.Global.LobbyPlatInfo=null,e.Utils.restart("登录服务器失败,请重新登录!","确定")}return!0}}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){function t(){this.checkingGateWayUrl=!1,this.OnResponse=function(t){var n=t.do.split(".");n[n.length-1]="On"+n[n.length-1];for(var i,o="",r=0;r<n.length;r++)o+=n[r]+(r==n.length-1?"":".");if(null!=e.getDefinitionByName(o)&&(i=e.getDefinitionByName(o)),null==i)return e.Console.warn("[HTTP RUN] unprocessed network message: "+JSON.stringify(t)),!1;try{return i(t.data),!0}catch(n){e.Console.error("[HTTP RUN ERROR]"+n.toString()+"\n"+JSON.stringify(t))}return!1}}return t.prototype.init=function(t,n,i){this.LoginUrl=t,this.GameID=Number(n),this.ZoneID=Number(i),"true"==e.BrowersUtils.GetRequest("debug")&&(e.BrowersUtils.GetRequest("loginUrl")&&(this.LoginUrl=e.BrowersUtils.GetRequest("loginUrl")),e.StringUtils.stringIsNullOrEmpty(e.BrowersUtils.GetRequest("gameid"))||(this.GameID=Number(e.BrowersUtils.GetRequest("gameid"))),null!=e.BrowersUtils.GetRequest("zoneid")&&NaN!=e.BrowersUtils.GetRequest("zoneid")&&(this.ZoneID=Number(e.BrowersUtils.GetRequest("zoneid"))),"false"==e.BrowersUtils.GetRequest("cacheToken")&&(e.Global.isCacheToken=!1))},t.prototype.initCallBack=function(e,t,n){e&&(this._loginCallBackFunction=e),t&&(this._loginFail=t),n&&(this._loginCallBackObj=n)},t.prototype.h5platLogin=function(t,n,i,o){t&&(this.ZoneID=t),n&&(this._loginCallBackFunction=n),i&&(this._loginFail=i),o&&(this._loginCallBackObj=o),!e.StringUtils.stringIsNullOrEmpty(this.LoginUrl)&&this.GameID?(this.platInfo=e.Global.initPlatInfo(),this.ZoneID?this.login(this.platInfo):this.requestZoneList(this.GameID,this.onGetZoneList,this)):e.Console.error("请先使用init方法初始化连接信息")},t.prototype.onGetZoneList=function(t){t&&t.zonelist&&t.zonelist.length>0&&(t.zonelist.sort(function(e,t){return e.onlinenum-t.onlinenum}),this.ZoneID=t.zonelist[0].zoneid),this.ZoneID?this.login(this.platInfo):e.Console.error("当前没有区服可用!!!")},t.prototype.login=function(t){if(e.Global.LobbyPlatInfo)e.NetMgr.UID=Number(e.Global.LobbyPlatInfo.uid),e.BrowersUtils.extData.inviter=e.NetMgr.UID.toString(),e.Global.LobbyPlatInfo.GatewayUrl&&(this.GatewayUrl=e.Global.LobbyPlatInfo.GatewayUrl),e.NetMgr.PlatToken=e.Global.LobbyPlatInfo.unigame_plat_login,e.NetMgr.PlatKey=e.Global.LobbyPlatInfo.unigame_plat_key,e.NetMgr.platTokenTimeOut=e.Global.LobbyPlatInfo.unigame_plat_login_life,e.Global.LobbyPlatInfo.platinfo?(this.platInfo=e.Global.LobbyPlatInfo.platinfo,this.platInfo.account?e.NetMgr.PlatUID=this.platInfo.account:e.NetMgr.PlatUID=this.platInfo.uid):e.NetMgr.PlatUID=e.NetMgr.UID.toString(),this.ZoneID&&(this._loginCallBackFunction&&this._loginCallBackFunction.call(this._loginCallBackObj,e.Global.LobbyPlatInfo.platinfo),e.Utils.setLocalStorage(CommonConsts.UNI_LAST_PLAT_INFO,e.Global.platId));else{var n=new Pmd.PlatTokenLogin;n.platinfo=t,this.initLogin(e.Global.platInfo.platid,n)}},t.prototype.sendTo=function(t,n,i,o,r){var a=this;void 0===r&&(r=e.CompressType.NONE);var s,l=new Pmd.HttpPackage;"Pmd.CreatePlatOrderRequestSdkPmd_C"==n&&(e.PayMgr.Instance.lastRechargeInfo=i),l.do=n,l.data=i,e.StringUtils.stringIsNullOrEmpty(e.NetMgr.ZoneUID)?e.NetMgr.UID&&(l.uid=e.NetMgr.UID.toString()):l.uid=e.NetMgr.ZoneUID,this.GameID&&(l.gameid=this.GameID),this.ZoneID&&-1!=this.ZoneID&&(l.zoneid=this.ZoneID),e.StringUtils.stringIsNullOrEmpty(e.NetMgr.PlatToken)||(l.unigame_plat_login=e.NetMgr.PlatToken,s=Math.floor((new Date).getTime()/1e3),l.unigame_plat_timestamp=s);var c,u=JSON.stringify(l),h="?";if(e.StringUtils.stringIsNullOrEmpty(e.NetMgr.PlatKey)||(t+=h+"unigame_plat_sign="+e.StringUtils.MD5(u+(s?s.toString():"")+e.NetMgr.PlatKey)+"&do="+l.do,h="?"),this._resq=new e.HttpRequest(function(e){return a.onHttpComplete(e,o,r)},function(n){null!=o&&0!=o(null)||(0==this.onHttpError()&&e.Utils.restart("登陆错误,请重新登陆","确定"),e.Console.error("网络请求失败,请检查网络:"+t))},this),c=u,r!=e.CompressType.NONE){t+=h+"compress="+e.CompressUtil.compressStr[r],h="?";var d=e.CompressUtil.stringToArray(u,new Array(u.length));u=e.CompressUtil.compressByType(d,r),this._resq.dataFormat="binary"}e.Global.platInfo&&e.Global.platInfo.imei&&(t+=h+"imei="+e.Global.platInfo.imei,h="?",e.Global.platInfo.osname&&(t+=h+"osname="+e.Global.platInfo.osname,h="?")),e.Console.isDevMode&&e.Console.log("[HTTP SEND] "+c+"\n"+t),this._resq.open(t),this._resq.send(u)},t.prototype.onHttpComplete=function(n,i,o){var r,a,s=this;r=s._resq.url,a=n;var l;if(o!=e.CompressType.NONE){var c=new Uint8Array(a);a=e.CompressUtil.uncompressByType(c,o),a=e.CompressUtil.Utf8ArrayToStr(a)}if(e.Console.isDevMode&&e.Console.log("[HTTP RECV] "+a+"\n"+r),(l=JSON.parse(a)).gameid&&(s.GameID=l.gameid),l.zoneid&&(s.ZoneID=l.zoneid),e.checkServerReturnCodeError(l,s)){if(("Pmd.MobileRegeristReturnCreateAccountFailLoginUserPmd_S"==l.do||"Pmd.UserRequestPlatTokenLoginFailLoginUserPmd_S"==l.do||"plat-token-login"==l.do||"request-select-zone"==l.do||"Pmd.EmailRegeristReturnCreateAccountFailLoginUserPmd_S"==l.do)&&(e.Utils.clearLocalStorage(e.Global.gameId+"|"+e.Global.getPlatId()+"|platToken"),1==s.onHttpError(null,l)))return;if(("Pmd.MobileRegistReturnRandCodeLoginUserPmd_S"==l.do||"Pmd.MobileRegeristReturnRandCodeLoginUserPmd_S"==l.do||"Pmd.MobileRegistRequestRandCodeLoginUserPmd_C"==l.do)&&1==i(l))return;return e.Console.error("[HTTP RECV ERROR] "+a+"\n"+r),void e.doServerReturnCodeError(l,s)}t._reconnectTimes=0,null!=i?i(l.data):null!=s.OnResponse&&s.OnResponse(l)},t.prototype.reLogin=function(){e.Utils.clearLocalStorage(e.Global.gameId+"|"+e.Global.getPlatId()+"|platToken"),e.Global.LobbyPlatInfo=null,this.h5platLogin()},t.prototype.onHttpError=function(t,n){if(void 0===t&&(t=null),this._loginFail){var i=this._loginFail.call(this._loginCallBackObj,n?n.data:0);if(this._loginFail=null,this._loginCallBackFunction=null,this._loginCallBackObj=null,1==i)return!0}else e.Console.log("onHttpError _loginFail nil");return!1},t.prototype.initLogin=function(t,n,i){void 0===i&&(i=e.CompressType.NONE);var o=this;e.Global.getPlatToken(function(t){if(null!=t&&1==e.Global.isCacheToken){var r=t;null==e.Global.LobbyPlatInfo&&1==e.Global.lobbyMode&&(e.Global.LobbyPlatInfo=r),r.GatewayUrl?(o.GatewayUrl=r.GatewayUrl,o._loginCallBackFunction&&o._loginCallBackFunction.call(o._loginCallBackObj,r.platinfo),o._loginFail&&(o._loginFail=null),o._loginCallBackObj&&(o._loginCallBackObj=null),e.Utils.setLocalStorage(CommonConsts.UNI_LAST_PLAT_INFO,e.Global.platId)):-1!=o.ZoneID&&o.selectZone(o.ZoneID,function(){o.loginSuccess(o.platInfo)},o)}else{if(n.platinfo&&(!n.platinfo.platid||Number(0==n.platinfo.platid))&&(null==n.platinfo.account||""==n.platinfo.account))if(n.platinfo.imei)n.platinfo.account=n.platinfo.imei;else{var a=e.Utils.getLocalStorage("agent_user_Key");a?(null!=n.platinfo.imei&&""!=n.platinfo.imei||(n.platinfo.imei=a),n.platinfo.account=a):(a=Date.now()+"-"+Math.random(),e.Utils.setLocalStorage("agent_user_Key",a),null!=n.platinfo.imei&&""!=n.platinfo.imei||(n.platinfo.imei=a),n.platinfo.account=a)}o.sendTo(o.LoginUrl,"plat-token-login",n,function(e){return 0!=o.cacheLoginInfo(e)&&(-1!=o.ZoneID?o.selectZone(o.ZoneID,function(){o.loginSuccess(e.platinfo)},o,i):o.loginSuccess(e.platinfo),!0)},i)}e.Global.zoneId=o.ZoneID})},t.prototype.loginSuccess=function(t){this._loginCallBackFunction&&this._loginCallBackFunction.call(this._loginCallBackObj,t),this._loginFail&&(this._loginFail=null),e.Utils.setLocalStorage(CommonConsts.UNI_LAST_PLAT_INFO,e.Global.platId)},t.prototype.requestZoneList=function(e,t,n,i){var o=this,r=new Pmd.RequestZoneList;this.sendTo(this.LoginUrl,"request-zone-list",r,function(e){return o.ZoneList=e.zonelist,null!=t&&t.call(n,e),!0},i)},t.prototype.reSelectZone=function(t,n){var i=this;i.GatewayUrl=null,e.Global.LobbyPlatInfo.GatewayUrl=null,i.selectZone(i.ZoneID,function(){t.call(n)},i)},t.prototype.selectZone=function(t,n,i,o){void 0===o&&(o=e.CompressType.NONE);var r=this;t&&(r.ZoneID=t);var a=new Pmd.RequestSelectZone;r.sendTo(r.LoginUrl,"request-select-zone",a,function(t){return t&&t.gatewayurl&&(r.GatewayUrl=t.gatewayurl),e.Global.getPlatToken(function(n){if(null!=n&&1==e.Global.isCacheToken){var i=n;i&&(t&&t.gatewayurl&&(i.GatewayUrl=t.gatewayurl,i.GatewayUrlWs=t.gatewayurlws+"/json"),1==e.Global.isCacheToken&&e.Global.setPlatToken(i,e.Global.getPlatId(),r.GameID)),t&&t.zoneuid&&(e.NetMgr.ZoneUID=t.zoneuid),e.Global.LobbyPlatInfo=i}}),n&&n.call(i),!0},o)},t.prototype.sendMessage=function(t,n,i,o,r){var a=this;if(r)this.sendTo(r,t,n,i,o);else{if(e.StringUtils.stringIsNullOrEmpty(this.GatewayUrl)){var s;if(0==this.checkingGateWayUrl)if(this.checkingGateWayUrl=!0,e.Global.LobbyPlatInfo){if(!(s=e.Global.LobbyPlatInfo)||!s.GatewayUrl)return void this.selectZone(null,function(){a.sendTo(this.GatewayUrl,t,n,i,o)},this,o);this.GatewayUrl=s.GatewayUrl}else e.Global.getPlatToken(function(r){if(null!=r&&1==e.Global.isCacheToken){var s=r;s&&s.GatewayUrl?a.GatewayUrl=s.GatewayUrl:e.Console.error("没有找到登录数据，请登录后再发送请求："+JSON.stringify(n))}else a.selectZone(null,function(){a.sendTo(a.GatewayUrl,t,n,i,o)},a,o)})}this.sendTo(this.GatewayUrl,t,n,i,o)}},t.prototype.send=function(e,t,n,i){this.sendMessage(e.GetType?e.GetType():e.do||e.cmd_name,e,t,n,i)},t.prototype.sendToMe=function(e,t){if(null!=t)t(e);else if(null!=this.OnResponse){var n=new Pmd.HttpPackageReturn;n.gameid=this.GameID,n.zoneid=this.ZoneID,n.do=e.GetType(),n.data=e,this.OnResponse(n)}},t.prototype.cacheLoginInfo=function(t){if(!t)return!1;var n=0;t.platinfo&&(t.platinfo.account?e.NetMgr.PlatUID=t.platinfo.account:e.NetMgr.PlatUID=t.platinfo.uid,e.NetMgr.PlatSession=t.platinfo.sign,n=e.Global.getPlatId()),e.NetMgr.UID=Number(t.uid),e.BrowersUtils.extData.inviter=e.NetMgr.UID.toString(),e.NetMgr.SID=t.sid,e.NetMgr.PlatToken=t.unigame_plat_login,e.NetMgr.PlatKey=t.unigame_plat_key,e.NetMgr.platTokenTimeOut=t.unigame_plat_login_life,1==e.Global.lobbyMode&&(e.Global.LobbyPlatInfo=t);try{1==e.Global.isCacheToken&&e.Global.setPlatToken(t,n,this.GameID)}catch(e){}return!0},t.prototype.cachePhoneLoginInfo=function(t,n){e.NetMgr.UID=Number(t.uid),e.BrowersUtils.extData.inviter=e.NetMgr.UID.toString(),e.NetMgr.PlatToken=t.platlogin,e.NetMgr.PlatKey=t.platkey,e.NetMgr.platTokenTimeOut=t.platloginlife;var i={};i.uid=t.uid,i.unigame_plat_login=t.platlogin,i.unigame_plat_key=t.platkey,i.unigame_plat_login_life=t.platloginlife,e.Global.platId=n,1==e.Global.lobbyMode&&(e.Global.LobbyPlatInfo=i);try{1==e.Global.isCacheToken&&e.Global.setPlatToken(i,n,this.GameID)}catch(e){}},t.prototype.delLocalStoryge=function(){try{e.Utils.clearLocalStorage(e.Global.gameId+"|"+e.Global.getPlatId()+"|platToken")}catch(e){}},t.prototype.generateUUID=function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)})},t._reconnectTimes=0,t}();e.HttpClient=t}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){function t(e,t,n){this.isOriType=!0,this._dtype="text",this._call=e,this._err=t,this._this=n}return t.prototype.open=function(t,n,i){var o=this;void 0===i&&(i=!1);var r=this;r.url=t,this._xhr=e.BrowersUtils.getXHR(),window.XMLHttpRequest?this.isOriType=!0:this.isOriType=!1,this.isOriType?(this._xhr.open("post",t,!0),i||this._xhr.setRequestHeader("Content-Type","multipart/form-data"),this._xhr.responseType=this._dtype,this._xhr.onreadystatechange=function(){4==r._xhr.readyState?r._xhr.status>=400||0==r._xhr.status?r.onHttpError(r._xhr.status):"arraybuffer"==r._dtype&&r._xhr.response.byteLength>0?r.onCallBack(r._xhr.response):r.onCallBack(r._xhr.responseText):1==r._xhr.readyState&&n&&r._xhr.send(n)}):(this._xhr.dataFormat=this._dtype,this._xhr.addEventListener("complete",function(e){return o.onCallBack(e)},this),this._xhr.addEventListener("ioError",this.onHttpError,this))},Object.defineProperty(t.prototype,"dataFormat",{set:function(e){1==this.isOriType?("binary"==e&&(e="arraybuffer"),this._xhr&&(this._xhr.responseType=e)):this._xhr&&(this._xhr.dataFormat=e),this._dtype=e},enumerable:!0,configurable:!0}),t.prototype.onCallBack=function(e){void 0===e&&(e=null),this._call&&(1==this.isOriType?this._call.call(this._this,e):(console.error(e.currentTarget.data.byteLength),this._call.call(this._this,e.currentTarget.data)))},t.prototype.onHttpError=function(e){void 0===e&&(e=null),this._err&&this._err.call(this._this,e)},t.prototype.send=function(e){if(1==this.isOriType)this._xhr.send(e);else{var t=new egret.URLRequest(this.url);t.method="post",t.data=e,this._xhr.load(t)}},t.prototype.destroy=function(){this._call=null,this._err=null,this._this=null},t}();e.HttpRequest=t}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){return function(){}}();e.LoopbackSocket=t;var n=function(){function n(n,i){if(void 0===i&&(i=null),this._url="",this._url=n,i==SockType.LOOPBACK)this.sockType=i,this.socket=new t;else if(window.WebSocket){this.sockType=SockType.NORMAL;try{this.socket=new WebSocket(n)}catch(t){e.Console.error("[WS MyWebSocket ERROR] "+t.toString())}}else this.sockType=SockType.EGRET,this.socket=new egret.WebSocket,this.SetBinarytype(SockByinaryType.STRING),this.socket.connectByUrl(n)}return Object.defineProperty(n.prototype,"url",{get:function(){return this._url},enumerable:!0,configurable:!0}),n.prototype.SetBinarytype=function(e){this.sockType==SockType.EGRET?e==SockByinaryType.STRING?this.socket.type=egret.WebSocket.TYPE_STRING:e==SockByinaryType.BINARY&&(this.socket.type=egret.WebSocket.TYPE_BINARY):this.sockType==SockType.LOOPBACK||e==SockByinaryType.STRING||e==SockByinaryType.BINARY&&(this.socket.binaryType="arraybuffer")},n}();e.MyWebSocket=n;var i=function(){function t(e,t,n,i){void 0===i&&(i=!1),this.isOpenCompress=!1,this.lastEchoTime=0,this.reconnectDelay=5e3,this.isConnected=0,this.isConnecting=!1,this.needReconnect=!0,this._reconnectTimes=0,this._maxCeconnectTimes=10,this._active=!0,this._active_reconnect=!1,this._areconnect=!1,this.tickSec=30,this.msgTimeoutMSec=0,this.tickTimes=2,this.lastRecvTime=0,this.lastseq=0,this.gameId=0,this.zoneId=0,this.isLobby=!1,this.wsurl=e;this.gameId=Number(t),this.zoneId=Number(n),this.isLobby=i,this.isLobby?this.logName="[Lobby]":this.logName="[Game]",this.sendCache=new Array}return t.prototype.getSocket=function(){return this.mysocket.socket},t.prototype.checkNeedReconnect=function(){var t=this;if(0==e.Utils.isrebooting)if(1==t.isConnected){var n=!1;null!=t.mysocket?t.mysocket.sockType==SockType.EGRET?0==t.getSocket().connected&&(t.log("checkNeedReconnect0:"+t.isConnected),n=!0):1!=t.getSocket().readyState&&(t.log("checkNeedReconnect1::"+t.isConnected),n=!0):(t.log("checkNeedReconnect2::"+t.isConnected),n=!0),1==n&&t.reConnect()}else t.log("checkNeedReconnect3:"+t.isConnected)},t.prototype.resetReconnectNum=function(){this._reconnectTimes=0},t.prototype.pauseReconnect=function(){},t.prototype.login=function(e,t,n){e&&(this.socketLoginSuc=e),t&&(this.socketLoginFail=t),n&&(this.socketLoginObj=n),n.loopback&&(this.sockType=SockType.LOOPBACK),this.connect()},t.prototype.connect=function(){var t=this;if(this.sockType!=SockType.LOOPBACK&&t.close(!0),t.isConnecting=!0,e.ZQGameSdk.lastNetState&&e.ZQGameSdk.lastNetState.data&&e.ZQGameSdk.lastNetState.data[e.ZQGameSdk.NETSTATE]==e.NetState.NO_SIGNAL)return e.ZQGameSdk.getNetStateType(null,null,!0),clearTimeout(t.connectingTimeout),void(t.connectingTimeout=setTimeout(function(){t.log("[WS OPENING WAIT] "+t.wsurl),t.connect()},1e3));if(t.msgTimeoutMSec=0,null==this.sendCache&&(this.sendCache=new Array),this.log("[WS OPENING NEW1] "+this.wsurl),this.mysocket=new n(this.wsurl,this.sockType),this.sockType=this.mysocket.sockType,this.mysocket.sockType==SockType.NORMAL)this.getSocket().onopen=this.onSocketOpen.bind(this),this.getSocket().onmessage=this.onReceiveMessage.bind(this),this.getSocket().onclose=this.onSocketClose.bind(this),this.getSocket().onerror=this.onSocketError.bind(this);else{if(this.sockType==SockType.LOOPBACK)return;this.getSocket().addEventListener("socketData",this.onReceiveMessage,this),this.getSocket().addEventListener("connect",this.onSocketOpen,this),this.getSocket().addEventListener("close",this.onSocketClose,this),this.getSocket().addEventListener("ioError",this.onSocketError,this)}global||egret&&"true"!=e.BrowersUtils.GetRequest("debug")&&(egret.MainContext.instance.stage.addEventListener(egret.Event.DEACTIVATE,this.onDeactive,this),egret.MainContext.instance.stage.addEventListener(egret.Event.ACTIVATE,this.onActive,this)),t.connectingTimeout&&(clearTimeout(t.connectingTimeout),t.connectingTimeout=null),1==this.isLobby?t.connectingTimeout=setTimeout(function(){1==t.isConnecting&&(t.isConnecting=!1,t.socketLoginFail?(t.socketLoginFail.call(t.socketLoginObj),t.warn("connectingTimeout:self.socketLoginFail")):t.onCloseConnect(),t.connectingTimeout=null)},15e3):t.connectingTimeout=setTimeout(function(){1==t.isConnecting&&(t.isConnecting=!1,t.onCloseConnect(),t.connectingTimeout=null)},2e4)},t.prototype.onDeactive=function(e){this._deactiveTime=Date.now(),0!=this._active&&(this._active=!1,0==this.isLobby&&(this.recvCache=new Array))},t.prototype.showRecnectTip=function(){e.UIMgr&&1!=this.isConnected&&(1==e.Global.isInGame?0==this.isLobby&&e.UIMgr&&e.UIMgr.instance.tipsLoadUI&&e.UIMgr.instance.showLoadingTimeout(e.UIMgr.instance.tipsLoadUI,"reconnect",0):e.UIMgr.instance.showLoadingTimeout(e.UIMgr.instance.tipsLoadUI,"reconnect",0))},t.prototype.onActive=function(t){Date.now()-this._deactiveTime>5e3&&this.close(!0);var n=this;if(1!=this._active){if(this.showRecnectTip(),this._active=!0,0==this.isLobby)this.recvCache&&this.recvCache.forEach(function(e){n.parseData(e)}),this.recvCache=null,1==this._active_reconnect&&(this._active_reconnect=!1,this.reConnect());else{var i=new Pmd.OnlineStateLoginUserPmd_CS;i.state=1,this.send(i)}if(this.lastRecvTime=(new Date).getTime(),this.setMsgTimeout(8,"")){var o=new Pmd.TickRequestNullUserPmd_CS;o.requesttime=Math.floor(Date.now()/1e3),this.sendPlat(o)}1==n.isConnecting&&n.connectingTimeout&&(clearTimeout(n.connectingTimeout),n.connectingTimeout=null,1==this.isLobby?n.connectingTimeout=setTimeout(function(){1==n.isConnecting&&(n.isConnecting=!1,n.socketLoginFail?n.socketLoginFail.call(n.socketLoginObj):n.onCloseConnect(),n.connectingTimeout=null)},15e3):n.connectingTimeout=setTimeout(function(){1==n.isConnecting&&(n.isConnecting=!1,n.onCloseConnect(),e.Utils.restart("网络异常,重新登陆可继续游戏","确定"),n.connectingTimeout=null)},2e4)),e.Global.dispatchEvent(e.ZqEvent.EVENT_ACTIVE_SOCKET_CACHE_OK,n.gameId),e.ZQGameSdk.getNetStateType(null,null,!0)}},t.prototype.onSocketOpen=function(){var t=this;t.connectingTimeout&&(clearTimeout(t.connectingTimeout),t.connectingTimeout=null),t.isConnected=1,t.isConnecting=!1;var n=this.sendCache;this.sendCache=new Array,this.loginData&&(this.sendPlat(this.loginData),e.Global.compressType!=e.CompressType.NONE&&(this.mysocket.SetBinarytype(SockByinaryType.BINARY),this.isOpenCompress=!0),this.loginData=null),null!=n&&n.length>0&&(n.forEach(function(e){1==t.sockSend(e)&&t.log("[WS SEND CACHE] "+e)}),this.sendCache=new Array),e.UIMgr&&e.UIMgr.instance.hideLoading(e.UIMgr.instance.tipsLoadUI,"reconnect"),this.timerActive&&(clearInterval(this.timerActive),this.timerActive=null)},t.prototype.setTickSec=function(e){void 0===e&&(e=30),this.tickSec=e},t.prototype.onTickActive=function(){var t=(new Date).getTime()-this.lastRecvTime;0!=this._active&&(t>=this.tickSec*this.tickTimes*1e3?this.checkNeedReconnect():t>=1e3*this.tickSec+1e4?this.reConnect():this.msgTimeoutMSec>0&&t>=this.msgTimeoutMSec?0==e.Utils.isrebooting&&(this.msgTimeoutMSec=0,this.reConnect()):0==this.isLobby&&this.checkNeedReconnect())},t.prototype.setMsgTimeout=function(e,t){return 0==this.msgTimeoutMSec&&(this.msgTimeoutMSec=1e3*e,this.lastRecvTime=(new Date).getTime(),!0)},t.prototype.sockSend=function(t){if(0==this.isConnected||null==this.mysocket)return this.isConnecting||this.connectingTimeout||this.reConnect(),null==this.sendCache&&(this.sendCache=new Array),this.warn("[WS SEND ERROR] can't send message when websocket closed: "+t+":"+this.isConnected+":"+this.sendCache),null!=this.sendCache&&0==this.sendCache.length&&(this.sendCache.push(t),this.log("[WS CACHE sockSend0]:"+t)),!1;if(1!=this.isConnected)return this.warn("[WS SEND ERROR] wait for connecting: "+this.isConnected+":"+t),null!=this.sendCache&&0==this.sendCache.length&&(this.sendCache.push(t),this.log("[WS CACHE sockSend1]:"+t)),!1;var n;if(e.Global.compressType!=e.CompressType.NONE&&1==this.isOpenCompress){var i=e.CompressUtil.encodeUTF8(t);n=e.Global.compressMin>0?i.byteLength>=e.Global.compressMin?e.CompressUtil.compressByType(i,e.Global.compressType):i.buffer:e.CompressUtil.compressByType(i,e.Global.compressType)}else n=t;if(this.mysocket.sockType==SockType.NORMAL)this.getSocket().send(n);else if(1==this.isOpenCompress){var o=new egret.ByteArray;o.writeBytes(n,0,n.byteLength),o.position=0,this.getSocket().writeBytes(o,0,o.bytesAvailable)}else this.getSocket().writeUTF(n);return!0},t.prototype.parseData=function(e){var t=JSON.parse(e);if(t instanceof Array)for(var n=0;n<t.length;n++)this.dispatch(t[n]);else this.dispatch(t)},t.prototype.uncompressData=function(t){var n=new Uint8Array(t);return e.CompressUtil.uncompressByType(n,e.Global.compressType)},t.prototype.onReceiveMessage=function(t){if(void 0===t&&(t=null),this.lastRecvTime=(new Date).getTime(),this.msgTimeoutMSec=0,null!=this.mysocket){var n,i=this;if(this.mysocket.sockType==SockType.EGRET)if(e.Global.compressType!=e.CompressType.NONE){var o=new egret.ByteArray;this.getSocket().readBytes(o),e.Global.compressMin>0?n=o.bytesAvailable>=e.Global.compressMin?i.uncompressData(o.buffer):o.buffer:o.bytesAvailable>0&&(n=i.uncompressData(o.buffer))}else n=this.getSocket().readUTF();else n=e.Global.compressType!=e.CompressType.NONE&&e.Global.compressMin>=0&&t.data.byteLength>0&&t.data.byteLength>=e.Global.compressMin?i.uncompressData(t.data):t.data;n&&""!=n?"{}"!=n&&(1!=i._active&&this.recvCache?this.recvCache.push(n):this.parseData(n)):this.warn("[WS RUN ERROR] server request colose socket")}},t.prototype.onSocketClose=function(t){void 0===t&&(t=null);var n=this;n.isConnected=0,n.isConnecting=!1,null!=this.mysocket?this.warn("[WS CLOSING onSocketClose0] "+this.mysocket.sockType+":"+e.Global.compressType+":"+this.wsurl):this.warn("[WS CLOSING onSocketClose1] "+this.mysocket),setTimeout(function(){0==n.isConnected?n.onCloseConnect():n.warn("[WS CLOSING onSocketClose:]"+n.isConnected)},2e3)},t.prototype.onCloseConnect=function(){var t=this;2!=this.isConnected&&1!=e.Utils.isrebooting?(t.isConnected=0,t._reconnectTimes<t._maxCeconnectTimes?t.reConnect()&&(e.ZQGameSdk&&e.ZQGameSdk.getNetStateType(),e.ZQGameSdk.lastNetState&&e.ZQGameSdk.lastNetState.data&&e.ZQGameSdk.lastNetState.data[e.ZQGameSdk.NETSTATE]==e.NetState.NO_SIGNAL?this.error("[WS reConnect] not network avalible"):t._reconnectTimes++):0==e.Global.isRestarting&&(t.socketLoginFail&&0!=t.socketLoginFail.call(t.socketLoginObj)||(e.Global.isRestarting=!0,e.Console.info("ZQGameSdk.restart"),1==e.Global.isH5?""!=e.Global.reLoginUrl?e.BrowersUtils.redirect(e.Global.reLoginUrl):e.BrowersUtils.reload():(t.isLobby,e.ZQGameSdk&&e.ZQGameSdk.getConfig("网络不稳定,需要重新连接","","确定"))))):this.warn("[WS CLOSING onCloseConnect]")},t.prototype.onSocketError=function(t){void 0===t&&(t=null);var n=this;n.isConnected=0,n.isConnecting=!1,this.warn("[WS Error] "),e.Global.isInGame||(n._maxCeconnectTimes=5),e.Global.dispatchEvent(e.ZqEvent.NET_ERRER),clearTimeout(n.connectingTimeout),n.connectingTimeout=setTimeout(function(){0==n.isConnected?n.onCloseConnect():n.warn("[WS CLOSING onSocketClose:]"+n.isConnected)},2e3)},t.prototype.reConnect=function(){var t=this;if(1==e.Utils.isrebooting||1==t.isConnecting||2==t.isConnected||0==t.needReconnect)return t.warn("[WS CLOSING reConnect cancel]"+e.Utils.isrebooting+":"+t.isConnecting+":"+t.isConnected),!1;if(0==this._active&&t.recvCache)return t._active_reconnect=!0,!0;e.UIMgr&&(1==e.Global.isInGame?0==t.isLobby&&e.UIMgr&&e.UIMgr.instance.tipsLoadUI&&e.UIMgr.instance.showLoadingTimeout(e.UIMgr.instance.tipsLoadUI,"reconnect",0):e.UIMgr.instance.showLoadingTimeout(e.UIMgr.instance.tipsLoadUI,"reconnect",0)),t.isOpenCompress=!1;var n=new Pmd.UserLoginReconnectLoginUserPmd_C;return n.accountid=e.NetMgr.UID,n.timestamp=Math.floor(Date.now()/1e3),n.zoneid=t.zoneId,n.gameid=t.gameId,n.compress=e.CompressUtil.compressStr[e.Global.compressType],n.version=20160805,n.lastseq=t.lastseq,e.Global.zipmd5&&(n.zipmd5=e.Global.zipmd5),e.Global.configmd5&&(n.configmd5=e.Global.configmd5),e.Global.bundleId&&(n.bundlename=e.Global.bundleId),null==e.NetMgr.PlatKey&&(e.NetMgr.PlatKey=""),n.tokenmd5=""+e.StringUtils.MD5(String(n.accountid)+String(n.timestamp)+e.NetMgr.PlatKey),n.url=this.wsurl,t.loginData=n,t.connect(),t.isConnected=2,!0},t.prototype.log=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];e.Console.log(this.logName+t,n)},t.prototype.error=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];e.Console.error(this.logName+t,n)},t.prototype.warn=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];e.Console.warn(this.logName+t,n)},t.prototype.info=function(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];e.Console.info(this.logName+t,n)},t.prototype.dispatch=function(n){var i=this;if(!i.timerActive&&this.mysocket&&this.sockType!=SockType.LOOPBACK){var o=new Pmd.SetTickTimeoutNullUserPmd_CS;o.sec=i.tickSec,o.times=i.tickTimes,i.sendPlat(o),i.timerActive=setInterval(function(){i.onTickActive()},2e3)}var r,a;if(n.GetType||((r=n.cmd_name)?n.GetType=function(){return r}:a=n),0==this.lastseq||n.GetType&&n.GetType()!=t.GatewayWrapperName||r&&r!=t.GatewayWrapperName||(4294967295==this.lastseq?this.lastseq=1:this.lastseq++),a||n.GetType()==t.GatewayWrapperName){if(a||(a=n.msg),e.checkServerReturnCodeError(a))return e.doServerReturnCodeError(n,i),this.warn("[WS RUN ERROR] server error0: "+JSON.stringify(n)),!1;e.Global.jsonCompress?a=e.Global.DeCompress(a):"number"==typeof a.do&&e.Global.jsonCompressDefault&&(a=e.Global.DeCompressDefult(a)),r=a.do,n=a.data}else r||n.GetType()==t.GatewayWrapperName||(r=n.GetType());if(e.checkServerReturnCodeError(n))return e.doServerReturnCodeError(n,i),this.warn("[WS RUN ERROR] server error1: "+JSON.stringify(n)),!1;var s=r.split(".");s[s.length-1]="On"+s[s.length-1];for(var l,c="",u=0;u<s.length;u++)c+=s[u]+(u==s.length-1?"":".");if(null!=e.getDefinitionByName(c)&&(l=e.getDefinitionByName(c)),null!=l)return this._reconnectTimes=0,this.log("[WS RECV] "+c+":"+JSON.stringify(a)),l(n),!0;if("Pmd.OnUserLoginReturnOkLoginUserPmd_S"===c)return e.Console.info("[WS] login to gateway success #"),this.socketLoginSuc&&(this.socketLoginSuc.call(this.socketLoginObj?this.socketLoginObj:this),this.socketLoginSuc=null),this.lastseq=4294967295,!0;if("Pmd.OnReconnectKickoutLoginUserPmd_S"===c)return 1==e.Global.hasEventListener(e.ZqEvent.KICK_OUT)?(this.close(!1),e.Global.dispatchEvent(e.ZqEvent.KICK_OUT,n)):e.Utils.restart(n.desc?n.desc:"重复登陆被踢下线！","确定"),!0;if("Pmd.OnUserLoginReturnFailLoginUserPmd_S"===c){switch(e.Console.info("Pmd.OnUserLoginReturnFailLoginUserPmd_S err:"+n.retcode),n.retcode){case Pmd.LoginReturnFailReason.ServerShutdown:if(this.isLobby||!this.socketLoginFail)return 1!=e.Global.isInGame&&(clearTimeout(i.connectingTimeout),i.connectingTimeout=setTimeout(function(){i.reConnect(),i._reconnectTimes++},5e3)),!0;break;case Pmd.LoginReturnFailReason.VersionTooLow:return e.Utils.restart(n.desc?n.desc:"版本过低，请重新登陆！","确定"),!0;case Pmd.LoginReturnFailReason.UserTokenFind:case Pmd.LoginReturnFailReason.UserTokenTempId:case Pmd.LoginReturnFailReason.UserTokenTimeOut:return e.Utils.clearLocalStorage(e.Global.gameId+"|"+e.Global.getPlatId()+"|platToken"),e.Utils.restart("登陆信息过期,请重新登陆游戏！","确定"),!0;case Pmd.LoginReturnFailReason.LoginDulicate:case Pmd.LoginReturnFailReason.NoGatewaytDown:case Pmd.LoginReturnFailReason.AccountUsing:}var h=!0;return e.TipsUtils&&(e.TipsUtils.showTipsDownToUp(n.retcode+":"+n.desc,!0),h=!1),this.socketLoginFail&&(this.socketLoginFail.call(this.socketLoginObj?this.socketLoginObj:n),h=!1,this.warn("[WS socketLoginFail] ")),h&&e.Utils.restart(n.desc?n.desc:"未知错误,请重新登陆","确定"),!0}if("Pmd.OnTickRequestNullUserPmd_CS"==c){var d=new Pmd.TickReturnNullUserPmd_CS;return d.requesttime=n.requesttime,d.mytime=Math.floor(Date.now()/1e3),this.sendPlat(d),!0}if("Pmd.OnCurrentGmLevelChatUserPmd_S"==c)return e.Global.gmlevel=n.gmlevel,e.Global.gmlevel,!0;if("Pmd.OnUserLoginReconnectOkLoginUserPmd_S"==c)return e.Global.dispatchEvent(e.ZqEvent.ON_RECONNEC,i.gameId),!0;if("Pmd.OnGameServerShutDownLoginUserPmd_S"==c)return i._reconnectTimes>=5&&e.Global.dispatchEvent(e.ZqEvent.ON_SERVER_SHUTDOWN,n),!0;if("Pmd.OnZoneInfoListLoginUserPmd_S"==c)return e.Global.zoneList=n.zonelist,e.Global.dispatchEvent(e.ZqEvent.ON_GETZONEINFO,n),!0;if("Pmd.OnTickReturnNullUserPmd_CS"==c)return!0;if("Pmd.OnServerShutDownLoginUserPmd_S"==c)return e.Global.dispatchEvent(e.ZqEvent.EVENT_SERVER_SHUTDOWN,n),!0;if("Pmd.OnServerDebugLevelLoginUserPmd_S"==c)return e.Global.debugLevel=n.level,e.Global.dispatchEvent(e.ZqEvent.EVENT_SERVER_DEBUG_LEVEL,n),!0;if("Pmd.OnClientConfigUpdateLoginUserPmd_S"==c)if(n&&n.config){n.config;e.ZQGameSdk&&e.ZQGameSdk.getConfig("当前客户端版本过低,请点击确定重启更新。","","确定")}else if(n&&n.zipmd5){if(1==e.Global.is_sandbox)return!0;e.ZQGameSdk&&e.ZQGameSdk.getConfig("当前客户端版本过低,请点击确定重启更新。","","确定","取消")}return this.warn("[WS RUN unprocess] ["+c+"]\n"+JSON.stringify(n)),!1},t.prototype.sendTimeOut=function(e,t){this.send(e,t),this.setMsgTimeout(8,"sendTimeOut")},t.prototype.send=function(t,n){if(null!=t)if(1!=n&&this.sockType!=SockType.LOOPBACK){var i=t.GetType?t.GetType():t.do;"Pmd.CreatePlatOrderRequestSdkPmd_C"==i&&(e.PayMgr.Instance.lastRechargeInfo=t);var o={do:i,data:t},r=JSON.stringify(o);1==this.sockSend(r)&&this.log("[WS SEND send] "+r),0!=e.Global.msgTimeOutSec&&this.setMsgTimeout(e.Global.msgTimeOutSec,"sendTimeOut")}else this.dispatch(t)},t.prototype.sendPlat=function(e,t){if(null!=e)if(1!=t&&this.sockType!=SockType.LOOPBACK){var n=e.GetType?e.GetType():e.cmd_name||e.do;e.cmd_name=n;var i=JSON.stringify(e);1==this.sockSend(i)?this.log("[WS SEND sendPlat] "+i):this.log("[WS SEND sendPlat Error] "+i)}else this.dispatch(e)},t.prototype.sendEcho=function(){var e=(new Date).getTime();e-this.lastEchoTime>=3e3&&(this.lastEchoTime=e,this.sockSend("{}"))},t.prototype.close=function(t){void 0===t&&(t=!0),this.sockType!=SockType.LOOPBACK&&(this.isConnected=0,null!=this.mysocket&&(this.mysocket.sockType==SockType.NORMAL?(this.getSocket().onopen=null,this.getSocket().onmessage=null,this.getSocket().onclose=null,this.getSocket().onerror=null):(this.getSocket().removeEventListener("socketData",this.onReceiveMessage,this),this.getSocket().removeEventListener("connect",this.onSocketOpen,this),this.getSocket().removeEventListener("close",this.onSocketClose,this),this.getSocket().removeEventListener("ioError",this.onSocketError,this)),global||egret&&(egret.MainContext.instance.stage.removeEventListener(egret.Event.DEACTIVATE,this.onDeactive,this),egret.MainContext.instance.stage.removeEventListener(egret.Event.ACTIVATE,this.onActive,this)),this.warn("[WS CLOSING close] "+Math.floor((new Date).getTime()/1e3)+":"+this.mysocket.sockType+":"+e.Global.compressType+":"+this._reconnectTimes+":"+this.wsurl),null==this.sendCache?this.sendCache=new Array:this.sendCache.length>1&&(this.sendCache=[this.sendCache.pop()]),this.getSocket().close(),this.mysocket=null),this.timerActive&&(clearInterval(this.timerActive),this.timerActive=null),this.needReconnect=t,this.isConnecting=!1)},t.GatewayWrapperName="Pmd.UserJsMessageForwardUserPmd_CS",t}();e.JsonSocket=i}(uniLib||(uniLib={}));var SockType;!function(e){e[e.NORMAL=0]="NORMAL",e[e.EGRET=1]="EGRET",e[e.LOOPBACK=2]="LOOPBACK"}(SockType||(SockType={}));var SockByinaryType;!function(e){e[e.STRING=0]="STRING",e[e.BINARY=1]="BINARY"}(SockByinaryType||(SockByinaryType={}));var Pmd;!function(e){e.OnCommonChatUserPmd_CS=function(t){switch(t.chatpos){case e.CommonChatUserPmd_CS.ChatPos.ChatPos_None:case e.CommonChatUserPmd_CS.ChatPos.ChatPos_Normal:uniLib.Global.dispatchEvent(uniLib.ZqEvent.CHAT_ROOM,t);break;case e.CommonChatUserPmd_CS.ChatPos.ChatPos_Private:uniLib.Global.dispatchEvent(uniLib.ZqEvent.CHAT_PRIVATE,t);break;case e.CommonChatUserPmd_CS.ChatPos.ChatPos_Sys:uniLib.Global.dispatchEvent(uniLib.ZqEvent.CHAT_SYSTEM,t);break;case e.CommonChatUserPmd_CS.ChatPos.ChatPos_Gm:uniLib.Global.dispatchEvent(uniLib.ZqEvent.CHAT_GM,t);break;case 256:uniLib.Global.dispatchEvent(uniLib.ZqEvent.CHAT_HORN,t);break;case 512:uniLib.Global.dispatchEvent(uniLib.ZqEvent.CHAT_HUNDRED,t);break;case 1024:uniLib.Global.dispatchEvent(uniLib.ZqEvent.CHAT_COMMONGAME,t);break;case 2048:uniLib.Global.dispatchEvent(uniLib.ZqEvent.CHAT_LOBBY,t);break;case e.CommonChatUserPmd_CS.ChatPos.ChatPos_Important:uniLib.Global.dispatchEvent(uniLib.ZqEvent.CHAT_IMPORTANT,t)}},e.OnPrivateChatUserPmd_CS=function(e){uniLib.Global.dispatchEvent(uniLib.ZqEvent.CHAT_PRIVATE,e)},e.OnGMCommandListChatUserPmd_S=function(e){uniLib.Global.dispatchEvent(uniLib.ZqEvent.GM_INFO,e)},e.OnMessageBoxLoginUserPmd_S=function(e){var t=new uniLib.MsgBox(e.info);uniLib.PopUpMgr.addPopUp(t,null,!0,!0)}}(Pmd||(Pmd={}));var uniLib;!function(e){var t=function(){return function(){}}();e.AppConfig=t}(uniLib||(uniLib={}));var ExtData=function(){return function(){}}(),uniLib;!function(e){var t=function(){return function(){}}();e.ShareData=t}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){function t(){}return Object.defineProperty(t,"ol_Time",{get:function(){return this._ol_Time},set:function(e){this._ol_Time=e},enumerable:!0,configurable:!0}),Object.defineProperty(t,"fangka",{get:function(){return this._fangka},set:function(t){this._fangka!=t&&(this._fangka=t,e.Global.dispatchEvent(e.ZqEvent.USER_INFO,e.UserInfoEnum.FANGKA))},enumerable:!0,configurable:!0}),Object.defineProperty(t,"diamond",{get:function(){return this._diamond},set:function(t){this._diamond!=t&&(this._diamond=t,e.Global.dispatchEvent(e.ZqEvent.USER_INFO,e.UserInfoEnum.DIAMOND))},enumerable:!0,configurable:!0}),t.init=function(e,t){void 0===t&&(t=!0),this.uid=e.uid,e.headUrl||e.headurl?this._headUrl=e.headUrl||e.headurl:this._headUrl="",this.nickName=e.nickName||e.nickname,this.gender=e.gender,this.platId=e.platId,this.subPlatId=e.subPlatId,1==t&&e.remainder&&(this._chips=e.remainder,this._goldChips=e.remainder),e.hasOwnProperty("chips")&&(this._chips=e.chips),e.goldcoin&&(this._goldChips=e.goldcoin),e.trailscore&&(this._chips=e.trailscore),e.bankChips&&(this._bankChips=e.bankChips),e.sumRecharge&&(this.sumRecharge=e.sumRecharge),e.signature&&(this.signature=e.signature),e.hasOwnProperty("giftCoupon")?this._giftCoupon=e.giftCoupon:e.hasOwnProperty("ticket")&&(this._giftCoupon=e.ticket),e.trailcoin&&(this._freeChips=e.trailcoin),e.hasOwnProperty("fangka")?this._fangka=e.fangka:e.hasOwnProperty("card")&&(this.fangka=e.card),e.hasOwnProperty("diamond")&&(this._diamond=e.diamond)},Object.defineProperty(t,"chips",{get:function(){return this._chips},set:function(t){this._chips!=t&&(this._chips=t,e.Global.dispatchEvent(e.ZqEvent.USER_INFO,e.UserInfoEnum.CHIPS))},enumerable:!0,configurable:!0}),Object.defineProperty(t,"goldChips",{get:function(){return this._goldChips},set:function(t){this._goldChips!=t&&(this._goldChips=t,e.Global.dispatchEvent(e.ZqEvent.USER_INFO,e.UserInfoEnum.GOLDCHIPS))},enumerable:!0,configurable:!0}),Object.defineProperty(t,"freeChips",{get:function(){return this._freeChips},set:function(t){this._freeChips!=t&&(this._freeChips=t,e.Global.dispatchEvent(e.ZqEvent.USER_INFO,e.UserInfoEnum.FREECHIPS))},enumerable:!0,configurable:!0}),Object.defineProperty(t,"headUrl",{get:function(){return this._headUrl},set:function(t){this._headUrl!=t&&(this._headUrl=t,e.Global.dispatchEvent(e.ZqEvent.USER_INFO,e.UserInfoEnum.HEADURL))},enumerable:!0,configurable:!0}),Object.defineProperty(t,"platPoint",{get:function(){return this._platPoint},set:function(t){this._platPoint=t,e.Global.dispatchEvent(e.ZqEvent.USER_INFO,e.UserInfoEnum.PLAT_POINT)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"bankChips",{get:function(){return this._bankChips},set:function(t){this._bankChips=t,e.Global.dispatchEvent(e.ZqEvent.USER_INFO,e.UserInfoEnum.BANK_CHIPS)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"nickname",{get:function(){return this.nickName},set:function(t){this.nickName=t,e.Global.dispatchEvent(e.ZqEvent.USER_INFO,e.UserInfoEnum.NICKNAME)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"giftCoupon",{get:function(){return this._giftCoupon?this._giftCoupon:0},set:function(t){this._giftCoupon=t,e.Global.dispatchEvent(e.ZqEvent.USER_INFO,e.UserInfoEnum.GIFTCOUPON)},enumerable:!0,configurable:!0}),t._chips=0,t._goldChips=0,t._freeChips=0,t._giftCoupon=0,t._ol_Time=-1,t.slipStatus=1,t._platPoint=0,t}();e.UserInfo=t}(uniLib||(uniLib={}));var game;!function(e){var t=function(){return function(){}}();e.WXShareBackVo=t}(game||(game={}));var uniLib;!function(e){var t=function(){return function(){this.shareImageUrl="",this.shareImageData=""}}();e.WXShareVo=t}(uniLib||(uniLib={}));var uniLib;!function(uniLib){var BrowersUtils=function(){function BrowersUtils(){}return BrowersUtils.reload=function(){1==uniLib.Global.isH5&&window.location.reload()},BrowersUtils.redirect=function(e){location.href=e},BrowersUtils.isLocal=function(){return location.href.indexOf("192.168")>=0},BrowersUtils.prototype.isNull=function(e){return null==e||(e instanceof String&&(null==e||e.length),!1)},BrowersUtils.isWechat=function(){if(1==uniLib.Global.isWxGame())return!1;var e=navigator.userAgent.toString();return null!=e.match(/MicroMessenger/i)&&"MicroMessenger"==e.match(/MicroMessenger/i).toString()},BrowersUtils.getXHR=function(){return window.XMLHttpRequest?new XMLHttpRequest:window.ActiveXObject?eval('new ActiveXObject("MSXML2.XMLHTTP")'):egret&&egret.URLLoader?new egret.URLLoader:void 0},BrowersUtils.isPC=function(){for(var e=navigator.userAgent.toString(),t="Android;iPhone;SymbianOS;Windows Phone;iPad;iPod".split(";"),n=!0,i=0;i<t.length;i++)if(0<e.indexOf(t[i])){n=!1;break}return n},BrowersUtils.isAndroid=function(){var e=navigator.userAgent.toString();return e.indexOf("Android")>-1||e.indexOf("Linux")>-1},BrowersUtils.GetRequest=function(e,t){var n,i=null;if(uniLib.Global.isH5){n=null!=t&&""!=t?t:location.search;var o=new RegExp("[?&]"+e+"=([^&]+)","gi").exec(n);if(null!=o)try{i=decodeURIComponent(decodeURIComponent(o[1]))}catch(e){try{i=decodeURIComponent(o[1])}catch(e){i=o[1]}}}return i},BrowersUtils.GetRequests=function(e){n=e||location.search;var t=new Object;if(n){if(0==n.indexOf("?"))var n=n.substr(1);for(var i=n.split("&"),o=0;o<i.length;o++)t[i[o].split("=")[0]]=decodeURIComponent(i[o].split("=")[1])}return t},BrowersUtils.requestFullScreen=function(){},BrowersUtils.exitFullscreen=function(){},BrowersUtils.setExtData=function(e,t,n){void 0===n&&(n=!1),null==this.extData&&(this.extData=new ExtData),this.extData[e]=t},BrowersUtils.getExtData=function(key){if(void 0===key&&(key=""),null==this.inExtData)try{this.inExtData=JSON.parse(this.GetRequest("extdata"))}catch(e){this.inExtData=eval("("+this.GetRequest("extdata")+")")}return this.inExtData?key?this.inExtData[key]:this.inExtData:null},BrowersUtils.resetShareInfo=function(){this.extData=new ExtData,this.extData.inviter=uniLib.NetMgr.UID.toString(),this.setShareInfo()},BrowersUtils.setShareInfo=function(e,t,n,i,o){i&&o&&this.setExtData(i,o);var r,a="http://login.publish.bwgame.com.cn:8080/";"0"==(r=location.href.indexOf("h5.publish.bwgame.com.cn")>=0?"1":"0")&&(a="http://h5sdk.zqbconnect.com/");var s=new BodyMenuShareTimeline;t&&!uniLib.StringUtils.stringIsNullOrEmpty(t)?s.title=t:s.title=uniLib.Global.shareData.title,uniLib.Global.shareData.link?s.link=uniLib.Global.shareData.link:s.link="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+uniLib.Global.appId+"&redirect_uri="+a+uniLib.Global.lobbyGameId+"/wechat_"+uniLib.Global.platInfo.platid+"/login_request?extdata="+JSON.stringify(this.extData)+"&response_type=code&scope=snsapi_base&state="+r+"connect_redirect=1#wechat_redirect",e&&!uniLib.StringUtils.stringIsNullOrEmpty(e)?s.imgUrl=e:s.imgUrl=uniLib.Global.shareData.imgUrl,s.success=function(){uniLib.Global.dispatchEvent(uniLib.ZqEvent.SHARE,1)},wx.onMenuShareTimeline(s);var l=new BodyMenuShareAppMessage;t&&!uniLib.StringUtils.stringIsNullOrEmpty(t)?l.title=t:l.title=uniLib.Global.shareData.title,n&&!uniLib.StringUtils.stringIsNullOrEmpty(n)?l.desc=n:l.desc=uniLib.Global.shareData.desc,uniLib.Global.shareData.link?l.link=l.dataUrl=uniLib.Global.shareData.link:l.dataUrl=l.link="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+uniLib.Global.appId+"&redirect_uri="+a+uniLib.Global.lobbyGameId+"/wechat_"+uniLib.Global.platInfo.platid+"/login_request?extdata="+JSON.stringify(this.extData)+"&response_type=code&scope=snsapi_base&state="+r+"&connect_redirect=1#wechat_redirect",l.success=function(){uniLib.Global.dispatchEvent(uniLib.ZqEvent.SHARE,2)},e&&!uniLib.StringUtils.stringIsNullOrEmpty(e)?l.imgUrl=e:l.imgUrl=uniLib.Global.shareData.imgUrl,wx.onMenuShareAppMessage(l)},BrowersUtils.getCookie=function(e){if(uniLib.Global.isH5){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));if(null!=t)return t[2]}return null},BrowersUtils.setCookie=function(e,t,n){if(uniLib.Global.isH5){t instanceof Object&&(t=JSON.stringify(t));var i=new Date;i.setDate(i.getDate()+n),document.cookie=e+"="+t+(null==n?"":";expires="+i.toUTCString())}},BrowersUtils.delCookie=function(e){if(uniLib.Global.isH5)if(e){var t=new Date;t.setTime(t.getTime()-1);var n=this.getCookie(e);null!=n&&(document.cookie=e+"="+n+";expires="+t.toUTCString())}else{var i=new Date;i.setTime(-1e3);for(var o=document.cookie.split("; "),r=0;r<o.length;r++){var a=o[r].split("=");document.cookie=a[0]+"=''; expires="+i.toUTCString()}}},BrowersUtils.getLocationUrl=function(){if(uniLib.Global.isH5)return location.href},BrowersUtils.getPlatLibDir=function(){if(uniLib.Global.isH5)return location.href.substring(0,uniLib.StringUtils.getPosition(location.href,"/",3))+"/"+uniLib.Global.thirdPlatDir},BrowersUtils.redirectUrl=function(e){uniLib.Global.isH5&&(location.href=e)},BrowersUtils.parentRedirectUrl=function(e){uniLib.Global.isH5&&(parent.window.location.href=e)},BrowersUtils.browersType=function(){var e=window.navigator.userAgent.toLowerCase();return"micromessenger"==""+e.match(/MicroMessenger/i)?"wechat":""+e.match(/windows nt/i)=="windows nt"?"windows":""+e.match(/iphone/i)=="iphone"?"ios":""+e.match(/android/i)=="android"?"android":""+e.match(/ipad/i)=="ipad"?"ipad":""+e.match(/linux/i)=="linux"?"linux":""+e.match(/mac/i)=="mac"?"mac":""+e.match(/ucbrower/i)=="ucbrower"?"ucbrower":void uniLib.Console.log("未知系统类型")},BrowersUtils.platformType=function(){var e=window.navigator.userAgent.toLowerCase();return""+e.match(/micromessenger/i)=="micromessenger"?"micromessenger":""+e.match(/qzone/i)=="qzone"?"qzone":""+e.match(/weibo/i)=="weibo"?"weibo":""+e.match(/qq/i)=="qq"?"qq":""+e.match(/renren/i)=="renren"?"renren":""+e.match(/txmicroblog/i)=="txmicroblog"?"txmicroblog":""+e.match(/douban/i)=="douban"?"douban":"other"},BrowersUtils.prototype.staticisVertical=function(){return 90!=window.orientation},BrowersUtils.LoadJses=function(e,t,n){var i=e.length,o=this,r=0,a=function(){++r==i?t&&t.call(n):o.LoadJS(e[r].id,e[r].url,a,o)};this.LoadJS(e[0].id,e[0].url,a,o)},BrowersUtils.removeJs=function(e){var t=document.getElementById(e),n=document.getElementsByTagName("HEAD").item(0);document.createElement("script");t&&n.removeChild(t)},BrowersUtils.LoadJS=function(e,t,n,i,o){this._downTryCount=0;var r,a=uniLib.GameModuleUtils.gameNativeFolder+t;if(r=uniLib.StringUtils.isNetUrl(t)?t:uniLib.GameModuleUtils.gameRemotePaths&&uniLib.GameModuleUtils.gameRemotePaths.length>0?uniLib.Global.CdnDomains[0]+uniLib.GameModuleUtils.gameRemotePaths[0]+t:t,uniLib.Global.isH5){var s=document.getElementById(e),l=document.getElementsByTagName("HEAD").item(0),c=document.createElement("script");s&&l.removeChild(s),c.id=e,c.type="text/javascript",c.src=r,l.appendChild(c),c.onerror=function(){null!=i&&(s&&l.removeChild(s),o?i.call(o,e):i(e))},c.onload=c.onreadystatechange=function(){this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||null!=n&&(o?n.call(o,e):n(e))}}else if(egret.hasDefinition("egret_native")&&!egret_native.isFileExists(a))this.loadNative(r,a,n,i,o,e);else{console.error("#native file exits#");try{uniLib.getDefinitionByName("require")(a),null!=n&&(o?n.call(o,e):n(e))}catch(e){uniLib.Console.warn("网络原因下载失败了"),egret_native.deleteUpdateFile(a)}}},BrowersUtils.loadNative=function(e,t,n,i,o,r){var a=egret.PromiseObject.create(),s=this;a.onSuccessFunc=function(){console.error("#load native success#"),uniLib.getDefinitionByName("require")(t),null!=n&&(o?n.call(o,r):n(r))},a.onErrorFunc=function(){console.error("#load native error# downTryCount:"+this._downTryCount),s._downTryCount<3?(s._downTryCount++,s.loadNative(e,t,n,i,o,r)):i&&(o?i.call(o,r):i(r))},console.error("remoteUrl:"+e),egret_native.download(e,t,a)},BrowersUtils.extData=new ExtData,BrowersUtils._downTryCount=0,BrowersUtils}();uniLib.BrowersUtils=BrowersUtils}(uniLib||(uniLib={}));var uniLib;!function(uniLib){var CompressUtil=function(){function CompressUtil(){}return CompressUtil.init=function(e,t,n){void 0===e&&(e=CompressType.NONE),uniLib.Global.compressType=e,t&&t.call(n)},CompressUtil.compressByType=function(e,t){switch(t){case CompressType.GZIP:return pako.deflate(e);case CompressType.FLATE:return pako.deflate(e,{raw:!0})}},CompressUtil.uncompressByType=function(e,t){switch(t){case CompressType.GZIP:return pako.inflate(e,{to:"string"});case CompressType.FLATE:return pako.inflate(e,{to:"string",raw:!0})}},CompressUtil.stringToUint=function(e){for(var t=encodeURIComponent(e).split(""),n=[],i=0;i<t.length;i++)n.push(t[i].charCodeAt(0));return new Uint8Array(n)},CompressUtil.uintToString=function(e){var t=String.fromCharCode.apply(null,e);return decodeURIComponent(t)},CompressUtil.char2buf=function(e){for(var t=new ArrayBuffer(2*e.length),n=new Uint16Array(t),i=e.split(""),o=0;o<i.length;o++)n[o]=i[o].charCodeAt();return t},CompressUtil.buf2char=function(buf){for(var out="",u16a=new Uint16Array(buf),single,i=0;i<u16a.length;i++){for(single=u16a[i].toString(16);single.length<4;)single="0".concat(single);out+="\\u"+single}return eval("'"+out+"'")},CompressUtil.Utf8ArrayToStr=function(e){var t,n,i,o,r,a;for(t="",i=e.length,n=0;n<i;)switch((o=e[n++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=String.fromCharCode(o);break;case 12:case 13:r=e[n++],t+=String.fromCharCode((31&o)<<6|63&r);break;case 14:r=e[n++],a=e[n++],t+=String.fromCharCode((15&o)<<12|(63&r)<<6|(63&a)<<0)}return t},CompressUtil.stringToArray=function(e,t){for(var n=0;n<e.length;++n)t[n]=255&e.charCodeAt(n);return t},CompressUtil.arrayLikeToArray=function(e,t){for(var n=0;n<e.length;n++)t[n]=e[n];return t},CompressUtil.stringToCodePoints=function(e){for(var t=[],n=0,i=e.length;n<e.length;){var o=e.charCodeAt(n);if(uniLib.NumberUtils.inRange(o,55296,57343))if(uniLib.NumberUtils.inRange(o,56320,57343))t.push(65533);else if(n==i-1)t.push(65533);else{var r=e.charCodeAt(n+1);if(uniLib.NumberUtils.inRange(r,56320,57343)){var a=1023&o,s=1023&r;n+=1,t.push(65536+(a<<10)+s)}else t.push(65533)}else t.push(o);n+=1}return t},CompressUtil.encodeUTF8=function(e){for(var t=0,n=this.stringToCodePoints(e),i=[];n.length>t;){var o=n[t++];if(uniLib.NumberUtils.inRange(o,55296,57343))uniLib.Console.error("encode error:"+o);else if(uniLib.NumberUtils.inRange(o,0,127))i.push(o);else{var r,a;for(uniLib.NumberUtils.inRange(o,128,2047)?(r=1,a=192):uniLib.NumberUtils.inRange(o,2048,65535)?(r=2,a=224):uniLib.NumberUtils.inRange(o,65536,1114111)&&(r=3,a=240),i.push(uniLib.NumberUtils.div(o,Math.pow(64,r))+a);r>0;){var s=uniLib.NumberUtils.div(o,Math.pow(64,r-1));i.push(128+s%64),r-=1}}}return new Uint8Array(i)},CompressUtil.base64encode=function(e){try{this.b64pad}catch(e){this.b64pad=""}var t="";try{e=encodeURIComponent(e)}catch(e){uniLib.Console.error("error "+e.toString())}for(var n=e.length,i=0;i<n;i+=3)for(var o=e.charCodeAt(i)<<16|(i+1<n?e.charCodeAt(i+1)<<8:0)|(i+2<n?e.charCodeAt(i+2):0),r=0;r<4;r++)8*i+6*r>8*e.length?t+=this.b64pad:t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(o>>>6*(3-r)&63);return t},CompressUtil.base64decode=function(e){var t,n,i,o,r,a,s,l=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1);for(a=e.length,r=0,s="";r<a;){do{t=l[255&e.charCodeAt(r++)]}while(r<a&&-1==t);if(-1==t)break;do{n=l[255&e.charCodeAt(r++)]}while(r<a&&-1==n);if(-1==n)break;s+=String.fromCharCode(t<<2|(48&n)>>4);do{if(61==(i=255&e.charCodeAt(r++)))return s;i=l[i]}while(r<a&&-1==i);if(-1==i)break;s+=String.fromCharCode((15&n)<<4|(60&i)>>2);do{if(61==(o=255&e.charCodeAt(r++)))return s;o=l[o]}while(r<a&&-1==o);if(-1==o)break;s+=String.fromCharCode((3&i)<<6|o)}return s=decodeURIComponent(s)},CompressUtil.compressStr=["","flate","zlib","gzip","lzw"],CompressUtil.b64pad="",CompressUtil}();uniLib.CompressUtil=CompressUtil;var CompressType;!function(e){e[e.NONE=0]="NONE",e[e.FLATE=1]="FLATE",e[e.ZLIB=2]="ZLIB",e[e.GZIP=3]="GZIP",e[e.LZW=4]="LZW"}(CompressType=uniLib.CompressType||(uniLib.CompressType={}))}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){function e(){}return Object.defineProperty(e,"appConfig",{get:function(){return this._appConfig},enumerable:!0,configurable:!0}),e.initAppConfig=function(e){return this._appConfig||(this._appConfig=e),this._appConfig},e}();e.ConfigUtils=t}(uniLib||(uniLib={}));var uniLib;!function(e){var t;!function(e){e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARN=2]="WARN",e[e.ERROR=3]="ERROR",e[e.DEBUG_SERVER=4]="DEBUG_SERVER",e[e.INFO_SERVER=5]="INFO_SERVER",e[e.WARN_SERVER=6]="WARN_SERVER",e[e.ERROR_SERVER=7]="ERROR_SERVER"}(t=e.LOGLEVEL||(e.LOGLEVEL={}));var n=function(){function n(){}return n.setLogLevel=function(e){1==this.isDevMode?this.LogLevel=t.DEBUG:(this.LogLevel=e,egret.Logger.logLevel=egret.Logger.INFO)},n.init=function(t,n){e.Global.isH5,this.isDevMode=t,this.setLogLevel(n)},n.logToServer=function(t,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];if(!e.Global.isH5||1!=e.BrowersUtils.isLocal()){var n=this.LOG_LEVEL_STR[t]+"\t"+n;i&&i.forEach(function(e){e&&(n+=e)}),this.err_rqst=new e.HttpRequest,this.err_rqst.open(e.Global.logUrl),this.err_rqst.send(n)}},n.getLocalLevel=function(e){return e>=t.DEBUG_SERVER&&(e=this.LogLevel-t.DEBUG_SERVER),e},n.log=function(n){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];var r=this.getLocalLevel(this.LogLevel);r<=t.DEBUG&&((null==n||void 0==n||"string"==typeof n&&""==n)&&this.error("日志不能为空,请加标识头,不能再坑队友了!"),e.Global.isH5?console.log((new Date).toTimeString().split(" ")[0],"LOG",n,i):console.log(n,i),r!=this.LogLevel&&this.logToServer(r,n,i))},Object.defineProperty(n,"logEnable",{get:function(){return this.getLocalLevel(this.LogLevel)>=t.DEBUG},enumerable:!0,configurable:!0}),n.debug=function(n){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];var r=this.getLocalLevel(this.LogLevel);r<=t.DEBUG&&((null==n||void 0==n||"string"==typeof n&&""==n)&&this.error("日志不能为空,请加标识头,不能再坑队友了!"),e.Global.isH5?console.log((new Date).toTimeString().split(" ")[0],"DEBUG",n,i):console.log(n,i),r!=this.LogLevel&&this.logToServer(r,n,i))},Object.defineProperty(n,"debugEnable",{get:function(){return this.getLocalLevel(this.LogLevel)>=t.DEBUG},enumerable:!0,configurable:!0}),n.info=function(n){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];var r=this.getLocalLevel(this.LogLevel);r<=t.INFO&&((null==n||void 0==n||"string"==typeof n&&""==n)&&this.error("日志不能为空,请加标识头,不能再坑队友了!"),e.Global.isH5?console.log((new Date).toTimeString().split(" ")[0],"INFO",n,i):console.log(n,i),r!=this.LogLevel&&this.logToServer(r,n,i))},Object.defineProperty(n,"infoEnable",{get:function(){return this.getLocalLevel(this.LogLevel)>=t.INFO},enumerable:!0,configurable:!0}),n.warn=function(n){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];var r=this.getLocalLevel(this.LogLevel);r<=t.WARN&&((null==n||void 0==n||"string"==typeof n&&""==n)&&this.error("日志不能为空,请加标识头,不能再坑队友了!"),e.Global.isH5?console.log((new Date).toTimeString().split(" ")[0],"WARN",n,i):console.log(n,i),r!=this.LogLevel&&this.logToServer(r,n,i))},Object.defineProperty(n,"warnEnable",{get:function(){return this.getLocalLevel(this.LogLevel)>=t.WARN},enumerable:!0,configurable:!0}),n.error=function(n){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];var r=this.getLocalLevel(this.LogLevel);r<=t.ERROR&&((null==n||void 0==n||"string"==typeof n&&""==n)&&this.error("日志不能为空,请加标识头,不能再坑队友了!"),e.Global.isH5?console.error((new Date).toTimeString().split(" ")[0],"ERROR",n,i):console.log(n,i),r!=this.LogLevel&&this.logToServer(r,n,i));var a=n;i&&i.forEach(function(e){e&&(a+=e)}),e.DebugView&&e.DebugView.Instance.addLog(a)},Object.defineProperty(n,"errorEnable",{get:function(){return this.getLocalLevel(this.LogLevel)>=t.ERROR},enumerable:!0,configurable:!0}),n.isDevMode=!1,n.LOG_LEVEL_STR=["[DEBUG]","[INFO]","[WARN]","[ERROR]"],n.LogLevel=7,n}();e.Console=n}(uniLib||(uniLib={}));var uniLib;!function(e){function t(e){if(!e)return null;var t=i[e];if(t)return t;var n=e.split("."),o=n.length;t=global;for(var r=0;r<o;r++)if(!(t=t[n[r]]))return null;return i[e]=t,t}function n(e){var t=typeof e;if(!e||"object"!=t&&!e.prototype)return t;var n=e.prototype?e.prototype:Object.getPrototypeOf(e);if(n.hasOwnProperty("__class__"))return n.__class__;var i=n.constructor.toString().trim(),o=i.indexOf("("),r=i.substring(9,o);return Object.defineProperty(n,"__class__",{value:r,enumerable:!1,writable:!0}),r}var i={};e.getDefinitionByName=t,e.hasDefinition=function(e){return!!t(e)},e.test=function(e){var t="^"+e+".";for(var n in i)n.match(t)&&console.error("匹配成功:"+n)},e.delDefinitionByName=function(e){if(!e)return null;var t="^"+e+".";if(-1==e.indexOf("."))for(var n in i)n.match(t)&&(i[n]=null,delete i[n]);else i[e]=null,delete i[e]},e.getQualifiedSuperclassName=function(e){if(!e||"object"!=typeof e&&!e.prototype)return null;var t=e.prototype?e.prototype:Object.getPrototypeOf(e),i=Object.getPrototypeOf(t);if(!i)return null;var o=n(i.constructor);return o||null},e.getQualifiedClassName=n}(uniLib||(uniLib={}));var uniLib;!function(uniLib){var DeviceUtils=function(){function DeviceUtils(){}return DeviceUtils.vibrate=function(e){void 0===e&&(e=1e3),navigator.vibrate?navigator.vibrate(e):navigator.webkitVibrate&&navigator.webkitVibrate(e)},DeviceUtils.uploadFile=function(file){if("undefined"!=typeof FileReader&&/image/i.test(file.type)){var reader=new FileReader,self=this;reader.onload=function(){var result=document.getElementById("result");result.innerHTML='<img id="photoImg" src="'+this.result+'" alt="" />';var texture=new egret.Texture;null!=egret.BitmapData?texture._setBitmapData(eval("new egret.BitmapData(document.getElementById('photoImg'))")):texture._setBitmapData(document.getElementById("photoImg")),DeviceUtils.srcImg.texture=texture},reader.readAsDataURL(file)}else console.error("抱歉！当前系统不支持此功能！")},DeviceUtils.traverseFiles=function(e){void 0!==e&&e.length>0&&DeviceUtils.uploadFile(e[0])},DeviceUtils.fileUpload=function(e){this.srcImg=e;var t=document.getElementById("files-upload");t.click();var n=this;t.addEventListener("change",function(){n.traverseFiles(this.files)},!1)},DeviceUtils.getMic=function(){},DeviceUtils.getScreen=function(){},DeviceUtils.callPhone=function(e){try{window.open("tel:"+e,"_self")}catch(e){}},DeviceUtils.sendMessage=function(e){try{window.open("sms:"+e,"_self")}catch(e){}},DeviceUtils.getCurUrl=function(){try{return location.href}catch(e){}},DeviceUtils.srcImg=new egret.Bitmap,DeviceUtils.curAngle=Number(window.orientation),DeviceUtils}();uniLib.DeviceUtils=DeviceUtils}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){function t(){}return t.createBitmapByName=function(e){var t=new egret.Bitmap,n=RES.getRes(e);return t.texture=n,t},t.createMovieClicp=function(e,t){var n=RES.getRes(e+"_json"),i=RES.getRes(e+"_png"),o=new egret.MovieClipDataFactory(n,i);return new egret.MovieClip(o.generateMovieClipData(t))},t.createMask=function(t,n,i,o){void 0===t&&(t=.3),void 0===o&&(o=0);var r=new egret.Sprite;return r.graphics.clear(),r.graphics.beginFill(o,t),r.graphics.drawRect(0,0,n||e.Global.screenWidth,i||e.Global.screenHeight),r.graphics.endFill(),r},t.createShape=function(t,n,i,o){void 0===t&&(t=.3),void 0===o&&(o=0);var r=new egret.Shape;return r.graphics.clear(),r.graphics.beginFill(o,t),r.graphics.drawRect(0,0,n||e.Global.screenWidth,i||e.Global.screenHeight),r.graphics.endFill(),r},t.createCircle=function(e,t,n){void 0===e&&(e=.3),void 0===n&&(n=0);var i=new egret.Sprite;return i.graphics.clear(),i.graphics.beginFill(n,e),i.graphics.drawCircle(0,0,t),i.graphics.endFill(),i},t.createParticle=function(e){var t,n=RES.getRes(e+"_png"),i=RES.getRes(e+"_json");return particle&&particle.GravityParticleSystem&&(t=new particle.GravityParticleSystem(n,i)),t},t.createDragonBonesDisplay=function(t,n,i,o,r){var a=RES.getRes(t);if(i&&null!=i)var s=RES.getRes(n),l=RES.getRes(i);else var s=RES.getRes(n+"_json"),l=RES.getRes(n+"_png");e.StringUtils.stringIsNullOrEmpty(o)&&(o="armature");var c;if(dragonBones)if(egret.Capabilities.engineVersion<"5.0"){var u=new dragonBones.EgretFactory;u.addDragonBonesData(dragonBones.DataParser.parseDragonBonesData(a)),u.addTextureAtlas(new dragonBones.EgretTextureAtlas(l,s)),r?(c=u.buildFastArmature(o)).enableAnimationCache(r):c=u.buildArmature(o)}else dragonBones.EgretFactory.factory.parseDragonBonesData(a),dragonBones.EgretFactory.factory.parseTextureAtlasData(s,l),r?(c=u.buildFastArmature(o)).enableAnimationCache(r):c=dragonBones.EgretFactory.factory.buildArmature(o);return c},t.runDragonBonesArmature=function(t,n,i,o){void 0===o&&(o=!0),null!=t?(dragonBones.WorldClock.clock.add(t),o?t.animation.gotoAndPlay(n,0,-1,i,0):t.animation.gotoAndStop(n,0)):e.Console.error("armature不能为空")},t.destoryDragonBonesArmature=function(t,n){null!=t?(dragonBones.WorldClock.clock.remove(t),t.animation.stop(),t.dispose()):e.Console.error("armature不能为空")},t.createTextLabel=function(e,t,n,i,o,r,a,s,l,c,u,h){void 0===e&&(e=0),void 0===t&&(t="left"),void 0===n&&(n="none"),void 0===i&&(i=0),void 0===o&&(o=0),void 0===r&&(r=0),void 0===a&&(a=0),void 0===s&&(s=0),void 0===l&&(l=0),void 0===c&&(c=0),void 0===u&&(u=0),void 0===h&&(h=0);var d=new egret.TextField;return d.textColor=e,d.textAlign=t,d.fontFamily="微软雅黑",d.text=n,d.size=i,0!=o&&(d.width=o),0!=r&&(d.height=r),0!=a&&a!=s&&(d.strokeColor=a,d.stroke=s),d.rotation=u,0!=h&&(d.skewX=h),d.x=l,d.y=c,d},t.removeFromParent=function(e){e&&e.parent&&e.parent.removeChild(e)},t.getChildIndex=function(e){return e&&e.parent?e.parent.getChildIndex(e):0},t.removeAllChildren=function(e){for(;e&&e.numChildren&&e.numChildren>0;)this.removeFromParent(e.getChildAt(0))},t.catchScreen=function(e,t){var n=new egret.RenderTexture;return n.drawToTexture(e),n.toDataURL("image/png",t||new egret.Rectangle(0,0,e.width,e.height))},t.catchScreenToTex=function(e,t,n){var i=new egret.RenderTexture;return i.drawToTexture(e,t,n),i},t.lightArea=function(t,n){void 0===n&&(n=.8);var i=new egret.DisplayObjectContainer,o=e.DisplayUtils.createShape(n,e.Global.screenWidth,e.Global.screenHeight);i.addChild(o),i.addChild(t),t.blendMode=egret.BlendMode.ERASE;var r=new egret.RenderTexture;r.drawToTexture(i);var a=new egret.Bitmap;return a.texture=r,a},t.playTweenGroup=function(e,t){if(t)for(var n in e.items)e.items[n].props={loop:!0};e.play()},t.stopTweenGroup=function(e){if(e.items)for(var t in e.items)e.items[t].props={loop:!1};e.stop()},t.ticketStarted=!1,t}();e.DisplayUtils=t}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){function e(){}return e.MovieClip="MovieClip",e.ARMATURE="Armature",e}();e.DragonType=t;var n=function(){function n(){}return n.createFastDragonBones=function(e,t,n,i,o){void 0===n&&(n="armature");var r;return 0==dragonBones.hasMovieGroup(i)&&dragonBones.addMovieGroup(RES.getRes(e),RES.getRes(t),i),r=dragonBones.buildMovie(n,i),o&&r.enableAnimationCache(o),r},n.showFastDragon=function(i,o,r,a,s,l,c,u,h){void 0===i&&(i=""),void 0===o&&(o=""),void 0===r&&(r=t.MovieClip),void 0===a&&(a=0),void 0===s&&(s=0),void 0===c&&(c=0);var d;if(""!=i){if(!(d=n.createFastDragonBones(i+"_ske_dbmv",i+"_tex_png",r,i)))return;return d.x=null==a?e.Global.screenWidth-d.width>>1:a,d.y=null==s?e.Global.screenHeight-d.height>>1:s,null==l&&(l=e.SceneMgr.instance.currentScene?e.SceneMgr.instance.currentScene.effectLayer:egret.MainContext.instance.stage),u&&(d.timeScale=u),l.addChild(d),null==this.fastDragonGroup[i+"_"+l.hashCode]&&(this.fastDragonGroup[i+"_"+l.hashCode]={}),null==this.fastDragonGroup[i+"_"+l.hashCode][o]&&(this.fastDragonGroup[i+"_"+l.hashCode][o]={}),h?(null==this.fastDragonGroup[i+"_"+l.hashCode][o][h]&&(this.fastDragonGroup[i+"_"+l.hashCode][o][h]={}),this.fastDragonGroup[i+"_"+l.hashCode][o][h][d.hashCode]=d,this.fastDragonKeyGroup[h]=this.fastDragonGroup[i+"_"+l.hashCode][o]):this.fastDragonGroup[i+"_"+l.hashCode][o][d.hashCode]=d,d.play(o,c),d}},n.removeFastDragonbyContainer=function(e,t,n){for(var i in this.fastDragonGroup)i.indexOf("_"+e.hashCode)>=0&&(this.removeDragonFromDic(this.fastDragonGroup[i],t,n),t||delete this.fastDragonGroup[i])},n.removeFastDragonByDragonName=function(e,t,n){void 0===e&&(e="");for(var i in this.fastDragonGroup)i.indexOf(e+"_")>=0&&(this.removeDragonFromDic(this.fastDragonGroup[i],t,n),t||delete this.fastDragonGroup[i])},n.removeFastDragonByKey=function(t){if(this.fastDragonKeyGroup[t]&&this.fastDragonKeyGroup[t][t]){for(var n in this.fastDragonKeyGroup[t][t])this.fastDragonKeyGroup[t][t][n].stop(),e.DisplayUtils.removeFromParent(this.fastDragonKeyGroup[t][t][n]),delete this.fastDragonKeyGroup[t][t][n];delete this.fastDragonKeyGroup[t][t],this.fastDragonKeyGroup[t]=null,delete this.fastDragonKeyGroup[t]}},n.removeDragonFromDic=function(t,n,i){if(n){if(t[n])if(i){if(t[n][i])for(var o in t[n][i])t[n][i][o]&&(t[n][i]instanceof dragonBones.Movie?(t[n][i][o].stop(),e.DisplayUtils.removeFromParent(t[n][i][o]),delete t[n][i][o]):this.removeDragonFromDic(t[n],i))}else{for(var r in t[n])t[n][r]&&(t[n][r]instanceof dragonBones.Movie?(t[n][r].stop(),e.DisplayUtils.removeFromParent(t[n][r]),delete t[n][r]):this.removeDragonFromDic(t[n],r));delete t[n]}}else for(var o in t)this.removeDragonFromDic(t,o)},n.fastDragonGroup={},n.fastDragonKeyGroup={},n}();e.DragonUtils=n}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){function t(){}return t.rotationEffect=function(e,t){if(void 0===t&&(t=1e3),null==this.rotationArr&&(this.rotationArr=[]),!this.rotationArr[e.hashCode]){null!=this.rotationArr[e.hashCode]&&this.rotationArr[e.hashCode]||(this.rotationArr[e.hashCode]=!0);var n=function(){this.rotationArr[e.hashCode]&&null!=e&&(e.rotation=0,egret.Tween.get(e).to({rotation:360},t).call(n,this))};e.rotation=0,egret.Tween.get(e).to({rotation:360},t).call(n,this)}},t.removeRotationEffect=function(e){null==this.rotationArr&&(this.rotationArr=[]),this.rotationArr[e.hashCode]=!1},t.blinkEffect=function(t,n){void 0===n&&(n=1e3),new e.BitmapBlink(t,n)},t.shakeObj=function(e){var t=e.x;egret.Tween.get(e).to({x:e.x-10},80),egret.setTimeout(function(){egret.Tween.get(e).to({x:e.x+20},80)},this,160),egret.setTimeout(function(){egret.Tween.get(e).to({x:e.x-20},80)},this,240),egret.setTimeout(function(){egret.Tween.get(e).to({x:e.x+20},80)},this,320),egret.setTimeout(function(){egret.Tween.get(e).to({x:t},80)},this,400)},t.shakeScreen=function(e,t){void 0===t&&(t=1);var n=e.x,i=e.y;1==t?(egret.Tween.get(e).to({x:e.x-10},40),egret.setTimeout(function(){egret.Tween.get(e).to({x:e.x+20},40)},this,80),egret.setTimeout(function(){egret.Tween.get(e).to({x:e.x-20},40)},this,120),egret.setTimeout(function(){egret.Tween.get(e).to({x:e.x+20},40)},this,160),egret.setTimeout(function(){egret.Tween.get(e).to({x:n},40)},this,200)):(egret.Tween.get(e).to({x:e.x-10,y:e.y},40),egret.setTimeout(function(){egret.Tween.get(e).to({x:e.x+20,y:e.y},40)},this,80),egret.setTimeout(function(){egret.Tween.get(e).to({x:e.x,y:e.y+15},40)},this,120),egret.setTimeout(function(){egret.Tween.get(e).to({x:e.x,y:e.y-20},40)},this,160),egret.setTimeout(function(){egret.Tween.get(e).to({x:e.x,y:e.y+10},40)},this,200),egret.setTimeout(function(){egret.Tween.get(e).to({x:n,y:i},40)},this,240))},t.showTips=function(t,n,i){switch(void 0===t&&(t=""),void 0===n&&(n=1),void 0===i&&(i=!1),n){case 1:e.TipsUtils.showTipsDownToUp(t,i);break;case 2:e.TipsUtils.showTipsLeftOrRight(t,i,!0);break;case 3:e.TipsUtils.showTipsLeftOrRight(t,i,!1);break;case 4:e.TipsUtils.showTipsFromCenter(t,i);break;case 5:e.TipsUtils.showTipsBigToSmall(t,i)}},t.playEffect=function(e,t){if(void 0===t&&(t=1),!this.isPlayEffectPlay){this.isPlayEffectPlay=!0;var n=function(){this.isPlayEffectPlay=!1};egret.Tween.get(e).to({scaleX:.5,scaleY:.5,x:e.x+e.width/4,y:e.y+e.height/4},100,egret.Ease.sineIn).call(function(){1==t?egret.Tween.get(e).to({scaleX:1,scaleY:1,x:e.x-e.width/4,y:e.y-e.height/4},500,egret.Ease.elasticOut).call(n,this):2==t?egret.Tween.get(e).to({scaleX:1,scaleY:1,x:e.x-e.width/4,y:e.y-e.height/4},500,egret.Ease.backOut).call(n,this):3==t&&egret.Tween.get(e).to({scaleX:1,scaleY:1,x:e.x-e.width/4,y:e.y-e.height/4},100).call(n,this)},this)}},t.playScaleEffect=function(e){var t=function(){if(null!=e){e.alpha=1,egret.Tween.get(e).to({scaleX:1.5,scaleY:1.5,alpha:0},1e3).call(function(){e.scaleX=1,e.scaleY=1,egret.Tween.get(e).to({alpha:1},1e3).call(t,self)},self)}};t()},t.flyObj=function(e,t,n){void 0===n&&(n=50);var i=function(){if(null!=e){egret.Tween.get(e).to({y:e.y+n},t).call(function(){egret.Tween.get(e).to({y:e.y-n},t).call(i,this)},this)}};i()},t.rockObj=function(e,t,n){void 0===n&&(n=20);var i=function(){if(null!=e){egret.Tween.get(e).to({rotation:n},t).call(function(){egret.Tween.get(e).to({rotation:-n},t).call(i,this)},this)}};i()},t.typerEffect=function(e,t,n){void 0===t&&(t=""),void 0===n&&(n=200);for(var i=t.split(""),o=i.length,r=0;r<o;r++)egret.setTimeout(function(){e.appendText(i[Number(this)])},r,n*r)},t.rotationArr=[],t.isPlayEffectPlay=!1,t}();e.EffectUtils=t}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){function t(){}return t.dataURLtoBlob=function(t){for(var n,i=t.split(","),o=i[0].match(/:(.*?);/)[1],r=(n=window.atob?atob(i[1]):e.CompressUtil.base64decode(i[1])).length,a=new Uint8Array(r);r--;)a[r]=n.charCodeAt(r);return new Blob([a],{type:o})},t.upLoadFileByUrl=function(e,t,n){var i={uri:e,type:"image/png",name:"upload.png"};this.upLoadFile(i,t,n)},t.upLoadBase64File=function(e,n,i,o){var r=t.dataURLtoBlob(e);this.upLoadFile(r,n,i)},t.upLoadBase64=function(t,n,i,o){var r=new e.HttpRequest(n,n,i);r.open(this.base64FileUploadUrl,null,!0),r.send(t)},t.upLoadFile=function(t,n,i){var o=new FormData;if(t){switch(t.type){case"image/png":o.append("img",t,"image.png");break;case"image/jpg":o.append("img",t,"image.jpg");break;case"audio/amr":o.append("amr",t,"sound.amr")}var r=new e.HttpRequest(n,n,i);r.open(this.fileUploadUrl,null,!0),r.send(o)}},t.fileUploadUrl="http://image.mj.ucjoy.com:8888/form/upload",t.base64FileUploadUrl="http://image.mj.ucjoy.com:8888/upload",t}();e.FileUtils=t}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){function t(){}return t.checkJsIsExist=function(t,n){if(1==e.Global.isH5)if(n&&null!=n){if(e.hasDefinition(n))return!0}else{document.body.setAttribute("style","");for(var i=document.getElementsByTagName("script"),o=0;o<i.length;o++)if(i[o].src.indexOf(t)>-1)return!0}return!1},t.isLobbyMode=function(){return"LobbyScene"==egret.getQualifiedClassName(e.SceneMgr.instance.currentScene)},t.LoadGame=function(n,i,o,r,a,s,l){if(void 0===l&&(l=!0),""!=e.ResLoadMgr.instance.curLoadingGrp)return e.Console.warn("资源组 ["+e.ResLoadMgr.instance.curLoadingGrp+"] 正在加载,请等待后台加载完成"),!1;this.lastGameInfo=o,this.lastGameInfo.candestroyGrps=[];for(var c in RES.configInstance.groupDic)this.lastGameInfo.candestroyGrps.push(c);RES.hasOwnProperty("getVersionController")&&(n=RES.getVersionController().getVirtualUrl(n));var u=function(c){t.gameRemotePaths&&t.gameRemotePaths.length>0&&(o.gameResConfigUrl=e.Global.CdnDomains[0]+t.gameRemotePaths[0]+o.gameResConfigUrl,o.gameResRoot=e.Global.CdnDomains[0]+t.gameRemotePaths[0]+o.gameResRoot,o.gameTheme&&(o.gameTheme=e.Global.CdnDomains[0]+t.gameRemotePaths[0]+o.gameTheme)),r&&(o.preloadUI=r),o.preloadUIAutoHide=l;var u=t.getGameStage(i,o);if(u){if(console.debug("gamemain:"+u.hashCode),e.Global.initOpt&&e.Global.initOpt.lobbyResConfigUrl){t.lobbyResGrps=[];var h=e.ResUtils.getGroupDic();for(var d in h)e.Global.initOpt.lobbyCommonResGrps&&-1==e.Global.initOpt.lobbyCommonResGrps.indexOf(d)&&(RES.destroyRes(d),t.lobbyResGrps.push(d))}if(e.UIMgr.instance.clearOldSceneUis(),r&&(u.preLoadCallBack=function(){1==l&&e.UIMgr.instance.hideLoading(r)}),a&&a.call(s,u),0==e.Global.isInGame){e.Global.isInGame=!0,e.SceneMgr.instance.currentScene.addGame(u);try{var g={};g.gameId=o.gameId,g.time=(new Date).getTime(),e.Utils.setLocalStorage(CommonConsts.LOBBY_LASTGAME,JSON.stringify(g))}catch(t){e.Console.error("设置游戏GameId失败")}}return!0}return 0==e.Global.isH5&&egret.hasDefinition("egret_native")&&egret_native.isFileExists(n)&&egret_native.deleteUpdateFile(n),console.error("找不到游戏主类:"+i),e.UIMgr.instance.hideLoading(),!1};if(r&&(1==l?e.UIMgr.instance.showProcessBar(r,2,100,"正在加载游戏...","",!1):e.UIMgr.instance.showLoadingParam(r,o.gameId,egret.MainContext.instance.stage)),null==this.lbscene&&(e.SceneMgr.instance.currentScene?this.lbscene=egret.getQualifiedClassName(e.SceneMgr.instance.currentScene):o.defaultScene&&(this.lbscene=o.defaultScene)),this.checkJsIsExist(n,e.Global.isWxGame()?i:null))return u();r&&e.UIMgr.instance.showLoadingTimeout(r,"",0),this.LoadGameJs(n,function(){return u()})},t.enterGame=function(e,t,n,i,o){return void 0===o&&(o=!0),this.LoadGame(e.gameCodeUrl,e.gameDoc,e,t,n,i,o)},t.gameDownloaded=function(t){try{if(1==e.Global.isH5)return!0;RES.hasOwnProperty("getVersionController")&&(t=RES.getVersionController().getVirtualUrl(t));var n=this.gameNativeFolder+t;if(egret.hasDefinition("egret_native")&&egret_native.isFileExists(n))return!0}catch(e){return!1}return!1},t.downloadGame=function(n,i,o,r,a){var s=function(s){var c,u;t.gameRemotePaths&&t.gameRemotePaths.length>0?(c=e.Global.CdnDomains[0]+t.gameRemotePaths[0]+n.gameResConfigUrl,u=e.Global.CdnDomains[0]+t.gameRemotePaths[0]+n.gameResRoot):(c=n.gameResConfigUrl,u=n.gameResRoot),e.ResUtils.loadGameGroupReses(c,function(t){if(e.ResUtils.removeGroup(n.gameResConfigUrl),t){var o=t.data;if(o&&o.length>0){for(var r=0;r<o.length;r++)e.ResUtils.getGroupDic(o[r])&&RES.destroyRes(o[r]);e.ResUtils.clearResConfigByGroupName(o)}}var s=n.gameCodeUrl;RES.hasOwnProperty("getVersionController")&&(s=RES.getVersionController().getVirtualUrl(s)),i&&(a?i.call(a,t):i(t))},o,function(n){if(0==e.Global.isH5){var i=t.gameNativeFolder+l;egret.hasDefinition("egret_native")&&egret_native.deleteUpdateFile(i)}r&&(a?r.call(a,n):r(n))},a,u)},l=n.gameCodeUrl;RES.hasOwnProperty("getVersionController")&&(l=RES.getVersionController().getVirtualUrl(l)),this.checkJsIsExist(l)?s():this.LoadGameJs(l,s,r,this)},t.LoadLobby=function(t,n,i,o,r,a){null==t&&(t="resource/main.min.js"),RES.hasOwnProperty("getVersionController")&&(t=RES.getVersionController().getVirtualUrl(t)),null==n&&(n="AppMain");var s=function(t){var o=e.getDefinitionByName(n);o&&e.SceneMgr.instance.changeScene(o,i)};this.checkJsIsExist(t)?s():(o&&e.UIMgr.instance.showLoadingTimeout(o,"",0),this.LoadGameJs(t,s))},t.ExitGame=function(n){var i=this;if(void 0===n&&(n=!0),1==e.Global.lobbyMode){e.Global.gameId=e.Global.lobbyGameId,e.Global.isInGame=!1,e.NetMgr.http=null,e.NetMgr.closeSocket(),n&&(e.SoundMgr.instance.stopSounds(),e.SoundMgr.instance.stopBgMusic()),this.defaultLandscape!=e.ScreenUtils.landscape&&(e.ScreenUtils.landscape=!e.ScreenUtils.landscape);var o=function(){0==e.Global.isWxGame()&&i.removeGameJs(),egret.Capabilities.engineVersion>="5.0"&&dragonBones&&(dragonBones.removeAllMovieGroup(),dragonBones.EgretFactory.factory.clear());try{e.Global.reloadDefine&&e.Global.reloadDefine.length>0&&e.BrowersUtils.LoadJses(e.Global.reloadDefine)}catch(e){console.log("重加载公共资源失败！")}if(e.SceneMgr.instance.currentScene.removeGame)e.SceneMgr.instance.currentScene.removeGame(),e.SceneMgr.instance.currentScene.uiLayer.visible=!0;else{var n=e.getDefinitionByName(i.lbscene);e.SceneMgr.instance.changeScene(n)}if(e.delDefinitionByName("Cmd"),t.lastGameInfo&&t.lastGameInfo.defaultScene&&""!=t.lastGameInfo.defaultScene){var o=t.lastGameInfo.defaultScene.split("."),r=void 0;o.length>0&&(r=o[0]),r&&e.delDefinitionByName(r)}e.UIMgr.instance.clearOldSceneUis(),e.Utils.setLocalStorage(CommonConsts.LOBBY_LASTGAME,null),e.Global.dispatchEvent(e.ZqEvent.UPDATE_USER_INFO),e.Global.dispatchEvent(e.ZqEvent.CHECK_VERSION_UPDATE),e.DebugView.Instance.show()};if(this.lastGameInfo&&RES.configInstance.groupDic){var r=[];for(var a in RES.configInstance.groupDic)-1==this.lastGameInfo.candestroyGrps.indexOf(a)&&r.push(a)}if(t.lobbyResGrps&&t.lobbyResGrps.length>0){if(e.UIMgr.instance.showProcessBar(null),e.ResLoadMgr.instance.loadGrps(t.lobbyResGrps,o,null,this,null,!1),r&&r.length>0){for(var s=0;s<r.length;s++)RES.destroyRes(r[s]),e.ResUtils.removeGroup(r[s]);e.ResUtils.clearResConfigByGroupName(r)}}else o()}},t.reloadGame=function(t,n,i,o,r,a){1==e.Global.lobbyMode&&(e.Global.gameId=e.Global.lobbyGameId,e.Global.isInGame=!1,e.NetMgr.http=null,e.NetMgr.closeSocket(),this.defaultLandscape!=e.ScreenUtils.landscape&&(e.ScreenUtils.landscape=!e.ScreenUtils.landscape),e.SoundMgr.instance.stopSounds(),e.SoundMgr.instance.stopBgMusic(),e.SceneMgr.instance.currentScene.removeGame?(e.SceneMgr.instance.currentScene.removeGame(),e.SceneMgr.instance.currentScene.uiLayer.visible=!0):e.SceneMgr.instance.changeScene(e.LobbyScene),e.delDefinitionByName("Cmd"),this.removeGameJs(),e.UIMgr.instance.clearOldSceneUis(),e.Utils.setLocalStorage(CommonConsts.LOBBY_LASTGAME,null),e.Global.dispatchEvent(e.ZqEvent.UPDATE_USER_INFO),e.Global.dispatchEvent(e.ZqEvent.CHECK_VERSION_UPDATE),this.LoadGame(t,n,i,o,r,a))},Object.defineProperty(t,"lastGame",{get:function(){return 0,0},enumerable:!0,configurable:!0}),t.LoadGameJs=function(t,n,i,o){e.BrowersUtils.LoadJS("lobbygame",t,n,i,o)},t.getGameStage=function(t,n){var i=e.getDefinitionByName(t);if(i)return new i(n)},t.removeGameJs=function(){if(1==e.Global.isH5&&document&&document.hasOwnProperty("getElementById")){var t=document.getElementById("lobbygame");if(document.hasOwnProperty("getElementsByTagName")){var n=document.getElementsByTagName("HEAD").item(0);t&&n.removeChild(t)}}},t.egretLoaded=function(){var e=document.getElementById("loading");document.body.removeChild(e)},t.gameNativeFolder="",t.gameLoadRemote=!1,t}();e.GameModuleUtils=t}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){function t(){}return t.selectImage=function(t,n){if(e.BrowersUtils.isWechat())this.selectImageWX(t,n);else{this.selectedHandler=t,this.thisRef=n;var i=document.getElementById("fileInput");null==i&&((i=document.createElement("input")).id="fileInput",i.type="file",i.accept="image/*",i.style.height="0px",i.style.display="block",i.style.overflow="hidden",document.body.insertBefore(i,document.body.firstChild),i.addEventListener("change",this.tmpSelectFile,!1)),setTimeout(function(){i.click()},100)}},t.selectImageWX=function(e,t){this.selectedHandler=e,this.thisRef=t,wx.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(e){var t=e.localIds;this.tmpCreateImage(t[0])}})},t.tmpSelectFile=function(e){var n=e.target.files[0],i=n.type;i||(i=t.mime[n.name.match(/\.([^\.]+)$/i)[1]]);var o=t.myCreateObjectURL(n);t.tmpCreateImage&&t.tmpCreateImage(o,n),document.getElementById("fileInput").value=""},t.tmpCreateImage=function(t,n){var i=this,o=new Image;o.onload=function(){var r=document.createElement("canvas");if(!e.BrowersUtils.isWechat()&&o.height>i.MAX_HEIGHT){o.width*=i.MAX_HEIGHT/o.height,o.height=i.MAX_HEIGHT;var a=r.getContext("2d");a.clearRect(0,0,r.width,r.height),r.width=o.width,r.height=o.height,a.drawImage(o,0,0,o.width,o.height);var s=r.toDataURL("image/png")}else s=t;if(o.width=o.height=1,i.selectedHandler){var l=new e.ZQGameObj;l.cmd=e.ZQGameSdk.PICKPHOTO,l.code=0,l.data={},l.data.imgBase64=s,l.data.imgLen=s.length,l.data.file=n,i.selectedHandler.call(i.thisRef,l)}},o.src=t,o.style.visibility="hidden",document.body.appendChild(o)},t.myCreateObjectURL=function(e){return void 0!=window.URL?window.URL.createObjectURL(e):window.webkitURL.createObjectURL(e)},t.myResolveObjectURL=function(e){void 0!=window.URL?window.URL.revokeObjectURL(e):window.webkitURL.revokeObjectURL(e)},t.getImageData=function(e,t,n){this.bytesHandler=t,this.thisRef=n;try{var i=new FileReader}catch(e){console.log("no support FileReader")}i.onload=function(){this.bytesHandler&&this.bytesHandler(this.thisRef,this.result)},i.readAsArrayBuffer(e)},t.mime={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",bmp:"image/bmp"},t.MAX_HEIGHT=300,t}();e.H5Upload=t}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){function e(){}return e.randomInt=function(e,t){if(0>=t-e)return 0;var n=t-e;return Math.floor(Math.random()*n)+e},e.inRange=function(e,t,n){return t<=e&&e<=n},e.div=function(e,t){return Math.floor(e/t)},e.getZeroTimeStamp=function(){var e=new Date,t=e.getUTCFullYear()+"/"+(e.getUTCMonth()+1)+"/"+e.getUTCDate();return new Date(t).getTime()/1e3},e.getTimeStamp=function(){var e=(new Date).getTime()/1e3;return parseInt(e.toString())},e.getAngle=function(e,t,n,i){var o=n-e,r=i-t,a=o/Math.sqrt(Math.pow(o,2)+Math.pow(r,2)),s=Math.acos(a),l=180/(Math.PI/s);return r<0?l=-l:0==r&&o<0&&(l=180),l},e.getCurrencyUnitByLen=function(e){var t="";switch(e){case 2:t="百";break;case 3:t="千";break;case 4:t="万";break;case 5:t="十万";break;case 6:t="百万";break;case 7:t="千万";break;case 8:t="亿";break;case 9:t="十亿";break;case 10:t="百亿";break;case 11:t="千亿";break;case 12:t="兆"}return t},e}();e.NumberUtils=t}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){function t(){}return t.resetSoundLoadTimes=function(){for(var e in this._resRequestSoundLoadTimes)this._resRequestSoundLoadTimes[e]=null,delete this._resRequestSoundLoadTimes[e]},t.setMustRes=function(t){try{this._mustResList=[];for(var n in t){var i=t[n];i&&i.resName&&-1==this._mustResList.indexOf(i.resName)&&this._mustResList.push(i.resName)}}catch(t){e.Console.warn("setMustRes:必须资源列表出错,请检查必须资源列表格式")}},t.init=function(){0==this.inited&&(this.inited=!0,RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),"undefined"!=typeof dragonBones&&egret.startTick(this.onDragonBonesTick,egret.MainContext.instance.stage))},t.onDragonBonesTick=function(e){return"undefined"!=typeof dragonBones&&(dragonBones.WorldClock.clock.advanceTime(-1),!0)},t.onItemLoadError=function(t){this._mustResList.indexOf(t.resItem.name)>=0&&e.Utils.restart(t.resItem.name+"资源加载失败,请重新启动游戏","确定")},t.getRes=function(t,n,i,o){function r(e){if(l._needLoadDicCallBack[t]){for(;l._needLoadDicCallBack[t].length>0;){var o=l._needLoadDicCallBack[t].shift();o[0].call(o[1],e,t)}delete l._needLoadDicCallBack[t]}else null!=i?n.call(i,e,t):n&&n(e,t);if(-1!=l._loadingDic.indexOf(t)&&(l._asynLoadLevel--,l._loadingDic.splice(l._loadingDic.indexOf(t),1)),l._needloadDic.length>0&&this._asynLoadLevel<this.MAX_LOAD_LEVEL){var a=l._needloadDic.shift();l.getRes(a,r,l)}}function a(e){l._resRequestSoundLoadTimes[t]=0;var i=e.target;i.removeEventListener(egret.Event.COMPLETE,a,l),i.removeEventListener(egret.IOErrorEvent.IO_ERROR,s,l);var o=i.data;n&&n(o,t)}function s(n){var i=n.target;if(i.removeEventListener(egret.Event.COMPLETE,a,l),i.removeEventListener(egret.IOErrorEvent.IO_ERROR,s,l),e.Console.error("加载资源失败："+t),null!=l._resRequestSoundLoadTimes[t]&&l._resRequestSoundLoadTimes[t]>0){l._resRequestSoundLoadTimes[t]--;var o=new egret.URLLoader;o.dataFormat=egret.URLLoaderDataFormat.SOUND,o.once(egret.Event.COMPLETE,a,l),o.once(egret.IOErrorEvent.IO_ERROR,s,l);var r=RES.configInstance.getResourceItem(t),c=RES.getVersionController().getVirtualUrl(r.url),u=new egret.URLRequest(c);o.load(u)}}var l=this;if(o==egret.URLLoaderDataFormat.SOUND){if(null!=this._resRequestSoundLoadTimes[t])return 0==this._resRequestSoundLoadTimes[t]?void 0:void this._resRequestSoundLoadTimes[t]++;this._resRequestSoundLoadTimes[t]=1;var c=new egret.URLLoader;c.dataFormat=egret.URLLoaderDataFormat.SOUND,c.once(egret.Event.COMPLETE,a,l),c.once(egret.IOErrorEvent.IO_ERROR,s,l);var u=RES.configInstance.getResourceItem(t);if(null!=u){var h=RES.getVersionController().getVirtualUrl(u.url),d=new egret.URLRequest(h);c.load(d)}else e.Console.error("找不到将要加载的资源："+t+"\t"+h)}else if(RES.hasRes(t)){var g=RES.getRes(t);if(g)r(g);else{if(this._loadingDic.indexOf(t)>=0){p=[n,i];return null==this._needLoadDicCallBack[t]&&(this._needLoadDicCallBack[t]=[]),void this._needLoadDicCallBack[t].push(p)}if(this._asynLoadLevel<this.MAX_LOAD_LEVEL)this._loadingDic.push(t),this._asynLoadLevel++,RES.getResAsync(t,r,this);else{var p=[n,i];-1==this._needloadDic.indexOf(t)&&this._needloadDic.push(t),null==this._needLoadDicCallBack[t]&&(this._needLoadDicCallBack[t]=[]),this._needLoadDicCallBack[t].push(p)}}}else RES.getResByUrl(t,r,this)},t.clearResConfigByConfigName=function(e){var t=RES.configInstance;for(var n in t.groupDic){var i=t.groupDic[n];for(var o in i)e.indexOf(o)>=0&&t.keyMap[i[o].name]&&(i[o].name=null,delete i[o].name);t.groupDic[n]=null,delete t.groupDic[n]}},t.clearCfgByConfigName=function(e,t){for(var n=[],i=0;i<t.groups.length;i++)e.indexOf(t.groups[i].name)>=0&&(n=n.concat(t.groups[i].keys.split(",")),t.groups.splice(i,1));for(i=0;i<t.resources.length;i++){var o=t.resources[i];n.indexOf(o.name)>=0&&t.resources.splice(i,1)}return t},t.clearResConfigByGroupName=function(e){for(var t=RES.configInstance,n=0;n<e.length;n++){for(var i=RES.getGroupByName(e[n]),o=0;o<i.length;o++)i[o].loaded=!1,t.keyMap[i[o].name]=null,delete t.keyMap[i[o].name];t.groupDic[e[n]]&&(t.groupDic[e[n]]=null,delete t.groupDic[e[n]])}},t.getBmp=function(e,t,n,i){void 0===i&&(i=!0);var o;return i&&(o=this.resPool.active("bm_"+e)),null==o.texture&&this.getRes(e,function(e){o.texture=e,t&&t.call(n,o)}),o},t.freeBmp=function(e,t){this.resPool.free(e,"bm_"+t)},t.getMovieClip=function(e,t,n,i,o){void 0===o&&(o=!1);var r=0;null==t&&(t="");var a=[e+"_json",e+"_png"];for(var s in a)this.getRes(a[s],function(o,s){if(++r!=a.length);else{var l=new egret.MovieClipDataFactory(RES.getRes(e+"_json"),RES.getRes(e+"_png")),c=new egret.MovieClip(l.generateMovieClipData(t));n.call(i,c)}},this)},t.freeMovieClip=function(e,t,n){},t.getParticle=function(e,t,n,i){var o=0;null==t&&(t="");var r=[e+"_json",e];for(var a in r)this.getRes(r[a],function(t,a){if(++o==r.length){var s,l=RES.getRes(e),c=RES.getRes(e+"_json");return s=new particle.GravityParticleSystem(l,c),void n.call(i,s)}},this)},t.loadResConfig=function(e){},t.loadGameGroupReses=function(i,o,r,a,s,l){void 0===l&&(l="resource/");var c=[],u=this;null==this.loadedConfig[i]?(this.loadedConfig[i]={},this.loadedConfig[i].status=n.LOADDING,this.getRes(i,function(h){var d=[];if(h&&h.groups&&h.groups.length>0){for(var g=0;g<h.groups.length;g++)c.push(h.groups[g].name),0==t.isGroupInConfig(h.groups[g].name)&&d.push(h.groups[g].name);e.Global.initOpt.lobbyCommonResGrps&&e.Global.initOpt.lobbyCommonResGrps.length>0&&t.clearCfgByConfigName(e.Global.initOpt.lobbyCommonResGrps,h),RES.hasOwnProperty("parseConfig")&&RES.parseConfig(h,l),e.ResLoadMgr.instance.loadGrps(c,function(){u.loadedConfig[i].status=n.LOADED,h.data=d,o.call(s,h)},function(e){u.loadedConfig[i]&&(u.loadedConfig[i]=null,delete u.loadedConfig[i]),RES.destroyRes(i),t.clearResConfigByGroupName(d),a&&a.call(s,e)},this,function(e){r&&r.call(s,e)})}else u.loadedConfig[i]&&(u.loadedConfig[i]=null,delete u.loadedConfig[i]),RES.destroyRes(i),t.clearResConfigByGroupName(d),a&&a.call(s,h)},this)):this.loadedConfig[i].status==n.LOADED&&o.call(s)},t.removeGroup=function(e){var n=t.getGroupDic();n&&(n[e]?(n[e]=null,delete n[e]):n[e]&&(n[e]=null,delete n[e]))},t.isGroupInConfig=function(e){return!!t.getGroupDic(e)},t.getGroupDic=function(e){var t,n=RES.configInstance;return n&&(n.groupDic&&n.groupDic?t=e?n.groupDic[e]:n.groupDic:n.config&&n.config.groups&&(t=e?n.config.groups[e]:n.config.groups)),t},t.getObjFactoryGroup=function(t){return null==this.objfactorys[t]&&(this.objfactorys[t]=new e.ObjectFactoryGroup[t]),this.objfactorys[t]},t.MAX_LOAD_LEVEL=1,t._asynLoadLevel=0,t._loadingDic=[],t._needloadDic=[],t._needLoadDicCallBack={},t._resRequestSoundLoadTimes={},t.resPool=new e.ObjectFactoryGroup(egret.Bitmap),t._mustResList=[],t.inited=!1,t.loadedConfig={},t.objfactorys=[],t}();e.ResUtils=t;var n;!function(e){e[e.LOADDING=0]="LOADDING",e[e.LOADED=1]="LOADED"}(n=e.GROUP_LOAD_STATUS||(e.GROUP_LOAD_STATUS={}))}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){function t(){}return t.init=function(n){this.scaleMode=n,egret.MainContext.instance.stage.orientation==egret.OrientationMode.LANDSCAPE||egret.MainContext.instance.stage.orientation==egret.OrientationMode.LANDSCAPE_FLIPPED?this._landscape=!0:this._landscape=!1,e.GameModuleUtils.defaultLandscape=this._landscape,e.Global.screenWidth=egret.MainContext.instance.stage.stageWidth,e.Global.screenHeight=egret.MainContext.instance.stage.stageHeight,egret.MainContext.instance.stage.addEventListener(egret.Event.RESIZE,this.onResizeNotify,this),this.resetScaleMode(),this.scaleFactor=e.Global.screenHeight/e.Global.designHeight,global||egret&&"true"!=e.BrowersUtils.GetRequest("debug")&&(egret.MainContext.instance.stage.addEventListener(egret.Event.DEACTIVATE,t.onDeactive,e.Global),egret.MainContext.instance.stage.addEventListener(egret.Event.ACTIVATE,t.onActive,e.Global))},t.onDeactive=function(t){0!=e.Global.isActive&&(e.Global.isActive=!1,egret.Tween.pauseTweens(egret.MainContext.instance.stage),e.SoundMgr.instance.onDeActive(t))},t.onActive=function(t){1!=e.Global.isActive&&(e.Global.isActive=!0,egret.Tween.resumeTweens(egret.MainContext.instance.stage),e.SoundMgr.instance.onActive(t))},t.onResizeNotify=function(){1==e.Global.isH5?(e.Global.screenWidth=egret.MainContext.instance.stage.stageWidth,e.Global.screenHeight=egret.MainContext.instance.stage.stageHeight):1==this._landscape?(e.Global.screenWidth=egret.MainContext.instance.stage.stageHeight,e.Global.screenHeight=egret.MainContext.instance.stage.stageWidth):(e.Global.screenWidth=egret.MainContext.instance.stage.stageWidth,e.Global.screenHeight=egret.MainContext.instance.stage.stageHeight),this.scaleFactor=e.Global.screenHeight/e.Global.designHeight,e.SceneMgr.instance.currentScene&&e.SceneMgr.instance.currentScene.resize(),e.PopUpMgr.resize(),e.DebugView.Instance.resize()},t.resetScaleMode=function(){this.scaleMode?egret.MainContext.instance.stage.scaleMode=this.scaleMode:egret.Capabilities.isMobile?egret.MainContext.instance.stage.scaleMode=egret.StageScaleMode.FIXED_WIDTH:egret.MainContext.instance.stage.scaleMode=egret.StageScaleMode.SHOW_ALL},Object.defineProperty(t,"landscape",{get:function(){return this._landscape},set:function(t){if(this._landscape!=t)if(this._landscape=t,1==e.Global.isH5)1==this._landscape?(egret.MainContext.instance.stage.orientation=egret.OrientationMode.LANDSCAPE,1==e.GameModuleUtils.defaultLandscape?egret.MainContext.instance.stage.setContentSize(e.Global.designWidth,e.Global.designHeight):(e.Global.screenWidth=e.Global.designHeight,e.Global.screenHeight=e.Global.designWidth,egret.MainContext.instance.stage.setContentSize(e.Global.designHeight,e.Global.designWidth))):(egret.MainContext.instance.stage.orientation=egret.OrientationMode.AUTO,1==e.GameModuleUtils.defaultLandscape?egret.MainContext.instance.stage.setContentSize(e.Global.designHeight,e.Global.designWidth):(e.Global.screenWidth=e.Global.designWidth,e.Global.screenHeight=e.Global.designHeight,egret.MainContext.instance.stage.setContentSize(e.Global.designWidth,e.Global.designHeight)));else if(1==this._landscape){var n=0,i=0;if(e.Global.screenWidth<e.Global.screenHeight){n=e.Global.screenWidth/e.Global.designWidth,i=(e.Global.screenHeight-n*e.Global.designHeight)/2;o=e.Global.screenWidth;e.Global.screenWidth=e.Global.screenHeight,e.Global.screenHeight=o}else n=e.Global.screenHeight/e.Global.designWidth,i=(e.Global.screenWidth-n*e.Global.designHeight)/2;e.SceneMgr.instance.currentScene.x=e.Global.designWidth,e.SceneMgr.instance.currentScene.y=i,e.SceneMgr.instance.currentScene.rotation=90}else{var o=e.Global.screenWidth;e.Global.screenWidth=e.Global.screenHeight,e.Global.screenHeight=o,e.SceneMgr.instance.currentScene.rotation=0,e.SceneMgr.instance.currentScene.x=0,e.SceneMgr.instance.currentScene.y=0}},enumerable:!0,configurable:!0}),t.scaleFactor=1,t._landscape=!1,t}();e.ScreenUtils=t}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){function t(){}return t.stringIsNullOrEmpty=function(e){return null==e||0==e.length},t.MD5=function(e){return(new md5).hex_md5(e)},t.ltrim=function(e){return e.replace(/(^\s*)/g,"")},t.rtrim=function(e){return e.replace(/(\s*$)/g,"")},t.trim=function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},t.sTrim=function(e){return e.replace(/\s/g,"")},t.checkPhone=function(e){return!!/^1[34578]\d{9}$/.test(e)},t.checkEmail=function(e){return!!/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/.test(e)},t.getPosition=function(e,t,n){void 0===n&&(n=1);for(var i=new RegExp(t,"g");n--;)i.test(e);var o=i.lastIndex-t.length;return o<0?null:o},t.validNetUrl=function(e){var t=e.length;return"/"!=e.charAt(t-1)&&(e+="/"),e},t.formatCurrency=function(e,t,n,i){void 0===n&&(n=!1),void 0===i&&(i=5);isNaN(e)&&(e=0);var o=e+"";null!=t&&"万"==t&&(i?i<5&&(i=5):i=5,o.length>=i?o=o.slice(0,o.length-4):t="");var r=o.split("."),a=!1,s="",l=o;if(r.length>=2&&(a=!0,s=r[1],l=r[0]),1==n){for(var c="",u=l.length,h=Math.ceil(u/3),d=1;d<=h;d++){var g=u-3*d;g<0&&(g=0);var p=u-3*d+3;c=l.substring(g,p)+(1==n?",":"")+c}c=c.substr(0,c.length-1)}else c=l;var f="";return f=a?c+"."+s:""+c,null!=t&&(f+=t),f},t.ip2int=function(e){var t=0;return e=e.split("."),t=256*Number(e[0])*256*256+256*Number(e[1])*256+256*Number(e[2])+Number(e[3]),t>>>=0},t.int2ip=function(e){var t=new Array;return t[0]=e>>>24>>>0,t[1]=e<<8>>>24>>>0,t[2]=e<<16>>>24,t[3]=e<<24>>>24,String(t[0])+"."+String(t[1])+"."+String(t[2])+"."+String(t[3])},t.getStrRealLength=function(e){for(var t=0,n=0;n<e.length;n++)e.charCodeAt(n)>127||94==e.charCodeAt(n)?t+=2:t++;return t},t.time2str=function(e){if(null==e)return"";e=10==e.toString().length?1e3*e:e;var t=new Date;return t.setTime(e),t.getFullYear()+"-"+this.getNumStr(t.getMonth()+1)+"-"+this.getNumStr(t.getDate())+"  "+this.getNumStr(t.getHours())+":"+this.getNumStr(t.getMinutes())+":"+this.getNumStr(t.getSeconds())},t.getNumStr=function(e){return e<10?"0"+e:e.toString()},t.formatCurrencyToUnit=function(t,n,i){void 0===n&&(n=4),void 0===i&&(i=!0);var o,r="";n<4&&(n=4);var a=t.toString().split("."),s="";if(a.length>=2&&(!0,a[1]),(s=a[0]).length>n&&(o=s.length-n),o>=n&&(s=s.replace(s.substr(n,s.length),""),r=e.NumberUtils.getCurrencyUnitByLen(o)),s.length>=4&&1==i){for(var l="",c=s.length,u=Math.ceil(c/3),h=1;h<=u;h++){var d=c-3*h;d<0&&(d=0);var g=c-3*h+3;l=s.substring(d,g)+(1==i?",":"")+l}l=l.substr(0,l.length-1)}else l=s;return l+r},t.formatCurrencyByTotalLen=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=8),n<5&&(n=5);isNaN(e)&&(e=0);var i=Number(e)+"",o="";i.length>=n?i.length-4>=n?(i=i.slice(0,i.length-8),o="亿"):(i=i.slice(0,i.length-4),o="万"):o="";var r=i.split("."),a=!1,s="",l=i;if(r.length>=2&&(a=!0,s=r[1],l=r[0]),1==t){for(var c="",u=l.length,h=Math.ceil(u/3),d=1;d<=h;d++){var g=u-3*d;g<0&&(g=0);var p=u-3*d+3;c=l.substring(g,p)+(1==t?",":"")+c}c=c.substr(0,c.length-1)}else c=l;var f="";return f=a?c+"."+s:""+c,null!=o&&(f+=o),f},t.formatCurrencyNomal=function(e){if(e.indexOf("万")>=0&&(e=e.slice(0,e.length-1),e+="0000"),e.indexOf(",")>=0){var t=e.split(",");e="";for(var n=0;n<t.length;n++)e+=t[n]}return e},t.formatMMSS=function(e){var t=Math.floor(e/60)+"",n=e%60+"";return t.length<2&&(t="0"+t),n.length<2&&(n="0"+n),t+":"+n},t.formatHHMMSS=function(e,t){void 0===t&&(t=":");var n=Math.floor(e/60/60)+"",i=Math.floor(e/60)-60*parseInt(n)+"",o=e%60+"";return n.length<2&&(n="0"+n),i.length<2&&(i="0"+i),o.length<2&&(o="0"+o),n+t+i+t+o},t.isNetUrl=function(e){return-1!=e.indexOf("http://")||-1!=e.indexOf("HTTP://")||-1!=e.indexOf("https://")||-1!=e.indexOf("HTTPS://")},t.formatDDHHMMSS=function(e,t){void 0===t&&(t=":");var n=e,i="",o="",r="",a="";return i=Math.floor(n/60/60/24)+"",(n-=24*parseInt(i)*60*60)>0&&(o=Number(n/60/60)+""),(n-=60*parseInt(o)*60)>0&&(r=Math.floor(n/60)+""),(n-=60*parseInt(r))>0&&(a=e%60+""),i.length<2&&(i="0"+i),o.length<2&&(o="0"+o),r.length<2&&(r="0"+r),a.length<2&&(a="0"+a),"天"==t?i+"天"+o+"时"+r+"分"+a:i+t+o+t+r+t+a},t.getVariables=function(e){for(var t=e.split("="),n={},i=0;i<t.length;)n[t[i]]=t[i+1],i+=2;return n},t.prototype.getStrRealLngth=function(e){var t=e.length,n=0;if(t){for(var i=0;i<t;i++)e.charCodeAt(i)>255?n+=2:n+=1;return n}return 0},t}();e.StringUtils=t}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){function e(e,t,n,i){void 0===i&&(i=0),this.loopLimit=0,this.last=0,this.jumped=0,this.isStart=!1,this.begin=0,this.maxRandNum=30,this.delay=e,this.callFun=t,this._thisObj=n,this.loopLimit=i}return e.prototype.stop=function(){-1!=e.timerlists.indexOf(this)&&(this.isStart=!1,e.timerlists.splice(e.timerlists.indexOf(this),1))},e.prototype.start=function(t){void 0===t&&(t=30),null==e.timer&&(e.timerNumber=0,(e.timer=new egret.Timer(10)).addEventListener(egret.TimerEvent.TIMER,e.timerHandler,e),e.timer.start()),this.maxRandNum=t,this.isStart=!0,this.current=this.delay,this.last=egret.getTimer(),this.begin=this.last,this.jumped=0,e.timerlists.push(this)},e.prototype.remain=function(){return this.current},e.prototype.needRender=function(){return this.isStart?(this.current=this.current-(egret.getTimer()-this.last),this.last=egret.getTimer(),(this.last-this.begin)/this.delay-this.jumped):0},e.prototype.excute=function(){this.jumped++,0!=this.loopLimit&&this.jumped>this.loopLimit&&this.stop(),this.current=this.delay,this.callFun.call(this._thisObj)},e.timerHandler=function(){for(var t,n=0,i=0,o=0;o<e.timerlists.length;)for(t=e.timerlists[o],o++,(n=t.needRender())>t.maxRandNum&&(n=t.maxRandNum),i=0;i<n;)i++,t.excute()},e.TIMERBASE_DELAY=10,e.timerNumber=0,e.timerlists=[],e}();e.TimerBase=t}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){function t(){this.exmls=""}return t.showTipsDownToUp=function(t,n){void 0===t&&(t=""),void 0===n&&(n=!1);var i;"string"==typeof t?((i=new egret.TextField).size=24,i.textColor=n?e.Global.TextColors.red:e.Global.TextColors.green,i.alpha=0,i.text=t,i.strokeColor=0,i.stroke=2,i.bold=!0,i.textAlign=egret.HorizontalAlign.CENTER):i=t,i.y=egret.MainContext.instance.stage.stageHeight/2,i.x=egret.MainContext.instance.stage.stageWidth/2-i.width/2,null!=e.SceneMgr.instance.currentScene&&null!=e.SceneMgr.instance.currentScene.tipsLayer?e.SceneMgr.instance.currentScene.tipsLayer.contains(i)||e.SceneMgr.instance.currentScene.tipsLayer.addChild(i):egret.MainContext.instance.stage.addChild(i);var o=function(){e.DisplayUtils.removeFromParent(i),i=null};i.visible=!0,egret.Tween.get(i).to({y:i.y-120,alpha:1},800,egret.Ease.backOut).wait(2e3).call(function(){egret.Tween.get(i).to({y:i.y-50,alpha:0},500).call(o,this)},this)},t.showTipsLeftOrRight=function(t,n,i){void 0===t&&(t=""),void 0===n&&(n=!1),void 0===i&&(i=!0);var o;"string"==typeof t?((o=new egret.TextField).size=24,o.textColor=n?e.Global.TextColors.red:e.Global.TextColors.green,o.alpha=0,o.text=t,o.strokeColor=0,o.stroke=2,o.bold=!0,o.textAlign=egret.HorizontalAlign.CENTER):o=t,o.x=i?-o.width:e.Global.screenWidth,o.y=e.Global.screenHeight/2,e.SceneMgr.instance.currentScene.tipsLayer.contains(o)||e.SceneMgr.instance.currentScene.tipsLayer.addChild(o),i?egret.Tween.get(o).to({x:e.Global.screenWidth/2-o.width/2-50,alpha:1},300,egret.Ease.sineInOut):egret.Tween.get(o).to({x:e.Global.screenHeight/2-o.width/2+50,alpha:1},300,egret.Ease.sineInOut),egret.setTimeout(function(){i?egret.Tween.get(o).to({x:o.x+100},500):egret.Tween.get(o).to({x:o.x-100},500)},this,300),egret.setTimeout(function(){i?egret.Tween.get(o).to({x:e.Global.screenWidth},300,egret.Ease.sineIn):egret.Tween.get(o).to({x:-o.width},300,egret.Ease.sineIn)},this,800),egret.setTimeout(function(){e.SceneMgr.instance.currentScene.tipsLayer.contains(o)&&(e.SceneMgr.instance.currentScene.tipsLayer.removeChild(o),o=null)},this,1100)},t.showTipsFromCenter=function(t,n){void 0===t&&(t=""),void 0===n&&(n=!1);var i;"string"==typeof t?((i=new egret.TextField).size=24,i.textColor=n?e.Global.TextColors.red:e.Global.TextColors.green,i.alpha=0,i.text=t,i.strokeColor=0,i.stroke=2,i.bold=!0,i.textAlign=egret.HorizontalAlign.CENTER):i=t,i.y=e.Global.screenHeight/2,i.scaleX=0,i.scaleY=0,i.anchorOffsetX=i.width>>1,i.anchorOffsetY=i.height>>1,i.x=e.Global.screenWidth/2,e.SceneMgr.instance.currentScene.tipsLayer.contains(i)||e.SceneMgr.instance.currentScene.tipsLayer.addChild(i);var o=function(){e.SceneMgr.instance.currentScene.tipsLayer.contains(i)&&(e.SceneMgr.instance.currentScene.tipsLayer.removeChild(i),i=null)};egret.Tween.get(i).to({scaleX:1,scaleY:1,alpha:1},200),egret.setTimeout(function(){egret.Tween.get(i).to({alpha:0},500).call(o,this)},this,1e3)},t.showTipsBigToSmall=function(t,n){void 0===t&&(t=""),void 0===n&&(n=!1);var i;"string"==typeof t?((i=new egret.TextField).size=24,i.textColor=n?e.Global.TextColors.red:e.Global.TextColors.green,i.alpha=0,i.text=t,i.strokeColor=0,i.stroke=2,i.bold=!0,i.textAlign=egret.HorizontalAlign.CENTER):i=t,i.y=e.Global.screenHeight/2,i.anchorOffsetX=i.width>>1,i.anchorOffsetY=i.height>>1,i.scaleX=4,i.scaleY=4,i.x=e.Global.screenWidth/2,e.SceneMgr.instance.currentScene.tipsLayer.contains(i)||e.SceneMgr.instance.currentScene.tipsLayer.addChild(i);var o=function(){e.SceneMgr.instance.currentScene.tipsLayer.contains(i)&&(e.SceneMgr.instance.currentScene.tipsLayer.removeChild(i),i=null)};egret.Tween.get(i).to({scaleX:1,scaleY:1,alpha:1},200),egret.setTimeout(function(){egret.Tween.get(i).to({alpha:0},500).call(o,this)},this,1e3)},t}();e.TipsUtils=t}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){function t(){}return t.setLocalStorage=function(t,n){e.Global.nativeStorage?e.Global.nativeStorage.save({key:t,id:t,rawData:n,expires:null}):window.localStorage?localStorage.setItem(t,n):window.document&&window.document.cookie?e.BrowersUtils.setCookie(t,n):egret&&egret.localStorage.setItem(t,n)},t.getLocalStorage=function(t,n){var i;if(!e.Global.nativeStorage)return window.localStorage?(null!=(i=localStorage.getItem(t))&&(i=decodeURIComponent(i)),n&&n(i),i):window.document&&window.document.cookie?(null!=(i=e.BrowersUtils.getCookie(t))&&(i=decodeURIComponent(i)),n&&n(i),i):egret?(null!=(i=egret.localStorage.getItem(t))&&(i=decodeURIComponent(i)),n&&n(i),i):(n&&n(null),null);e.Global.nativeStorage.load({key:t,id:t,autoSync:!0,syncInBackground:!0}).then(function(e){n(e)}).catch(function(e){n(null)})},t.clearLocalStorage=function(t){try{if(1==e.Global.lobbyMode&&1==e.Global.isInGame)return;t?e.Global.nativeStorage?e.Global.nativeStorage.remove({key:t}):window.localStorage?localStorage.removeItem(t):window.document&&window.document.cookie?e.BrowersUtils.delCookie(t):egret&&egret.localStorage.removeItem(t):e.Global.nativeStorage?e.Global.nativeStorage.clearMap():window.localStorage?localStorage.clear():window.document&&window.document.cookie?e.BrowersUtils.delCookie():egret&&egret.localStorage.clear()}catch(e){}},t.sortJson=function(e){if("object"!=typeof e||null===e)return e;var n=Array.isArray(e)?[]:{};return Object.keys(e).sort().forEach(function(i){n[i]=t.sortJson(e[i])}),n},t.isIOS=function(){return 0==e.Global.isH5&&"iOS"==egret.Capabilities.os},t.isAndroid=function(){return 0==e.Global.isH5&&"Android"==egret.Capabilities.os},t.restart=function(t,n,i){var o=this,r=o.isrebooting;o.isrebooting=!0,1==e.Global.isH5?1==confirm(t)?""!=e.Global.reLoginUrl?e.BrowersUtils.redirect(e.Global.reLoginUrl):e.BrowersUtils.reload():(o.isrebooting=!1,alert("取消重启")):r||e.Global.dispatchEvent(e.ZqEvent.ON_RESTART,[t,n,i])},t.getCachedPlatInfo=function(t,n,i,o){return void 0===i&&(i=0),e.Global.platId=i,e.Global.gameId=n,e.Global.getPlatToken(t,o)},t.getUrlQrCode=function(e,t,n){var i;this.getShortUrl(e,function(e){t(i="http://qr.liantu.com/api.php?text="+e)})},t.getShortUrl=function(t,n){var i=new e.HttpRequest(function(e){n&&0==e.status&&n(e.tinyurl)});i.open("http://dwz.cn/create.php"),i.send("url="+t)},t.getDistance=function(e,t,n,i){if(Math.abs(e)>90||Math.abs(n)>90)return 0;if(Math.abs(t)>180||Math.abs(i)>180)return 0;var o=this.rad(e),r=this.rad(n),a=o-r,s=this.rad(t)-this.rad(i),l=2*Math.asin(Math.sqrt(Math.pow(Math.sin(a/2),2)+Math.cos(o)*Math.cos(r)*Math.pow(Math.sin(s/2),2)));return l*=this.EARTH_RADIUS,l=Math.round(1e4*l)/1e4},t.rad=function(e){return e*Math.PI/180},t.isrebooting=!1,t.EARTH_RADIUS=6378137,t}();e.Utils=t}(uniLib||(uniLib={}));var uniLib;!function(e){var t=function(){return function(){}}();e.Location=t;var n=function(){return function(){}}();e.QQGroupInfo=n;var i=function(){function n(){}return n.init=function(t,i,r){if(1!=this.isInited){this.isInited=!0;egret.ExternalInterface.addCallback(n.SENDTOJS,function(e){n.onNativeMessage(e)}),t&&(this._callBacks[this.INIT]=[t,i]);var a=new o;if(a.cmd=n.INIT,egret.ExternalInterface.call(n.SENDTONATIVE,JSON.stringify(a)),this.wxinit(),e.Global.addEventListener(e.ZqEvent.ON_RESTART,this.onRestart,this),e.Global.isH5&&t){var s=void 0;if(s=r||RES.getRes("config_json")){if(s[e.Global.appId])e.Global.gameConfig=s[e.Global.appId];else for(var l in s)if(l.indexOf(e.Global.appId)>=0){e.Global.gameConfig=s[l];break}e.Global.defaultConfig=e.Global.gameConfig,t.call(i,e.Global.gameConfig)}else t.call(i)}}},n.onRestart=function(e){var t,n,i,o=e.param;o[0]&&(t=o[0]),o[1]&&(n=o[1]),o[2]&&(i=o[2]),this.restart(t,n,i)},n.onNativeMessage=function(t){var i=JSON.parse(t);if(i.cmd)if(console.error("call func Name:"+i.cmd),i.cmd==this.CALL_STATE&&("callDisconnected"==i.data.callState?this._callState=u.DISCONNECTED:this._callState=u.CONNECTED),i.cmd==this.LOCATIONINFO&&0==i.code&&i.data&&(n.location.lng=Number(i.data.longitude),n.location.lat=Number(i.data.latitude)),i.cmd==this.RECORD_STOP&&(i.data&&i.data.voiceDuration?(e.SoundMgr.instance.pauseBgMusic(),e.SoundMgr.instance.soundPause=!0,setTimeout(function(){e.SoundMgr.instance.resumeBgMusic(),e.SoundMgr.instance.soundPause=!1},i.data.voiceDuration)):(e.SoundMgr.instance.resumeBgMusic(),e.SoundMgr.instance.soundPause=!1)),i.cmd==this.INIT&&(e.Global.bundleId=i.data.bundleId,i.data&&(e.Global.zipmd5=i.data.zipmd5,i.data&&i.data.bundleInfo&&this.updateBundleCfg(i.data.bundleInfo))),i.cmd==this.UPDATE_CFG&&0==i.state&&i.data&&i.data.config&&(e.Global.gameConfig=i.data.config,e.Global.payPlatId=i.data.config.pay_platid,e.Global.platId=i.data.config.platid,e.Global.configmd5=e.StringUtils.MD5(JSON.stringify(e.Utils.sortJson(i.data.config)))),this._callBacks[i.cmd]?this._callBacks[i.cmd][1]&&null!=this._callBacks[i.cmd][1]?this._callBacks[i.cmd][0].call(this._callBacks[i.cmd][1],i):(this._callBacks[i.cmd][0]&&this._callBacks[i.cmd][0](i),e.Global.dispatchEvent(e.ZqEvent.NATIVE_TO_EGERET,i)):e.Global.dispatchEvent(e.ZqEvent.NATIVE_TO_EGERET,i),i.cmd==this.LOGIN)this.hideVk(),this._callBacks[this.LOGIN]&&(this._callBacks[this.LOGIN]=null,delete this._callBacks[this.LOGIN]);else if(i.cmd==this.NETSTATE)n.lastNetState=i,i.data[n.NETSTATE]&&(n.netState=i.data[n.NETSTATE]),n.lastNetState.data&&!n.lastNetState.data[i.cmd]&&(n.lastNetState.data[i.cmd]=0);else if(i.cmd==this.UPDATE_CFG)for(var o in i.data)e.Global.defaultConfig[o]=i.data[o],e.Global.gameConfig[o]=i.data[o]},n.wxinit=function(e){var t=new o;t.cmd=n.initWX,e&&(t.data={},t.data.wxappid=e),egret.ExternalInterface.call(n.SENDTONATIVE,JSON.stringify(t))},n.Login=function(t,i,o,r){o&&null!=o&&(t&&null!=t&&null==this._callBacks[this.LOGIN]&&(this._callBacks[this.LOGIN]=[t,o]),i&&null!=i&&null==this._callBacks[this.LOGOUT]&&(this._callBacks[this.LOGOUT]=[i,o]));var a={};if(a.cmd=n.LOGIN,a.data={},"number"==typeof r||"string"==typeof r?a.data.platid=r:r&&r.platid?a.data.platid=r.platid:a.data=null,r){var s=e.BrowersUtils.GetRequest("code");if(-1==r||0==r.platid||!e.StringUtils.stringIsNullOrEmpty(s))return a.code=0,a.data={},-1==r?(a.data.platid=0,a.data.payplatid=0):"object"==typeof r?(a.data.platid=r.platid,a.data.payplatid=r.payplatid):s&&(e.Global.gameConfig&&(a.data.platid=e.Global.gameConfig.platid,e.Global.gameConfig.payplatid?a.data.payplatid=e.Global.gameConfig.payplatid:a.data.payplatid=e.Global.gameConfig.platid),e.Global.appId&&(a.data.appid=e.Global.appId),a.data.session=s),void(t&&(o?t.call(o,a):t(a)))}egret.ExternalInterface.call(n.SENDTONATIVE,JSON.stringify(a))},n.Logout=function(){var e=new o;e.cmd=n.LOGOUT,egret.ExternalInterface.call(n.SENDTONATIVE,JSON.stringify(e))},n.exit=function(){var e=new o;e.cmd=n.EXITGAME,e.data=!0,egret.ExternalInterface.call(n.SENDTONATIVE,JSON.stringify(e))},n.restart=function(t,i,r){r||e.NetMgr.closeSocket();var a=new o;a.cmd=n.RESTART;var s={};s.desc=t,s.confirm=i||"确定",s.cancel=r||"",a.data=s,egret.ExternalInterface.call(n.SENDTONATIVE,JSON.stringify(a))},n.update=function(e){var t=new o;t.cmd=n.UPDATE,t.data=e,egret.ExternalInterface.call(n.SENDTONATIVE,JSON.stringify(t))},n.pay=function(e,t,i){t&&null!=t&&t&&null!=t&&null==this._callBacks[this.PAY]&&(this._callBacks[this.PAY]=[t,i]);var r=new o;r.cmd=n.PAY,r.data=e,egret.ExternalInterface.call(n.SENDTONATIVE,JSON.stringify(r))},n.payByPmd=function(e,t,i){t&&null!=t&&t&&null!=t&&null==this._callBacks[this.PAY_PMD]&&(this._callBacks[this.PAY_PMD]=[t,i]);var r=new o;r.cmd=n.PAY_PMD,r.data=e,egret.ExternalInterface.call(n.SENDTONATIVE,JSON.stringify(r))},n.share=function(t,i,r){this.wxinit(),i&&null!=i&&i&&null!=i&&(this._callBacks[this.SHARE]=[i,r]),n.defaultWXShareVo&&(t.webpageUrl||(t.webpageUrl=n.defaultWXShareVo.webpageUrl),t.title||(t.title=n.defaultWXShareVo.title),t.description||(t.description=n.defaultWXShareVo.description));var a=new o;a.cmd=n.SHARE,a.data=t,e.Console.log(JSON.stringify(a)),egret.ExternalInterface.call(n.SENDTONATIVE,JSON.stringify(a))},n.recordInit=function(t,i,r){i&&null!=i&&i&&null!=i&&null==this._callBacks[this.RECORD_INIT]&&(this._callBacks[this.RECORD_INIT]=[i,r]);var a=new o;a.cmd=n.RECORD_INIT,a.data=t,e.Console.log(JSON.stringify(a)),egret.ExternalInterface.call(n.SENDTONATIVE,JSON.stringify(a))},n.startRecord=function(t,i){if(this.lastRecordTime=(new Date).getTime(),0!=this.canRecord){this.canRecord=!1,e.SoundMgr.instance.pauseBgMusic(),e.SoundMgr.instance.soundPause=!0,t&&null!=t&&t&&null!=t&&null==this._callBacks[this.RECORD_START]&&(this._callBacks[this.RECORD_START]=[t,i]);var r=new o;r.cmd=n.RECORD_START,e.Console.log("startRecord:"+JSON.stringify(r)),egret.ExternalInterface.call(n.SENDTONATIVE,JSON.stringify(r))}},n.stopRecord=function(t,i){this.canRecord=!0,t&&null!=t&&t&&null!=t&&(this._callBacks[this.RECORD_STOP]=[t,i]);var r=new o;r.cmd=n.RECORD_STOP,e.Console.log("stopRecord:"+JSON.stringify(r)),egret.ExternalInterface.call(n.SENDTONATIVE,JSON.stringify(r)),e.SoundMgr.instance.resumeBgMusic(),e.SoundMgr.instance.soundPause=!1,egret.Capabilities.supportVersion<"3.2.6"&&this.speakerActive()},n.playRecord=function(t,i,r){i&&null!=i&&i&&null!=i&&(this._callBacks[this.RECORD_PLAY]=[i,r]);var a=new o;a.cmd=n.RECORD_PLAY,a.data=t,e.Console.log("playRecord:"+JSON.stringify(a)),egret.ExternalInterface.call(n.SENDTONATIVE,JSON.stringify(a))},n.stopPlayRecord=function(t,i,r){i&&null!=i&&i&&null!=i&&null==this._callBacks[this.RECORD_PLAY_STOP]&&(this._callBacks[this.RECORD_PLAY_STOP]=[i,r]);var a=new o;a.cmd=n.RECORD_PLAY_STOP,a.data=t,e.Console.log(JSON.stringify(a)),egret.ExternalInterface.call(n.SENDTONATIVE,JSON.stringify(a))},n.xfSpeechInit=function(e,t,i,r){t&&null!=t&&t&&null!=t&&null==this._callBacks[this.XF_SPEECH_INIT]&&(this._callBacks[this.XF_SPEECH_INIT]=[t,i]);var a=new o;a.cmd=n.XF_SPEECH_INIT,a.data={},a.data.appId=e,a.data.setParam=r,egret.ExternalInterface.call(n.SENDTONATIVE,JSON.stringify(a))},n.xfUpdateWords=function(e,t,i){t&&null!=t&&t&&null!=t&&null==this._callBacks[this.XF_WORDS_UP]&&(this._callBacks[this.XF_WORDS_UP]=[t,i]);var r=new o;r.cmd=n.XF_WORDS_UP,r.data={},r.data.words=e,egret.ExternalInterface.call(n.SENDTONATIVE,JSON.stringify(r))},n.xfUpLoadGrammer=function(){},n.xfSpeechStart=function(e,t,i,r){e&&null!=e&&null==this._callBacks[this.XF_SPEECH_RESULT]&&(this._callBacks[this.XF_SPEECH_RESULT]=[e,i]),t&&null!=t&&t&&null!=t&&null==this._callBacks[this.XF_SPEECH_END]&&(this._callBacks[this.XF_SPEECH_END]=[t,i]);var a=new o;a.cmd=n.XF_SPEECH_START,a.data=r,egret.ExternalInterface.call(n.SENDTONATIVE,JSON.stringify(a))},n.xfSpeechStop=function(e,t){e&&null!=e&&e&&null!=e&&null==this._callBacks[this.XF_SPEECH_START]&&(this._callBacks[this.XF_SPEECH_START]=[e,t]);var i=new o;i.cmd=n.XF_SPEECH_STOP,egret.ExternalInterface.call(n.SENDTONATIVE,JSON.stringify(i))},n.xfSpeechCacel=function(e,t){e&&null!=e&&e&&null!=e&&null==this._callBacks[this.XF_SPEECH_START]&&(this._callBacks[this.XF_SPEECH_START]=[e,t]);var i=new o;i.cmd=n.XF_SPEECH_CACEL,egret.ExternalInterface.call(n.SENDTONATIVE,JSON.stringify(i))},Object.defineProperty(n,"landscape",{set:function(e){var t=new o;t.cmd=n.LANDSCAPE,t.data=e,egret.ExternalInterface.call(n.SENDTONATIVE,JSON.stringify(t))},enumerable:!0,configurable:!0}),n.openWeb=function(t,i,r,a,s,l){void 0===i&&(i=0);var c=new o;c.cmd=n.OPENWEB;var u={};u.webUrl=t,r&&(u.webHeight=r),a&&(u.webWidth=a),s&&(u.webX=s),l&&(u.webY=l),u.model=i||h.AUTO,c.data=u,1==e.Global.isH5?window.open(t):egret.ExternalInterface.call(n.SENDTONATIVE,JSON.stringify(c))},n.prototype.regListenr=function(){},n.nativeCopyStr=function(e){var t=new o;t.cmd=n.NATIVECOPY,t.data={},t.data.copyStr=e,egret.ExternalInterface.call(n.SENDTONATIVE,JSON.stringify(t))},n.getConfig=function(e,t,i,r){var a=new o;a.cmd=n.GET_CONFIG,a.data={},t&&(a.data.configUrl=t),a.data.desc=e,a.data.confirm=i||"确定",a.data.cancel=r||"",egret.ExternalInterface.call(n.SENDTONATIVE,JSON.stringify(a))},n.getNaviveBoard=function(e,t){e&&null!=e&&e&&null!=e&&null==this._callBacks[this.NETSTATE]&&(this._callBacks[this.NETSTATE]=[e,t]);var i=new o;i.cmd=n.GETNATIVEBOARD,egret.ExternalInterface.call(n.SENDTONATIVE,JSON.stringify(i))},n.getNetStateType=function(t,i,r){if(null==this.lastGetNetStateTime)this.lastGetNetStateTime=(new Date).getTime();else if(!r){if((new Date).getTime()-this.lastGetNetStateTime<=2e3)return;this.lastGetNetStateTime=(new Date).getTime()}t&&null!=t&&t&&null!=t&&null==this._callBacks[this.NETSTATE]&&(this._callBacks[this.NETSTATE]=[t,i]);var a=new o;a.cmd=n.NETSTATE,e.Utils.isIOS()&&e.ZQGameSdk.lastNetState||egret.ExternalInterface.call(n.SENDTONATIVE,JSON.stringify(a))},n.joinQQGroup=function(e){var t=new o;t.data=e,t.cmd=n.JOIN_QQ_GROUP,egret.ExternalInterface.call(n.SENDTONATIVE,JSON.stringify(t))},n.getCallStatus=function(e,t){e&&null!=e&&e&&null!=e&&null==this._callBacks[this.CALL_STATE]&&(this._callBacks[this.CALL_STATE]=[e,t]);var i=new o;return i.cmd=n.CALL_STATE,egret.ExternalInterface.call(n.SENDTONATIVE,JSON.stringify(i)),this._callState},n.getBatteryPer=function(e,t){e&&null!=e&&e&&null!=e&&null==this._callBacks[this.BATTERY]&&(this._callBacks[this.BATTERY]=[e,t]);var i=new o;i.cmd=n.BATTERY,egret.ExternalInterface.call(n.SENDTONATIVE,JSON.stringify(i))},n.localPush=function(e,t,i){void 0===i&&(i=0);var r=new o;r.cmd=n.LOCALPUSH,r.data={},r.data.pushTitle=e,r.data.pushMessage=t,r.data.pushTime=i.toString(),egret.ExternalInterface.call(n.SENDTONATIVE,JSON.stringify(r))},n.vibrate=function(e){var t=new o;t.cmd=n.VIBRATE,t.data={},t.data.delayTime=e.toString(),egret.ExternalInterface.call(n.SENDTONATIVE,JSON.stringify(t))},n.speakerActive=function(){var e=new o;e.cmd=n.SPEAKERACTIVE,e.data={},egret.ExternalInterface.call(n.SENDTONATIVE,JSON.stringify(e))},n.getLocation=function(e,t){e&&null!=e&&null==this._callBacks[this.LOCATIONINFO]&&(this._callBacks[this.LOCATIONINFO]=[e,t]);var i=new o;return i.cmd=n.LOCATIONINFO,egret.ExternalInterface.call(n.SENDTONATIVE,JSON.stringify(i)),n.location},n.updateZip=function(e,t,i){t&&null!=t&&null==this._callBacks[this.UPDATE_ZIP]&&(this._callBacks[this.UPDATE_ZIP]=[t,i]);var r=new o;r.cmd=n.UPDATE_ZIP,r.data=e,egret.ExternalInterface.call(n.SENDTONATIVE,JSON.stringify(r))},n.pickPhoto=function(t,i,r){if(void 0===r&&(r=d.NORMAL),t&&null!=t&&(this._callBacks[this.PICKPHOTO]=[t,i]),e.Global.isH5)e.H5Upload.selectImage(t,i);else{var a=new o;a.cmd=n.PICKPHOTO,a.code=r,a.data={},a.data.code=r,egret.ExternalInterface.call(n.SENDTONATIVE,JSON.stringify(a))}},n.updateApk=function(e,t,i){t&&null!=t&&null==this._callBacks[this.UPDATE_APK]&&(this._callBacks[this.UPDATE_APK]=[t,i]);var r=new o;r.cmd=n.UPDATE_APK,r.data=e,egret.ExternalInterface.call(n.SENDTONATIVE,JSON.stringify(r))},n.hideVk=function(){var e=new o;e.cmd=n.HIDE_VK,egret.ExternalInterface.call(n.SENDTONATIVE,JSON.stringify(e))},n.tdEvent=function(e){var t=new o;t.cmd=n.TD_EVENT,t.data=e,egret.ExternalInterface.call(n.SENDTONATIVE,JSON.stringify(t))},n.trackPoint=function(e){var t=new o;t.cmd=n.TRACK_POINT,t.data=e,egret.ExternalInterface.call(n.SENDTONATIVE,JSON.stringify(t))},n.updateCfg=function(e){this.updateBundleCfg(e);var t=new o;t.cmd=n.UPDATE_CFG,t.data={},t.data.state=c.UPDATE,t.data.config=e,egret.ExternalInterface.call(n.SENDTONATIVE,JSON.stringify(t))},n.updateBundleCfg=function(t){e.Global.gameConfig=e.Utils.sortJson(t),e.Global.gameConfig.lobbyId&&(e.Global.gameConfig.lobbyId=Number(e.Global.gameConfig.lobbyId)),e.Global.is_sandbox=e.Global.gameConfig.is_sandbox,e.Global.configmd5=e.StringUtils.MD5(JSON.stringify(e.Global.gameConfig)),e.Global.payPlatId=e.Global.gameConfig.pay_platid,e.Global.platId=e.Global.gameConfig.platid,e.Global.defaultConfig=e.Global.gameConfig},n.pullCfg=function(e,t){e&&null!=e&&null==this._callBacks[this.UPDATE_CFG]&&(this._callBacks[this.UPDATE_CFG]=[e,t]);var i=new o;i.cmd=n.UPDATE_CFG,i.data={},i.data.state=c.DOWN,egret.ExternalInterface.call(n.SENDTONATIVE,JSON.stringify(i))},n.ymInit=function(e,t){var i=new o;i.cmd=n.YM_INIT,i.data={},i.data.appKey=e,i.data.appSecret=t,egret.ExternalInterface.call(n.SENDTONATIVE,JSON.stringify(i))},n.ymJoin=function(e,t){var i=new o;i.cmd=n.YM_JOIN,i.data={},i.data.uid=e,i.data.rid=t,egret.ExternalInterface.call(n.SENDTONATIVE,JSON.stringify(i))},n.ymStart=function(){var e=new o;e.cmd=n.YM_STAT,egret.ExternalInterface.call(n.SENDTONATIVE,JSON.stringify(e))},n.ymOpen=function(e,t,i,r,a,s){void 0===s&&(s=l.TOP);var c=new o;c.cmd=n.YM_OPEN,c.data={},c.data.uid=e,c.data.x=t,c.data.y=i,c.data.w=r,c.data.h=a,c.data.place=s,egret.ExternalInterface.call(n.SENDTONATIVE,JSON.stringify(c))},n.ymClose=function(e){var t=new o;t.cmd=n.YM_OPEN,t.data={},t.data.uid=e,egret.ExternalInterface.call(n.SENDTONATIVE,JSON.stringify(t))},n.SENDTONATIVE="sendToNative",n.SENDTOJS="sendToJs",n.INIT="init",n.INIT_APP_BUNDLE_INFO="init_app_bundle_info",n.LOGIN="login",n.initWX="initWX",n.LOGOUT="logout",n.PAY="pay",n.PAY_PMD="pay_pmd",n.SHARE="share",n.XF_SPEECH_TYPE_ISA="isa",n.XF_SPEECH_TYPE_ASR="asr",n.LANDSCAPE="landscape",n.RECORD_INIT="recordInit",n.RECORD_START="recordStart",n.RECORD_STOP="recordStop",n.RECORD_PLAY="recordPlay",n.RECORD_PLAY_STOP="recordPlayStop",n.XF_SPEECH_INIT="xfSpeechInit",n.XF_SPEECH_START="xfSpeechStart",n.XF_SPEECH_RESULT="xfSpeechResult",n.XF_SPEECH_VOL="xfSpeechVol",n.XF_SPEECH_STOP="xfSpeechStop",n.XF_SPEECH_CACEL="xfSpeechCacel",n.XF_SPEECH_END="xfSpeechEnd",n.XF_WORDS_UP="xfWordsUp",n.XF_ABN_START="xfABNStart",n.CALL_STATE="callState",n.JOIN_QQ_GROUP="QQGroupInfo",n.HOT_UPDATE="hotUpdate",n.PICKPHOTO="pickPhoto",n.EXITGAME="exitGame",n.RESTART="restart",n.OPENEXIT="openExit",n.OPENWEB="openWeb",n.NATIVECOPY="nativeCopy",n.GETNATIVEBOARD="getNativeBoard",n.NETSTATE="netState",n.netState=0,n.BATTERY="battery",n.LOCALPUSH="localPush",n.VIBRATE="vibrate",n.SPEAKERACTIVE="speakerActive",n.UPDATE="update",n.KEYDOWN="keydown",n.LOCATIONINFO="locationInfo",n.UPDATE_ZIP="updateZip",n.UPDATE_APK="updateApk",n.UPDATE_CFG="updateCfg",n.GET_CONFIG="getConfig",n.YM_INIT="ym_init",n.YM_JOIN="ym_join",n.YM_STAT="ym_stat",n.YM_OPEN="ym_open",n.YM_CLSE="ym_clse",n.HIDE_VK="hide_vk",n.TD_EVENT="td_event",n.TRACK_POINT="track_point",n._callBacks={},n.location=new t,n.isInited=!1,n._callState=0,n.lastRecordTime=0,n.canRecord=!0,n}();e.ZQGameSdk=i;var o=function(){return function(){}}();e.ZQGameObj=o;var r=function(){return function(){}}();e.ZipJson=r;var a=function(){return function(){}}();e.ApkJson=a;var s=function(){return function(){}}();e.XFSetParam=s;var l;!function(e){e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM"}(l=e.YM_PLACE||(e.YM_PLACE={}));!function(e){e[e.ONLINE=0]="ONLINE",e[e.OFFLINE=1]="OFFLINE"}(e.GRAMMARTYPE||(e.GRAMMARTYPE={}));!function(e){e[e.SPEECH=0]="SPEECH",e[e.GRAMMAR=1]="GRAMMAR"}(e.SPEECHTYPE||(e.SPEECHTYPE={}));var c;!function(e){e[e.UPDATE=0]="UPDATE",e[e.DOWN=1]="DOWN"}(c=e.CONFIG_STATE||(e.CONFIG_STATE={}));!function(e){e[e.NO_SIGNAL=0]="NO_SIGNAL",e[e.WIFI=1]="WIFI",e[e.DATA_FLOWS=2]="DATA_FLOWS",e[e.WIFI_AND_DATA=3]="WIFI_AND_DATA"}(e.NetState||(e.NetState={}));var u;!function(e){e[e.DISCONNECTED=0]="DISCONNECTED",e[e.CONNECTED=1]="CONNECTED"}(u=e.CallState||(e.CallState={}));var h;!function(e){e[e.AUTO=0]="AUTO",e[e.EXPLORER=1]="EXPLORER",e[e.LAND=2]="LAND"}(h=e.WEBMODEL||(e.WEBMODEL={}));var d;!function(e){e[e.NORMAL=0]="NORMAL",e[e.AVAR=1]="AVAR"}(d=e.PICKPHOTO_TYPE||(e.PICKPHOTO_TYPE={}))}(uniLib||(uniLib={}));var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),uniLib;!function(e){var t=function(t){function n(n){void 0===n&&(n="assets");var i=t.call(this)||this;return i.w=0,i.h=0,i.assets=RES.getRes(n),i.w=e.Global.screenWidth,i.h=e.Global.screenHeight,i.initPanel(),i}return __extends(n,t),n.prototype.initPanel=function(){},n.prototype.initData=function(){},n.prototype.onEnter=function(){},n.prototype.onExit=function(){},n.prototype.closePanel=function(){e.PopUpMgr.removePopUp(this)},n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n}(egret.DisplayObjectContainer);e.BasePanel=t}(uniLib||(uniLib={}));var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),uniLib;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.skinName='<?xml version=\'1.0\' encoding=\'utf-8\' ?>\n            <e:Skin width="340" height="70" xmlns:e="http://ns.egret.com/eui"><e:Rect right="0" left="0" top="0" bottom="0" fillColor="0x3B2C2C"/>\n            <e:EditableText id="str_input" width="218" height="37" x="12" y="17" text="说点什么吧" verticalAlign="middle" />\n                    <e:Button id="btn_send" label="发送" x="235" y="10" />\n                        <e:List height="266" width="335" x="2" y="-269" />\n                            </e:Skin>',e}return __extends(n,t),n.prototype.childrenCreated=function(){this.btn_send.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTuch,this),this.str_input.prompt="说点什么吧"},n.prototype.onTuch=function(t){e.NetMgr.sendChat(this.str_input.text)},n}(eui.Component);e.GMView=t}(uniLib||(uniLib={}));var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),uniLib;!function(e){var t=function(t){function n(n){var i=t.call(this)||this;return i.uiLayer=new egret.DisplayObjectContainer,i.topLayer=new egret.DisplayObjectContainer,i.effectLayer=new egret.DisplayObjectContainer,i.mainUILayer=new egret.DisplayObjectContainer,i.maskLayer=new egret.DisplayObjectContainer,i.tipsLayer=new egret.DisplayObjectContainer,i.thmLoaded=!1,i.resLoaded=!1,n&&(i._gameInfo=n),e.SceneMgr.instance.init(i),i.initBaseLayers(),i.once(egret.Event.ADDED_TO_STAGE,i.onAddToStage,i),i}return __extends(n,t),n.prototype.initBaseLayers=function(){this.addChild(this.uiLayer),this.addChild(this.topLayer),this.addChild(this.effectLayer),this.addChild(this.mainUILayer),this.addChild(this.maskLayer),this.addChild(this.tipsLayer),this.awake()},n.prototype.awake=function(){},n.prototype.onAddToStage=function(e){void 0===e&&(e=null),this._gameInfo?this.preLoadAndInit():this.start(e)},n.prototype.preLoadAndInit=function(){this._gameInfo.gameTheme&&""!=this._gameInfo.gameTheme?new eui.Theme(this._gameInfo.gameTheme,this.stage).addEventListener(eui.UIEvent.COMPLETE,this.loadedthm,this):this.thmLoaded=!0,console.error("preLoadAndInit"),RES.destroyRes(this._gameInfo.gameResConfigUrl),RES.getResByUrl(this._gameInfo.gameResConfigUrl,this.loadedCfg,this)},n.prototype.loadedthm=function(e){this.thmLoaded=!0,this.cfgComplete()},n.prototype.loadedCfg=function(t){console.error(t),t&&t.groups?(e.GameModuleUtils.loadGameTimeOut&&egret.clearTimeout(e.GameModuleUtils.loadGameTimeOut),this.resLoaded=!0,e.Global.initOpt.lobbyCommonResGrps&&e.Global.initOpt.lobbyCommonResGrps.length>0&&e.ResUtils.clearCfgByConfigName(e.Global.initOpt.lobbyCommonResGrps,t),RES.hasOwnProperty("parseConfig")&&RES.parseConfig(t,this._gameInfo.gameResRoot),RES.destroyRes(this._gameInfo.gameResConfigUrl),this.cfgComplete()):console.error("游戏config加载失败:"+this._gameInfo.gameResConfigUrl)},n.prototype.start=function(e){void 0===e&&(e=null)},n.prototype.cfgComplete=function(){console.error("thmLoaded:"+this.thmLoaded+" resLoaded:"+this.resLoaded),1==this.thmLoaded&&1==this.resLoaded&&(this._gameInfo.preLoad&&""!=this._gameInfo.preLoad?(console.error("this._gameInfo.preLoad:"+this._gameInfo.preLoad),e.ResLoadMgr.instance.load(this._gameInfo.preLoad,this.onResComplete,this.onResError,this,this._gameInfo.preloadUI,this._gameInfo.preloadUIAutoHide)):(this.preLoadEnd(),this.preLoadCallBack&&this.preLoadCallBack()))},n.prototype.onResComplete=function(e){e.groupName==this._gameInfo.preLoad&&(this.preLoadEnd(),this.preLoadCallBack&&this.preLoadCallBack())},n.prototype.preLoadEnd=function(){},n.prototype.resize=function(){},n.prototype.destroy=function(){},n.prototype.onResError=function(e){console.warn("Group:"+e.groupName+" has failed to load")},n.prototype.backToLobby=function(){"LobbyScene"==egret.getQualifiedSuperclassName(e.SceneMgr.instance.currentScene)&&e.SceneMgr.instance.currentScene.removeGame()},n}(egret.DisplayObjectContainer);e.GameDoc=t}(uniLib||(uniLib={}));var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),uniLib;!function(e){var t=function(e){function t(t){var n=e.call(this)||this;return n.uiLayer=new egret.DisplayObjectContainer,n.topLayer=new egret.DisplayObjectContainer,n.effectLayer=new egret.DisplayObjectContainer,n.mainUILayer=new egret.DisplayObjectContainer,n.maskLayer=new egret.DisplayObjectContainer,n.tipsLayer=new egret.DisplayObjectContainer,n.initBaseLayers(),n.once(egret.Event.ADDED_TO_STAGE,n.start,n),n}return __extends(t,e),t.prototype.initBaseLayers=function(){this.addChild(this.uiLayer),this.addChild(this.effectLayer),this.addChild(this.topLayer),this.addChild(this.mainUILayer),this.addChild(this.maskLayer),this.addChild(this.tipsLayer),this.awake()},t.prototype.awake=function(){},t.prototype.start=function(e){void 0===e&&(e=null)},t.prototype.resize=function(){},t.prototype.destroy=function(){},t}(egret.DisplayObjectContainer);e.GameScene=t}(uniLib||(uniLib={}));var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),uniLib;!function(e){var t=function(t){function n(n){var i=t.call(this)||this;return i.uiLayer=new egret.DisplayObjectContainer,i.topLayer=new egret.DisplayObjectContainer,i.effectLayer=new egret.DisplayObjectContainer,i.mainUILayer=new egret.DisplayObjectContainer,i.maskLayer=new egret.DisplayObjectContainer,i.tipsLayer=new egret.DisplayObjectContainer,i.gameLayer=new egret.DisplayObjectContainer,e.SceneMgr.instance.init(i),i.initBaseLayers(),i.once(egret.Event.ADDED_TO_STAGE,i.start,i),i}return __extends(n,t),n.prototype.initBaseLayers=function(){this.addChild(this.uiLayer),this.addChild(this.topLayer),this.addChild(this.effectLayer),this.addChild(this.mainUILayer),this.addChild(this.maskLayer),this.addChild(this.tipsLayer),this.awake()},n.prototype.awake=function(){},n.prototype.start=function(e){void 0===e&&(e=null)},n.prototype.resize=function(){},n.prototype.destroy=function(){},n.prototype.addGame=function(t){this.currentGame=t,null==this._bgMask&&(this._bgMask=e.DisplayUtils.createMask(0,e.Global.screenWidth,e.Global.screenHeight),this._bgMask.touchEnabled=!0,this._bgMask.visible=!0),this.gameLayer.addChild(this._bgMask),this.gameLayer.addChild(t),this.addChildAt(this.gameLayer,1)},n.prototype.removeGame=function(t){void 0===t&&(t=null);var n=e.SceneMgr.instance.currentScene.currentGame;n&&(n.parent&&n.parent.removeChild(n),n.destroy(),n=null),e.DisplayUtils.removeFromParent(this.gameLayer),this.gameLayer.removeChildren(),this.currentGame=null},n}(egret.DisplayObjectContainer);e.LobbyScene=t}(uniLib||(uniLib={}));var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),uniLib;!function(e){var t=function(t){function n(){var n=t.call(this)||this;return n.init(),n.socketStatus.text="connecting",e.StatistcsMgr.instance.addEventListener(e.StatistcsMgr.SENDANDRECEIVE,n.updataSendAndReceive,n),e.StatistcsMgr.instance.addEventListener(e.StatistcsMgr.PING,n.updataPing,n),e.StatistcsMgr.instance.addEventListener(e.StatistcsMgr.SOCKETSTATUS,n.updataSocketStatus,n),e.StatistcsMgr.instance.addEventListener(e.StatistcsMgr.SENDEDANDRECEIVED,n.updataSendedAndReceived,n),n.once(egret.Event.REMOVED_FROM_STAGE,n.destroy,n),e.StatistcsMgr.instance.init(),n}return __extends(n,t),n.prototype.updataSendAndReceive=function(e){var t=e.data;this.sendB.text=t.send+"B/s",this.recevieB.text=t.receive+"B/s"},n.prototype.updataPing=function(e){this.ping.text=e.data+"ms"},n.prototype.updataSocketStatus=function(e){this.socketStatus.text=e.data},n.prototype.updataSendedAndReceived=function(e){this.sendKb.text=e.data.sended.toFixed(2)+"kb",this.recevieKb.text=e.data.received.toFixed(2)+"kb"},n.prototype.init=function(){this.createTextField("Ping"),this.ping=this.createTextFieldX(),this.createTextField("Status"),this.socketStatus=this.createTextFieldX(),this.createTextField("send"),this.sendB=this.createTextFieldX(),this.createTextField("receive"),this.recevieB=this.createTextFieldX(),this.createTextField("sended"),this.sendKb=this.createTextFieldX(),this.createTextField("recevied"),this.recevieKb=this.createTextFieldX()},n.prototype.createTextField=function(e){var t=new egret.TextField;return t.text=e,t.y=this.height+5,t.fontFamily="微软雅黑",t.size=18,this.addChild(t),t},n.prototype.createTextFieldX=function(){var e=new egret.TextField;return e.x=150,e.y=this.height-13,e.fontFamily="微软雅黑",e.size=18,this.addChild(e),e},n.prototype.destroy=function(){e.StatistcsMgr.instance.removeEventListener(e.StatistcsMgr.SENDANDRECEIVE,this.updataSendAndReceive,this),e.StatistcsMgr.instance.removeEventListener(e.StatistcsMgr.PING,this.updataPing,this),e.StatistcsMgr.instance.removeEventListener(e.StatistcsMgr.SOCKETSTATUS,this.updataSocketStatus,this),e.StatistcsMgr.instance.removeEventListener(e.StatistcsMgr.SENDEDANDRECEIVED,this.updataSendedAndReceived,this),e.StatistcsMgr.instance.destroy()},n}(egret.DisplayObjectContainer);e.StatistcsView=t}(uniLib||(uniLib={}));